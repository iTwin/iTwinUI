import{r as e,o as T,B as h,c as g,m as D,p as I,u as w,g as S,d as N,V as U,l as z,j as o,I as L}from"./index-CuyZiCR-.js";import{L as R}from"./LabeledInput-N_iPHibP.js";import{A as b}from"./Anchor-Dr5FrqqF.js";import"./Input-CvmHKG8T.js";import"./InputGrid-BKNwrhSD.js";import"./Label-CFM9C736.js";import"./Textarea-BUT8pR8N.js";import"./Icon-D3eQNw0n.js";import"./InputWithDecorations-CAmVB9IK.js";import"./InputFlexContainer-DD3TyBXv.js";import"./MenuExtraContent-BTFZz76f.js";import"./Select-DitbH6Dc.js";import"./MenuItem-B8oyEAiH.js";import"./focusable-DtP7ag6a.js";import"./ListItem-CH5yiLa5.js";import"./LinkAction-B5wQqUEM.js";import"./List-iRiaQ3Ry.js";import"./SvgCheckmark-CqfAuPmP.js";import"./SvgCaretDownSmall-BwHDBAqJ.js";import"./Text-BoNmDqCf.js";import"./useContainerWidth-2xqBgEPI.js";import"./useVirtualScroll-DKyWuTXe.js";const B=t=>e.createElement(T,t,e.createElement("path",{d:"m2 5h4v7h4v-7h4l-6-5zm12 6v3h-12v-3h-2v5h16v-5z"})),H=t=>e.createElement(T,t,e.createElement("path",{d:"M10 0H2v16h12V4h-4zm1 0v3h3z"})),A=e.forwardRef((t,a)=>{let{dragContent:l,children:d,onFileDropped:i,contentProps:r,...m}=t,[u,p]=e.useState(!1),f=n=>{n.preventDefault(),n.stopPropagation()},E=n=>{var s,F,j;n.preventDefault(),n.stopPropagation(),!u&&((j=(F=(s=n.dataTransfer)==null?void 0:s.items)==null?void 0:F[0])==null?void 0:j.kind)==="file"&&p(!0)},x=n=>{var s;n.preventDefault(),n.stopPropagation(),u&&!((s=n.currentTarget)!=null&&s.contains(n.relatedTarget))&&p(!1)},C=n=>{var s;n.preventDefault(),n.stopPropagation(),u&&(p(!1),i((s=n.dataTransfer)==null?void 0:s.files,n))};return e.createElement(h,{...m,className:g("iui-file-upload",{"iui-drag":u},t==null?void 0:t.className),ref:a,onDragEnter:D(t.onDragEnter,E),onDragOver:D(t.onDragOver,f),onDragLeave:D(t.onDragLeave,x),onDrop:D(t.onDrop,C)},l?d:e.createElement(h,{as:"div",...r,className:g("iui-content",r==null?void 0:r.className)},d),l&&e.createElement(h,{as:"div",...r,className:g("iui-content",r==null?void 0:r.className)},l))});let M=I.span("iui-file-card-empty-icon",{children:e.createElement(B,null)}),O=I.span("iui-file-card-empty-action"),V=e.forwardRef((t,a)=>{let{children:l,className:d,...i}=t;return e.createElement(h,{className:g("iui-file-card-empty",d),ref:a,...i},l??e.createElement(e.Fragment,null,e.createElement(v.Icon,null),e.createElement(v.Text,null,e.createElement(c.InputLabel,null,"Choose a file"),e.createElement("div",null,"to upload."))))});const v=Object.assign(V,{Icon:M,Text:O});let $=t=>{let a=[" bytes","KB","MB","GB","TB"],l=0;for(;t>=1024&&++l;)t/=1024;return t.toFixed(t<10&&l>0?2:0)+a[l]},k=t=>{let a=new Date(t);return a.toDateString()+" "+a.toLocaleTimeString()},P=I.span("iui-file-card-icon",{children:e.createElement(H,null)}),W=I.span("iui-file-card-text"),_=e.forwardRef((t,a)=>{let{children:l,className:d,...i}=t,{files:r}=w(y),m=r.length>1?r.length+" files selected":r[0].name;return e.createElement(h,{as:"span",className:g("iui-file-card-title",d),ref:a,...i},l??m)}),G=e.forwardRef((t,a)=>{let{children:l,className:d,...i}=t,{files:r}=w(y),m=r.length>1?r[0].name+", "+r[1].name:$(r[0].size)+" "+k(r[0].lastModified);return r.length>2&&(m+=", and "+(r.length-2)+" others"),e.createElement(h,{as:"span",className:g("iui-file-card-description",d),ref:a,...i},l??m)}),K=I.div("iui-file-card-action"),q=e.forwardRef((t,a)=>{let{children:l,...d}=t,{inputId:i}=w(y);return e.createElement(b,{as:"label",ref:a,htmlFor:i,...d},l)}),J=e.forwardRef((t,a)=>{let{children:l,onChange:d,id:i,...r}=t,{files:m,onFilesChange:u,setInternalFiles:p,inputId:f,setInputId:E}=w(y),x=e.useCallback(n=>{var F;if(!n||!((F=S())!=null&&F.DataTransfer))return;let s=new DataTransfer;s.items.clear(),Array.from(m).forEach(j=>s.items.add(j)),n.files=s.files},[m]),C=N(a,x);return e.useEffect(()=>{i&&i!==f&&E(i)},[i,f,E]),e.createElement(e.Fragment,null,e.createElement(U,{as:"input",type:"file",unhideOnFocus:!1,onChange:D(d,n=>{let s=Array.from(n.currentTarget.files||[]);u==null||u(s),p(s)}),ref:C,id:i??f,...r}),l)}),Q=e.forwardRef((t,a)=>{let{className:l,children:d,files:i,onFilesChange:r,emptyCard:m=e.createElement(v,null),input:u,...p}=t,[f,E]=e.useState(),x=z(),[C,n]=e.useState(x),s=i??f??[];return e.createElement(y.Provider,{value:{files:s,onFilesChange:r,setInternalFiles:E,inputId:C,setInputId:n}},s!=null&&s.length?e.createElement(h,{className:g("iui-file-card",l),ref:a,...p},d??e.createElement(e.Fragment,null,e.createElement(c.Icon,null),e.createElement(c.Info,null,e.createElement(c.Title,null),e.createElement(c.Description,null)),e.createElement(c.Action,null,e.createElement(c.InputLabel,null,"Replace")))):m,u??e.createElement(c.Input,null))});const c=Object.assign(Q,{Icon:P,Info:W,Title:_,Description:G,Action:K,InputLabel:q,Input:J}),y=e.createContext(void 0),X=t=>e.createElement("svg",{viewBox:"0 0 16 16",width:"1rem",height:"1rem",fill:"var(--iui-color-icon-muted, currentColor)",...t},e.createElement("path",{d:"M14 0L8 6 2 0 0 2l6 6-6 6 2 2 6-6 6 6 2-2-6-6 6-6"})),Y=t=>e.createElement("svg",{viewBox:"0 0 16 16",width:"1rem",height:"1rem",fill:"var(--iui-color-icon-muted, currentColor)",...t},e.createElement("path",{d:"M8 0a8 8 0 108 8 7.998 7.998 0 00-8-8zm3 5a1.147 1.147 0 011 1.25 1.147 1.147 0 01-1 1.25 1.147 1.147 0 01-1-1.25A1.147 1.147 0 0111 5zM5 5a1.147 1.147 0 011 1.25A1.147 1.147 0 015 7.5a1.147 1.147 0 01-1-1.25A1.147 1.147 0 015 5zm3 8.5A4.774 4.774 0 013 9a.5.5 0 011 0 3.772 3.772 0 004 3.5A3.772 3.772 0 0012 9a.5.5 0 011 0 4.774 4.774 0 01-5 4.5z"})),Z=t=>e.createElement("svg",{viewBox:"0 0 16 16",width:"1rem",height:"1rem",fill:"var(--iui-color-icon-muted, currentColor)",...t},e.createElement("path",{d:"M8 0a8 8 0 108 8 7.998 7.998 0 00-8-8zm2.46 5.23l1.5.75a2.512 2.512 0 01.04.27 1.147 1.147 0 01-1 1.25 1.147 1.147 0 01-1-1.25 1.29 1.29 0 01.46-1.02zm-6.42.75l1.5-.75A1.29 1.29 0 016 6.25 1.147 1.147 0 015 7.5a1.147 1.147 0 01-1-1.25 2.512 2.512 0 01.04-.27zm8.4 6.49a.453.453 0 01-.16.03.508.508 0 01-.48-.34A3.934 3.934 0 008 9.5a3.934 3.934 0 00-3.8 2.66.495.495 0 01-.63.31.485.485 0 01-.32-.63A4.947 4.947 0 018 8.5h.07a4.943 4.943 0 014.68 3.34.487.487 0 01-.31.63z"})),De={title:"FileUpload"},Ie=()=>{const[t,a]=e.useState([]);return o.jsx(A,{dragContent:"Drop file to upload",onFileDropped:l=>{a(Array.from(l)),console.log(`${l.length} files uploaded`)},children:o.jsx(R,{placeholder:"Type a message",style:{width:"100%"},message:t.length?`Attached: ${t.map(l=>l.name)}`:"Drag files to attach"})})},ye=()=>{const[t,a]=e.useState([]);return o.jsx(A,{onFileDropped:l=>{a(Array.from(l)),console.log(`${l.length} files uploaded`)},children:o.jsx(c,{files:t,onFilesChange:l=>a(l)})})},je=()=>{const t=e.useRef(null),[a,l]=e.useState([]),d=o.jsxs(v,{children:[o.jsx(v.Icon,{children:o.jsx(Z,{})}),o.jsxs(v.Text,{children:[o.jsx(c.InputLabel,{children:"Custom Label Text"}),o.jsx("div",{children:"Custom Description Text"})]})]});return o.jsx(A,{onFileDropped:i=>{l(Array.from(i)),console.log(`${i.length} files uploaded`)},children:o.jsxs(c,{files:a,onFilesChange:i=>l(i),emptyCard:d,input:o.jsx(c.Input,{name:"my-file",ref:t}),children:[o.jsx(c.Icon,{children:o.jsx(Y,{})}),o.jsxs(c.Info,{children:[o.jsx(c.Title,{children:"Custom File Name"}),o.jsx(c.Description,{children:"Custom File Description"})]}),o.jsx(c.Action,{children:o.jsx(L,{onClick:()=>{l([])},styleType:"borderless",children:o.jsx(X,{})})})]})})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{je as CustomFileUploadCard,ye as DefaultFileUploadCard,Ie as WrappingInput,De as default};
