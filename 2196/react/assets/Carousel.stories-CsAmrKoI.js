import{r as e,f as G,d as K,g as L,B as j,c as p,m as J,h as Q,i as X,k as B,I as z,l as Y,n as Z,j as d,R as O}from"./index-CuyZiCR-.js";import{u as ee}from"./useIntersection-lCgDkXfq.js";import{S as te}from"./SvgChevronLeft-Q4j8gxeB.js";import{S as re}from"./SvgChevronRight-DKarsEy0.js";import{T as le}from"./Text-BoNmDqCf.js";import{C as P}from"./Code-DiqoFzfd.js";const D=e.createContext(void 0),se=e.forwardRef((t,u)=>{let{children:r,className:l,...i}=t,a=e.useContext(D);if(!a)throw new Error("CarouselSlider must be used within Carousel");let{setSlideCount:c,idPrefix:f,scrollToSlide:o,isManuallyUpdating:s}=a,h=e.useMemo(()=>e.Children.map(r,(x,g)=>e.isValidElement(x)?e.cloneElement(x,{id:`${f}--slide-${g}`,"aria-labelledby":`${f}--dot-${g}`,index:g}):x)??[],[r,f]);G(()=>{c(h.length)},[h.length,c]);let C=e.useRef(null),y=K(C,u);o.current=(x,{instant:g}={})=>{var I,E,T;s.current=!0;let k=(I=C.current)==null?void 0:I.children.item(x);if(!C.current||!k)return;let v=(T=(E=L())==null?void 0:E.matchMedia("(prefers-reduced-motion: no-preference)"))==null?void 0:T.matches;C.current.scrollTo({left:k.offsetLeft-C.current.offsetLeft,behavior:g||!v?"instant":"smooth"})};let b=e.useRef(),w=e.useCallback(()=>{var x,g;b.current&&((x=L())==null||x.clearTimeout(b.current)),b.current=(g=L())==null?void 0:g.setTimeout(()=>{s.current=!1},100)},[s]);return e.createElement(j,{className:p("iui-carousel-slider",l),ref:y,onScroll:w,tabIndex:-1,...i},h)}),oe=e.forwardRef((t,u)=>{let{index:r,className:l,children:i,...a}=t,c=e.useContext(D);if(!c||r==null)throw new Error("CarouselSlide must be used within Carousel");let{isManuallyUpdating:f,currentIndex:o,setCurrentIndex:s}=c,h=e.useCallback(()=>{f.current||s(r)},[r,f,s]),C=ee(h,{threshold:.5},!1),y=K(C,u);return e.createElement(j,{className:p("iui-carousel-slider-item",l),role:"tabpanel","aria-roledescription":"slide",tabIndex:r===o?0:void 0,ref:y,inert:r!==o?"":void 0,...a,onKeyDown:J(t.onKeyDown,b=>{(b.key==="ArrowLeft"||b.key==="ArrowRight")&&b.preventDefault()})},i)}),U=e.forwardRef((t,u)=>{let{isActive:r,isSmaller:l,isSmall:i,className:a,...c}=t;return e.createElement(Q,{role:"tab",tabIndex:r?0:-1,className:p("iui-carousel-navigation-dot",{"iui-active":r,"iui-first":l,"iui-second":i},a),"aria-selected":r,ref:u,...c})}),V=e.forwardRef((t,u)=>{let{currentIndex:r,length:l,className:i,onSlideChange:a,children:c,...f}=t,o=e.useContext(D),s=l??(o==null?void 0:o.slideCount)??e.Children.count(c),h=r??(o==null?void 0:o.currentIndex)??0,C=t.id??(o==null?void 0:o.idPrefix),y=e.useCallback(m=>{var n,R;o&&(o.setCurrentIndex(m),o.scrollToSlide.current(m)),(R=(n=g.current)==null?void 0:n.children[m])==null||R.focus(),a==null||a(m)},[o,a]),b=e.useRef(!0),[w,x]=e.useState(s),g=e.useRef(null),[k,v]=e.useState(),[I,E]=X(({width:m})=>{if(!g.current)return;v(m);let n=g.current.children[0].offsetWidth;x(Math.floor(m/n))});e.useEffect(()=>E==null?void 0:E.disconnect(),[E]);let T=K(u,I,g),N=e.useMemo(()=>B(h-Math.ceil(w/2)+1,0,s-w),[h,s,w]),M=e.useMemo(()=>B(h+Math.floor(w/2),w-1,s-1),[h,s,w]),_=e.useMemo(()=>Array(s).fill(null).map((m,n)=>{let R=n===N&&n!==0||n===M&&n!==s-1,$=n===N+1&&n!==1||n===M-1&&n!==s-2,A=n<N||n>M;return e.createElement(U,{key:n,"aria-label":`Slide ${n+1}`,isActive:n===h,onClick:()=>y(n),isSmall:$,isSmaller:R||A,id:C&&`${C}--dot-${n}`})}),[s,N,M,h,C,y]);e.useEffect(()=>{var R,$,A;let m=(R=g.current)==null?void 0:R.children[N];if(!g.current||!m)return;let n=(A=($=L())==null?void 0:$.matchMedia("(prefers-reduced-motion: no-preference)"))==null?void 0:A.matches;g.current.scrollTo({left:m.offsetLeft-g.current.offsetLeft,behavior:n&&!b.current?"smooth":"auto"}),b.current&&(b.current=!1)},[h,N,s,w,k]);let H=m=>{if(m.altKey||m.ctrlKey||m.metaKey||m.shiftKey)return;let n=m.key;(n==="ArrowLeft"||n==="ArrowRight")&&m.preventDefault()},q=m=>{switch(m.key){case"ArrowLeft":y((s+h-1)%s);break;case"ArrowRight":y((s+h+1)%s);break}};return e.createElement(e.Fragment,null,e.createElement(j,{className:p("iui-carousel-navigation-dots",i),role:"tablist","aria-label":"Slides",ref:T,onKeyDown:H,onKeyUp:q,tabIndex:-1,...f},c??_))});let ne=e.forwardRef((t,u)=>{let{className:r,children:l,...i}=t;return e.createElement(j,{className:p("iui-carousel-navigation",r),ref:u,...i},l??e.createElement(e.Fragment,null,e.createElement(j,{className:"iui-carousel-navigation-left"},e.createElement(W,null)),e.createElement(V,null),e.createElement(j,{className:"iui-carousel-navigation-right"},e.createElement(F,null))))}),W=e.forwardRef((t,u)=>{let r=e.useContext(D);if(!r)throw new Error("CarouselNavigation should be used inside Carousel");let{slideCount:l,currentIndex:i,setCurrentIndex:a,scrollToSlide:c}=r;return e.createElement(z,{styleType:"borderless",size:"small",tabIndex:-1,"aria-label":"Previous",ref:u,...t,onClick:f=>{var s;let o=(l+i-1)%l;a(o),c.current(o,{instant:f.detail>3}),(s=t==null?void 0:t.onClick)==null||s.call(t,f)}},e.createElement(te,null))}),F=e.forwardRef((t,u)=>{let r=e.useContext(D);if(!r)throw new Error("CarouselNavigation should be used inside Carousel");let{slideCount:l,currentIndex:i,setCurrentIndex:a,scrollToSlide:c}=r;return e.createElement(z,{styleType:"borderless",size:"small",tabIndex:-1,"aria-label":"Next",ref:u,...t,onClick:f=>{var s;let o=(l+i+1)%l;a(o),c.current(o,{instant:f.detail>3}),(s=t==null?void 0:t.onClick)==null||s.call(t,f)}},e.createElement(re,null))});const ie=Object.assign(ne,{PreviousButton:W,NextButton:F});let ae=e.forwardRef((t,u)=>{let r=Y(),{activeSlideIndex:l=0,onSlideChange:i,className:a,children:c,id:f=r,...o}=t,s=e.useRef(!1),h=e.useRef(null),C=K(h,u),[y,b]=e.useState(l),w=e.useRef(()=>{}),x=e.useRef(!0);e.useEffect(()=>{b(l),w.current(l,{instant:x.current}),x.current=!1},[l]);let[g,k]=e.useState(0),v=Z(i);return e.useEffect(()=>{var I;(I=v.current)==null||I.call(v,y)},[v,y]),e.createElement(j,{as:"section","aria-roledescription":"carousel",ref:C,className:p("iui-carousel",a),...o,id:f},e.createElement(D.Provider,{value:{currentIndex:y,setCurrentIndex:b,slideCount:g,setSlideCount:k,idPrefix:f,isManuallyUpdating:s,scrollToSlide:w}},c))});const S=Object.assign(ae,{Slider:se,Slide:oe,Navigation:ie,DotsList:V,Dot:U}),Ce={title:"Carousel"},xe=()=>{const t=[{from:"#cc2b5e",to:"#753a88"},{from:"#00467f",to:"#a5cc82"},{from:"#2193b0",to:"#6dd5ed"},{from:"#ffe000",to:"#799f0c"},{from:"#e65c00",to:"#f9d423"},{from:"#1488cc",to:"#2b32b2"},{from:"#bbd2c5",to:"#536976"},{from:"#9796f0",to:"#fbc7d4"},{from:"#b79891",to:"#94716b"},{from:"#acb6e5",to:"#86fde8"}];return d.jsxs(S,{style:{width:"min(800px, 90vw)"},children:[d.jsx(S.Navigation,{}),d.jsx(S.Slider,{children:t.map(({from:u,to:r},l)=>d.jsx(S.Slide,{children:d.jsx("div",{style:{background:`linear-gradient(to right, ${u}, ${r})`,height:350,width:"100%",display:"grid",placeItems:"center"},children:d.jsx("div",{style:{fontSize:48,color:"hsl(0deg 0% 100% / 0.7)"},children:l+1})})},l))})]})},ye=()=>{const t=[{from:"#cc2b5e",to:"#753a88"},{from:"#00467f",to:"#a5cc82"},{from:"#2193b0",to:"#6dd5ed"},{from:"#ffe000",to:"#799f0c"},{from:"#e65c00",to:"#f9d423"},{from:"#1488cc",to:"#2b32b2"},{from:"#bbd2c5",to:"#536976"},{from:"#9796f0",to:"#fbc7d4"},{from:"#b79891",to:"#94716b"},{from:"#acb6e5",to:"#86fde8"}],[u,r]=O.useState(5);return d.jsxs(S,{style:{width:"min(800px, 90vw)"},activeSlideIndex:u,onSlideChange:l=>r(l),children:[d.jsx(S.Navigation,{}),d.jsx(S.Slider,{children:t.map(({from:l,to:i},a)=>d.jsx(S.Slide,{children:d.jsx("div",{style:{background:`linear-gradient(to right, ${l}, ${i})`,height:350,width:"100%",display:"grid",placeItems:"center"},children:d.jsx("div",{style:{fontSize:48,color:"hsl(0deg 0% 100% / 0.7)"},children:a+1})})},a))})]})},ce=()=>"my-custom-carousel",de=()=>{const t=[{from:"#cc2b5e",to:"#753a88"},{from:"#00467f",to:"#a5cc82"},{from:"#2193b0",to:"#6dd5ed"},{from:"#ffe000",to:"#799f0c"},{from:"#e65c00",to:"#f9d423"},{from:"#1488cc",to:"#2b32b2"},{from:"#bbd2c5",to:"#536976"},{from:"#9796f0",to:"#fbc7d4"},{from:"#b79891",to:"#94716b"},{from:"#acb6e5",to:"#86fde8"}],u=ce(),[r,l]=O.useState(0);return d.jsxs("section",{"aria-roledescription":"carousel",tabIndex:0,onKeyUp:({key:i})=>{const a=i==="ArrowRight"?1:i==="ArrowLeft"?-1:0;l(c=>(t.length+c+a)%t.length)},style:{display:"inline-grid",width:"min(90vw, 40vh)"},children:[d.jsx(S.DotsList,{id:u,length:t.length,currentIndex:r,onSlideChange:i=>l(i),style:{justifySelf:"center",maxWidth:"min(100%, 200px)"}}),d.jsx("div",{style:{display:"grid",grid:"[slide] 1fr / [slide] 1fr",order:"-1"},children:t.map(({from:i,to:a},c)=>d.jsx("div",{role:"tabpanel",id:`${u}-slide-${c}`,onClick:({currentTarget:{clientWidth:f},clientX:o})=>{const s=f-o>f/2?-1:1;l(h=>(t.length+h+s)%t.length)},style:{gridArea:"slide",opacity:r===c?1:0,pointerEvents:r===c?"auto":"none",transition:"opacity 0.5s",cursor:"pointer"},children:d.jsx("div",{style:{background:`linear-gradient(to right, ${i}, ${a})`,height:"min(600px, 70vh)",display:"grid",placeItems:"center",fontSize:48,color:"hsl(0deg 0% 100% / 0.7)"},children:c+1})},c))})]})};de.decorators=[t=>d.jsxs("div",{style:{display:"inline-grid",gap:"1rem"},children:[d.jsxs(le,{isMuted:!0,style:{fontStyle:"italic"},children:["This example shows how ",d.jsx(P,{children:"Carousel.DotsList"})," can be used outside ",d.jsx(P,{children:"Carousel"}),".",d.jsx("br",{}),"Clicking on the right half of the slide will advance the carousel to the next slide, whereas clicking on the left half will go to the previous slide."]}),d.jsx(t,{})]})];typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{xe as Basic,ye as Controlled,de as OnlyDots,Ce as default};
