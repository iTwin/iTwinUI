import{r as e,S as Te,B as te,c as ae,u as L,d as xe,n as G,m as ye,G as Ae,f as Ce,K as qe,l as Oe,t as Pe,E as We,y as He,D as U}from"./index-CuyZiCR-.js";import{L as Se}from"./Label-CFM9C736.js";import{I as ze}from"./Input-CvmHKG8T.js";import{T as Ke}from"./Textarea-BUT8pR8N.js";import{I as $e}from"./Icon-D3eQNw0n.js";import{I as de}from"./InputWithDecorations-CAmVB9IK.js";import{M as je}from"./MenuExtraContent-BTFZz76f.js";import{a as Ge,I as ce,b as Ue,A as Ye,S as re}from"./Select-DitbH6Dc.js";import{T as Je}from"./Text-BoNmDqCf.js";import{S as Qe}from"./SvgCaretDownSmall-BwHDBAqJ.js";import{u as Xe}from"./useContainerWidth-2xqBgEPI.js";import{L as Ze}from"./List-iRiaQ3Ry.js";import{u as _e}from"./useVirtualScroll-DKyWuTXe.js";import{L as ee}from"./ListItem-CH5yiLa5.js";import{S as et}from"./SvgCheckmark-CqfAuPmP.js";const fe=e.forwardRef((a,u)=>{let{children:c,startIcon:i,status:t,className:s,iconProps:l,contentProps:o,...r}=a,f=i??(t&&Te[t]()),C=i!==null&&!!f;return e.createElement(te,{className:ae("iui-status-message",s),"data-iui-status":t,ref:u,...r},C?e.createElement($e,{"aria-hidden":!0,...l},f):null,e.createElement(te,o,c))}),tt=e.forwardRef((a,u)=>{let{label:c,disabled:i,required:t,status:s,message:l,icon:o,isLabelInline:r,children:f,className:C,style:x,statusMessage:b,inputId:g,labelId:d,...V}=a;return e.createElement(te,{className:ae("iui-input-grid",C),"data-iui-status":s,"data-iui-label-placement":r?"inline":void 0,style:x,ref:u,...V},c&&e.createElement(Se,{as:g&&a.as!=="label"?"label":"div",required:t,disabled:i,htmlFor:g,id:d},c),f,b||l&&e.createElement(fe,{startIcon:o,status:s},l))}),me=e.createContext(void 0),Y=e.createContext(void 0),rt=e.forwardRef((a,u)=>{let{className:c,children:i,disabled:t,isOpen:s,...l}=a;return e.createElement($e,{as:"span",ref:u,className:ae("iui-end-icon",{"iui-disabled":t,"iui-open":s},c),...l},i??e.createElement(Qe,{"aria-hidden":!0}))}),at=e.forwardRef((a,u)=>{let{selectedItems:c=[],...i}=a;return e.createElement(Ge,{ref:u,tags:c,...i})}),nt=e.forwardRef((a,u)=>{let{selectTags:c,size:i,style:t,...s}=a,{isOpen:l,id:o,focusedIndex:r,setFocusedIndex:f,enableVirtualization:C,multiple:x,onClickHandler:b,popover:g,show:d,hide:V}=L(Y),{inputRef:ne,menuRef:y,optionsExtraInfo:N}=L(me),pe=xe(ne,g.refs.setReference,u),S=G(r??-1),be=v=>{var B,w;return((w=(B=y.current)==null?void 0:B.querySelector(`[data-iui-index="${v}"]`))==null?void 0:w.id)??""},z=e.useCallback(v=>{var w,Q,$,D,T,A,q,P,X,K;let B=Object.keys(N).length??0;if(!v.altKey)switch(v.key){case"ArrowDown":{if(v.preventDefault(),!l)return d();if(B===0)return;if(S.current===-1){let k=(w=y.current)==null?void 0:w.querySelector("[data-iui-index]");return f(Number((k==null?void 0:k.getAttribute("data-iui-index"))??0))}if(C&&!(($=(Q=y.current)==null?void 0:Q.querySelector(`[data-iui-index="${S.current}"]`))!=null&&$.nextElementSibling))return;let h=S.current;do{let k=(D=y.current)==null?void 0:D.querySelector(`[data-iui-index="${h}"]`),M=(k==null?void 0:k.nextElementSibling)??((T=y.current)==null?void 0:T.querySelector("[data-iui-index]"));if(h=Number(M==null?void 0:M.getAttribute("data-iui-index")),M)return f(h)}while(h!==S.current);break}case"ArrowUp":{if(v.preventDefault(),!l)return d();if(B===0||C&&!((q=(A=y.current)==null?void 0:A.querySelector(`[data-iui-index="${S.current}"]`))!=null&&q.previousElementSibling))return;if(S.current===-1)return f(((P=Object.values(N))==null?void 0:P[B-1].__originalIndex)??-1);let h=S.current;do{let k=(X=y.current)==null?void 0:X.querySelector(`[data-iui-index="${h}"]`),M=(k==null?void 0:k.previousElementSibling)??((K=y.current)==null?void 0:K.querySelector("[data-iui-index]:last-of-type"));if(h=Number(M==null?void 0:M.getAttribute("data-iui-index")),M)return f(h)}while(h!==S.current);break}case"Enter":v.preventDefault(),l?S.current>-1&&(b==null||b(S.current)):d();break;case"Escape":v.preventDefault(),V();break;case"Tab":V();break}},[f,C,S,l,y,b,N,d,V]),R=e.useRef(!1),H=e.useCallback(()=>{R.current=l},[l]),J=e.useCallback(()=>{R.current?V():d(),R.current=!1},[V,d]),[le,m]=Xe();return e.createElement(e.Fragment,null,e.createElement(ze,{ref:pe,"aria-expanded":l,"aria-activedescendant":l&&r!=null&&r>-1?be(r):void 0,role:"combobox","aria-controls":l?`${o}-list`:void 0,"aria-autocomplete":"list",spellCheck:!1,autoCapitalize:"none",autoCorrect:"off",style:{...x&&{paddingInlineStart:m+18},...t},"aria-describedby":x?`${o}-selected-live`:void 0,size:i,...g.getReferenceProps({...s,onPointerDown:ye(a.onPointerDown,H),onClick:ye(a.onClick,J),onKeyDown:ye(a.onKeyDown,z)})}),x&&c?e.createElement(at,{ref:le,selectedItems:c,id:`${o}-selected-live`}):null)}),lt=e.forwardRef((a,u)=>{let{className:c,status:i,message:t,children:s,...l}=a,{id:o}=L(Y);return e.createElement(tt,{className:c,status:i,statusMessage:typeof t=="string"?e.createElement(fe,{status:i},t):e.isValidElement(t)&&e.cloneElement(t,{status:i}),ref:u,...l,id:o},e.createElement(ce,null,s))});let it=a=>{let{children:u,...c}=a,{filteredOptions:i,getMenuItem:t,focusedIndex:s}=L(Y),{menuRef:l}=L(me),o=e.useMemo(()=>{let b=0;for(let g=0;g<Math.min(5,i.length);g++)i[g].sublabel&&b++;return b>=Math.min(3,i.length)},[i]),r=e.useMemo(()=>{var g;let b=(g=l.current)==null?void 0:g.querySelector(`[data-iui-index="${s}"]`);return b?Number(b.getAttribute("data-iui-filtered-index")??s):s},[s,l]),{virtualizer:f,css:C}=_e({count:i.length||1,getScrollElement:()=>l.current,estimateSize:()=>o?48:36,gap:-1});Ce(()=>{f.scrollToIndex(r)},[f,r]);let x=e.useCallback(b=>{let g=i.length>0?t(i[b.index],b.index):u;return e.cloneElement(g,{key:b.key,ref:f.measureElement,"data-iui-virtualizer":"item",style:{width:"100%",transform:`translateY(${b.start}px)`}})},[i,t,u,f.measureElement]);return e.createElement(e.Fragment,null,e.createElement(qe,{css:C},e.createElement(te,{as:"div","data-iui-virtualizer":"root",...c,style:{minBlockSize:f.getTotalSize(),...a.style}},e.createElement("slot",null))),e.createElement(e.Fragment,null,f.getVirtualItems().map(b=>x(b))))};const st=e.forwardRef((a,u)=>{let{className:c,children:i,style:t,...s}=a,{id:l,enableVirtualization:o,popover:r}=L(Y),{menuRef:f}=L(me),C=xe(r.refs.setFloating,u,f);return r.open&&e.createElement(Ae,{portal:!0},e.createElement(Ze,{as:"div",className:ae("iui-menu",c),id:`${l}-list`,role:"listbox",ref:C,...r.getFloatingProps({style:o?{maxInlineSize:0,...t}:t,...s})},o?e.createElement(it,null,i):i))}),ut=e.memo(e.forwardRef((a,u)=>{let{children:c,isSelected:i,disabled:t,value:s,onClick:l,sublabel:o,size:r=o?"large":"default",startIcon:f,endIcon:C,role:x="option",index:b,...g}=a,{focusedIndex:d,enableVirtualization:V}=L(Y),y=xe(u,N=>{!V&&d===b&&(N==null||N.scrollIntoView({block:"nearest"}))});return e.createElement(ee,{as:"div",actionable:!0,size:r,active:i,disabled:t,focused:d===b,ref:y,onClick:()=>l==null?void 0:l(s),role:x,tabIndex:x==="presentation"?void 0:-1,"aria-selected":i,"aria-disabled":t,"data-iui-index":b,...g},f&&e.createElement(ee.Icon,{as:"span","aria-hidden":!0},f),e.createElement(ee.Content,null,c,o&&e.createElement(ee.Description,null,o)),C||i&&e.createElement(ee.Icon,{as:"span","aria-hidden":!0},C??e.createElement(et,null)))}));let F=(a,u)=>u&&(Array.isArray(a)||a==null),ot=(a,u)=>!u,Ve=(a,u)=>a.id??`${u}-option-${a.label.replace(/\s/g,"-")}`;const ve=e.forwardRef((a,u)=>{var we;let c=Oe(),i=e.useCallback((n,p)=>n.filter(I=>I.label.toLowerCase().includes(p.toLowerCase())),[]),{options:t,value:s,onChange:l,filterFunction:o=i,inputProps:r,endIconProps:f,dropdownMenuProps:C,emptyStateMessage:x="No options found",itemRenderer:b,enableVirtualization:g=!1,multiple:d=!1,onShow:V,onHide:ne,id:y=r!=null&&r.id?`iui-${r.id}-cb`:c,defaultValue:N,...pe}=a,S=e.useRef(null),be=e.useRef(null),z=G(l),R=G(t),H=G(o),J=e.useMemo(()=>{let n={};return t.forEach((p,I)=>{n[Ve(p,y)]={__originalIndex:I}}),n},[y,t]),le=e.useCallback(n=>{if(n!==void 0){if(F(n,d)){let p=[];return n==null||n.forEach(I=>{let E=t.findIndex(O=>O.value===I);E>-1&&p.push(E)}),p}return t.findIndex(p=>p.value===n)}},[d,t]),[m,v]=Pe(le(N)??(d?[]:-1),le(s)),B=e.useRef(s);Ce(()=>{s!==B.current&&(B.current=s,s===void 0&&(F(m,d)?v([]):v(-1)))},[d,m,v,s]);let[w,Q]=e.useState(!1),[$,D]=e.useState(-1),T=G(V),A=G(ne),q=e.useCallback(()=>{var n;Q(!0),(n=T.current)==null||n.call(T)},[T]),P=e.useCallback(()=>{var n;Q(!1),(n=A.current)==null||n.call(A)},[A]);Ce(()=>{var n,p;w?((n=S.current)==null||n.focus(),F(m,d)||D(m??-1)):(D(-1),F(m,d)||h(m>=0?((p=R.current[m])==null?void 0:p.label)??"":""))},[w,d,R,m]);let X=e.useRef(t);e.useEffect(()=>{t!==X.current&&(X.current=t,n());function n(){var p;F(m,d)?D(-1):D(m),!F(m,d)&&!w&&h(m>=0?(p=t[m])==null?void 0:p.label:"")}},[t,w,d,m]);let[K,h]=e.useState(((we=r==null?void 0:r.value)==null?void 0:we.toString())??""),[k,M]=e.useState(!1),Ie=e.useMemo(()=>{var n;return k?(n=H.current)==null?void 0:n.call(H,t,K):t},[H,K,t,k]),[Ne,Be]=e.useState(""),De=e.useCallback(n=>{var I;let{value:p}=n.currentTarget;h(p),q(),M(!0),$!=-1&&D(-1),(I=r==null?void 0:r.onChange)==null||I.call(r,n)},[$,r,q]),Z=e.useCallback(n=>F(m,d)?m.includes(n):m===n,[d,m]),ke=e.useCallback((n,p)=>{if(F(m,d))return p==="added"?[...m,n]:m==null?void 0:m.filter(I=>I!==n)},[m,d]),ge=e.useCallback((n,p,I)=>{var E,O,j,W;ot(z.current,d)?(O=z.current)==null||O.call(z,(E=R.current[n])==null?void 0:E.value):p&&I&&((W=z.current)==null||W.call(z,I==null?void 0:I.map(Ee=>{var se;return(se=R.current[Ee])==null?void 0:se.value}),{value:(j=R.current[n])==null?void 0:j.value,type:p}))},[d,z,R]),ie=e.useCallback(n=>{var p,I;if((p=S.current)==null||p.focus({preventScroll:!0}),!((I=R.current[n])!=null&&I.disabled))if(M(!1),d){let E=Z(n)?"removed":"added",O=ke(n,E);if(O==null)return;v(O),ge(n,E,O),Be(O.map(j=>{var W;return(W=R.current[j])==null?void 0:W.label}).filter(Boolean).join(", "))}else v(n),P(),ge(n)},[ke,Z,d,ge,R,P,v]),Re=e.useCallback((n,p)=>{let I=Ve(n,y),{__originalIndex:E}=J[I],{icon:O,startIcon:j,label:W,...Ee}=n,se=j??O,ue=b?b(n,{isFocused:$===E,isSelected:Z(E),index:E,id:I}):null;return ue?e.cloneElement(ue,{onClick:_=>{var he,Me;ie(E),(Me=(he=ue.props).onClick)==null||Me.call(he,_)},focused:$===E,"data-iui-index":E,"data-iui-filtered-index":p,ref:We(ue.props.ref,_=>{!g&&$===E&&(_==null||_.scrollIntoView({block:"nearest"}))})}):e.createElement(ut,{key:I,id:I,startIcon:se,...Ee,isSelected:Z(E),onClick:()=>{ie(E)},index:E,"data-iui-filtered-index":p},W)},[g,$,y,Z,b,ie,J]),Fe=e.useMemo(()=>e.createElement(e.Fragment,null,e.isValidElement(x)?x:e.createElement(je,null,e.createElement(Je,{isMuted:!0},x))),[x]),Le=He({visible:w,onVisibleChange:n=>n?q():P(),matchWidth:!0,middleware:{size:{maxHeight:"var(--iui-menu-max-height)"}},closeOnOutsideClick:!0,interactions:{click:!1,focus:!0}});return e.createElement(me.Provider,{value:{inputRef:S,menuRef:be,optionsExtraInfo:J}},e.createElement(Y.Provider,{value:{id:y,isOpen:w,focusedIndex:$,setFocusedIndex:D,onClickHandler:ie,enableVirtualization:g,filteredOptions:Ie,getMenuItem:Re,multiple:d,popover:Le,show:q,hide:P}},e.createElement(lt,{ref:u,disabled:r==null?void 0:r.disabled,...pe},e.createElement(e.Fragment,null,e.createElement(nt,{value:K,disabled:r==null?void 0:r.disabled,...r,onChange:De,selectTags:F(m,d)?m==null?void 0:m.map(n=>{let p=t[n];return e.createElement(Ue,{key:p.label,label:p.label})}).filter(Boolean):void 0})),e.createElement(rt,{...f,disabled:r==null?void 0:r.disabled,isOpen:w}),d?e.createElement(Ye,{text:Ne}):null),e.createElement(st,{as:"div",...C},Ie.length>0&&!g?Ie.map(Re):Fe)))}),Mt=e.forwardRef((a,u)=>{let{children:c,className:i,labelPlacement:t,...s}=a,l=dt(c);return e.createElement(te,{className:ae("iui-input-grid",i),"data-iui-label-placement":t,ref:u,...s},l)});let dt=a=>{let{labelId:u,inputId:c,messageId:i}=ct(a);return e.useMemo(()=>e.Children.map(a,t=>e.isValidElement(t)?t.type===Se||t.type==="label"?U(t,s=>({...s.props,htmlFor:s.props.htmlFor||c,id:s.props.id||u})):t.type===fe?U(t,s=>({...s.props,id:s.props.id||i})):oe(t)||t.type===de||t.type===ce?ft(t,{labelId:u,inputId:c,messageId:i}):t:t),[a,c,u,i])},ct=a=>{let u=Oe(),c,i,t,s=!1,l=!1,o=r=>{var f;if(e.isValidElement(r)){if(r.type===ve)return((f=r.props.inputProps)==null?void 0:f.id)||`${u}--input`;if(r.type!==re)return r.props.id||`${u}--input`}};return e.Children.forEach(a,r=>{e.isValidElement(r)&&((r.type===Se||r.type==="label")&&(s=!0,c||(c=r.props.id||`${u}--label`)),r.type===fe&&(t||(t=r.props.id||`${u}--message`)),r.type===de||r.type===ce?e.Children.forEach(r.props.children,f=>{oe(f)&&(i||(i=o(f)))}):oe(r)&&(i||(i=o(r))),r.type===re&&(l=!0))}),{labelId:l?c:void 0,inputId:s&&!l?i:void 0,messageId:t}},ft=(a,{labelId:u,inputId:c,messageId:i})=>{let t=(l={})=>{let o=[l["aria-describedby"],i].filter(Boolean).join(" ");return{...l,...a.type!==re&&{id:l.id||c},"aria-describedby":(o==null?void 0:o.trim())||void 0}},s=l=>l.type===ve?U(l,o=>({inputProps:t(o.props.inputProps)})):l.type===re?U(l,o=>({triggerProps:{"aria-labelledby":u,...t(o.props.triggerProps)}})):U(l,o=>t(o.props));return a.type===de||a.type===ce?U(a,l=>({children:e.Children.map(l.props.children,o=>e.isValidElement(o)&&oe(o)?s(o):o)})):s(a)},oe=a=>e.isValidElement(a)&&(a.type==="input"||a.type==="textarea"||a.type==="select"||a.type===ze||a.type===Ke||a.type===de.Input||a.type===re||a.type===ve);export{ve as C,Mt as I,fe as S};
