import{r as e,a as He,B as se,c as Ee,o as We,u as W,e as Oe,n as X,m as he,S as je,F as Ke,d as Ve,K as Ge,l as Pe,x as Ue,E as Ye,y as Je,D as Z}from"./index-BS0WSfy9.js";import{L as ze}from"./Label-ClWAuitg.js";import{I as Qe}from"./Input-eAO1OFmP.js";import{T as Xe}from"./Textarea-CyiKalKz.js";import{I as Ze}from"./Icon-CX7LjJqw.js";import{I as A}from"./InputWithDecorations-DxHZiXPT.js";import{M as _e}from"./MenuExtraContent-DaMT0-DR.js";import{a as et,I as Ce,b as tt,A as rt,S as oe}from"./Select-CjufT4IF.js";import{T as lt}from"./Text-DNuATYca.js";import{u as nt}from"./useContainerWidth-BdmVT1yY.js";import{S as at}from"./SvgCaretDownSmall-DvB31GCF.js";import{L as it}from"./List-D4ohcUzK.js";import{u as st}from"./useVirtualScroll-B8KRoJTT.js";import{L as ie}from"./ListItem-3WA1-2iC.js";import{S as ot}from"./SvgCheckmark-BaPVuard.js";const ye=e.forwardRef((l,o)=>{let{children:d,startIcon:i,status:t,className:s,iconProps:a,contentProps:u,...r}=l,c=i??(t&&He[t]()),y=i!==null&&!!c;return e.createElement(se,{className:Ee("iui-status-message",s),"data-iui-status":t,ref:o,...r},y?e.createElement(Ze,{"aria-hidden":!0,...a},c):null,e.createElement(se,u,d))}),ut=e.forwardRef((l,o)=>{let{label:d,disabled:i,required:t,status:s,message:a,icon:u,isLabelInline:r,children:c,className:y,style:M,statusMessage:b,inputId:I,labelId:x,...f}=l;return e.createElement(se,{className:Ee("iui-input-grid",y),"data-iui-status":s,"data-iui-label-placement":r?"inline":void 0,style:M,ref:o,...f},d&&e.createElement(ze,{as:I&&l.as!=="label"?"label":"div",required:t,disabled:i,htmlFor:I,id:x},d),c,b||a&&e.createElement(ye,{startIcon:u,status:s},a))}),ct=l=>e.createElement(We,l,e.createElement("path",{d:"M10.82 4.093A10.672 10.672 0 018 7.163a10.672 10.672 0 01-2.82-3.07zm-.665 3.828C11.528 9.105 13 10.774 13 12.491V14h1v2H2v-2h1v-1.509c0-1.717 1.472-3.386 2.845-4.57C4.476 6.674 3 4.933 3 3.224V2H2V0h12v2h-1v1.224c0 1.71-1.476 3.45-2.845 4.697zm-1.879.03c.88-.681 3.57-2.911 3.57-4.727V2.018H4.154v1.206c0 1.816 2.69 4.046 3.57 4.727-.88.635-3.57 2.725-3.57 4.54v.869l3.849-3.018 3.843 3.017v-.868c0-1.816-2.69-3.905-3.57-4.54z"})),xe=e.createContext(void 0),_=e.createContext(void 0),dt=e.forwardRef((l,o)=>{let{selectedItems:d=[],...i}=l;return e.createElement(et,{ref:o,tags:d,...i})}),ft=e.forwardRef((l,o)=>{let{selectTags:d,size:i,style:t,...s}=l,{isOpen:a,id:u,focusedIndex:r,setFocusedIndex:c,setSelectedIndexes:y,setPositionReference:M,enableVirtualization:b,multiple:I,onClickHandler:x,popover:f,show:D,hide:F,endIconProps:S,loading:Se,showClearButton:ue}=W(_),{inputRef:ce,menuRef:V,optionsExtraInfo:ee}=W(xe),te=Oe(ce,f.refs.setReference,o),R=X(r??-1),$=C=>{var L,w;return((w=(L=V.current)==null?void 0:L.querySelector(`[data-iui-index="${C}"]`))==null?void 0:w.id)??""},O=e.useCallback(C=>{var w,re,z,P,K,G,H,N,le,Y;let L=Object.keys(ee).length??0;if(!C.altKey)switch(C.key){case"ArrowDown":{if(C.preventDefault(),!a)return D();if(L===0)return;if(R.current===-1){let k=(w=V.current)==null?void 0:w.querySelector("[data-iui-index]");return c(Number((k==null?void 0:k.getAttribute("data-iui-index"))??0))}if(b&&!((z=(re=V.current)==null?void 0:re.querySelector(`[data-iui-index="${R.current}"]`))!=null&&z.nextElementSibling))return;let v=R.current;do{let k=(P=V.current)==null?void 0:P.querySelector(`[data-iui-index="${v}"]`),h=(k==null?void 0:k.nextElementSibling)??((K=V.current)==null?void 0:K.querySelector("[data-iui-index]"));if(v=Number(h==null?void 0:h.getAttribute("data-iui-index")),h)return c(v)}while(v!==R.current);break}case"ArrowUp":{if(C.preventDefault(),!a)return D();if(L===0||b&&!((H=(G=V.current)==null?void 0:G.querySelector(`[data-iui-index="${R.current}"]`))!=null&&H.previousElementSibling))return;if(R.current===-1)return c(((N=Object.values(ee))==null?void 0:N[L-1].__originalIndex)??-1);let v=R.current;do{let k=(le=V.current)==null?void 0:le.querySelector(`[data-iui-index="${v}"]`),h=(k==null?void 0:k.previousElementSibling)??((Y=V.current)==null?void 0:Y.querySelector("[data-iui-index]:last-of-type"));if(v=Number(h==null?void 0:h.getAttribute("data-iui-index")),h)return c(v)}while(v!==R.current);break}case"Enter":C.preventDefault(),a?R.current>-1&&(x==null||x(R.current)):D();break;case"Escape":C.preventDefault(),F();break;case"Tab":F();break}},[c,b,R,a,V,x,ee,D,F]),q=e.useRef(!1),de=e.useCallback(()=>{q.current=a},[a]),ve=e.useCallback(()=>{q.current?F():D(),q.current=!1},[F,D]),j=e.useCallback(()=>{y(I?[]:-1)},[I,y]),[fe,p]=nt();return e.createElement(e.Fragment,null,e.createElement(A,{ref:M},e.createElement(A.Input,{ref:te,"aria-expanded":a,"aria-activedescendant":a&&r!=null&&r>-1?$(r):void 0,role:"combobox","aria-controls":a?`${u}-list`:void 0,"aria-autocomplete":"list",spellCheck:!1,autoCapitalize:"none",autoCorrect:"off",style:{...I&&{paddingInlineStart:p+18},...t},size:i,...f.getReferenceProps({...s,onPointerDown:he(l.onPointerDown,de),onClick:he(l.onClick,ve),onKeyDown:he(l.onKeyDown,O)})}),Se?e.createElement(A.Icon,null,e.createElement(ct,null)):null,ue?e.createElement(A.Button,{onClick:j},e.createElement(je,null)):null,e.createElement(A.Icon,S,e.createElement(at,null))),I&&d?e.createElement(dt,{ref:fe,selectedItems:d}):null)}),mt=e.forwardRef((l,o)=>{let{className:d,status:i,message:t,children:s,...a}=l,{id:u}=W(_);return e.createElement(ut,{className:d,status:i,statusMessage:typeof t=="string"?e.createElement(ye,{status:i},t):e.isValidElement(t)&&e.cloneElement(t,{status:i}),ref:o,...a,id:u},e.createElement(Ce,null,s))});let pt=l=>{let{children:o,...d}=l,{filteredOptions:i,getMenuItem:t,focusedIndex:s}=W(_),{menuRef:a}=W(xe),u=e.useMemo(()=>{let b=0;for(let I=0;I<Math.min(5,i.length);I++)i[I].sublabel&&b++;return b>=Math.min(3,i.length)},[i]),r=e.useMemo(()=>{var I;let b=(I=a.current)==null?void 0:I.querySelector(`[data-iui-index="${s}"]`);return b?Number(b.getAttribute("data-iui-filtered-index")??s):s},[s,a]),{virtualizer:c,css:y}=st({count:i.length||1,getScrollElement:()=>a.current,estimateSize:()=>u?48:36,gap:-1});Ve(()=>{c.scrollToIndex(r)},[c,r]);let M=e.useCallback(b=>{let I=i.length>0?t(i[b.index],b.index):o;return e.cloneElement(I,{key:b.key,ref:c.measureElement,"data-iui-virtualizer":"item",style:{width:"100%",transform:`translateY(${b.start}px)`}})},[i,t,o,c.measureElement]);return e.createElement("div",{style:{display:"contents"}},e.createElement(Ge,{css:y},e.createElement(se,{as:"div","data-iui-virtualizer":"root",...d,style:{minBlockSize:c.getTotalSize(),...l.style}},e.createElement("slot",null))),e.createElement(e.Fragment,null,c.getVirtualItems().map(b=>M(b))))};const bt=e.forwardRef((l,o)=>{let{className:d,children:i,style:t,portal:s=!0,...a}=l,{id:u,enableVirtualization:r,popover:c}=W(_),{menuRef:y}=W(xe),M=Oe(c.refs.setFloating,o,y);return c.open&&e.createElement(Ke,{portal:s},e.createElement(it,{as:"div",className:Ee("iui-menu",d),id:`${u}-list`,role:"listbox",ref:M,...c.getFloatingProps({style:r?{maxInlineSize:0,...t}:t,...a})},r?e.createElement(pt,null,i):i))}),gt=e.memo(e.forwardRef((l,o)=>{let{children:d,isSelected:i,disabled:t,value:s,onClick:a,sublabel:u,size:r=u?"large":"default",startIcon:c,endIcon:y,role:M="option",index:b,...I}=l,{focusedIndex:x,enableVirtualization:f}=W(_),F=Oe(o,S=>{!f&&x===b&&(S==null||S.scrollIntoView({block:"nearest"}))});return e.createElement(ie,{as:"div",actionable:!0,size:r,active:i,disabled:t,focused:x===b,ref:F,onClick:()=>a==null?void 0:a(s),role:M,tabIndex:M==="presentation"?void 0:-1,"aria-selected":i,"aria-disabled":t,"data-iui-index":b,...I},c&&e.createElement(ie.Icon,{as:"span","aria-hidden":!0},c),e.createElement(ie.Content,null,d,u&&e.createElement(ie.Description,null,u)),y||i&&e.createElement(ie.Icon,{as:"span","aria-hidden":!0},y??e.createElement(ot,null)))}));let T=(l,o)=>o&&(Array.isArray(l)||l==null),It=(l,o)=>!o,Me=(l,o)=>l.id??`${o}-option-${l.label.replace(/\s/g,"-")}`;const Be=e.forwardRef((l,o)=>{var De;let d=Pe(),i=e.useCallback((n,m)=>n.filter(g=>g.label.toLowerCase().includes(m.toLowerCase())),[]),{options:t,value:s,onChange:a,filterFunction:u=i,inputProps:r,endIconProps:c,dropdownMenuProps:{middleware:y,...M}={},emptyStateMessage:b="No options found",itemRenderer:I,enableVirtualization:x=!1,multiple:f=!1,onShow:D,onHide:F,id:S=r!=null&&r.id?`iui-${r.id}-cb`:d,defaultValue:Se,clearFilterOnOptionToggle:ue=!0,loading:ce=!1,showClearButton:V=!1,...ee}=l,te=e.useRef(null),R=e.useRef(null),$=X(a),O=X(t),q=X(u),[de,ve]=e.useState(null),j=e.useMemo(()=>{let n={};return t.forEach((m,g)=>{n[Me(m,S)]={__originalIndex:g}}),n},[S,t]),fe=e.useCallback(n=>{if(n!==void 0){if(!T(n,f))return t.findIndex(m=>m.value===n);{let m=[];return n==null||n.forEach(g=>{let E=t.findIndex(B=>B.value===g);E>-1&&m.push(E)}),m}}},[f,t]),[p,C]=Ue(fe(Se)??(f?[]:-1),fe(s)),L=e.useRef(s);Ve(()=>{s!==L.current&&(L.current=s,s===void 0&&(T(p,f)?C([]):C(-1)))},[f,p,C,s]);let[w,re]=e.useState(!1),[z,P]=e.useState(-1),K=X(D),G=X(F),H=e.useCallback(()=>{var n;re(!0),(n=K.current)==null||n.call(K)},[K]),N=e.useCallback(()=>{var n;re(!1),(n=G.current)==null||n.call(G)},[G]);Ve(()=>{var n,m;w?((n=te.current)==null||n.focus(),T(p,f)||P(p??-1)):(P(-1),T(p,f)?v(""):v(p>=0?((m=O.current[p])==null?void 0:m.label)??"":""),h(!1))},[w,f,O,p]);let le=e.useRef(t);e.useEffect(()=>{t!==le.current&&(le.current=t,n());function n(){var m;T(p,f)?P(-1):P(p),!T(p,f)&&!w&&v(p>=0?(m=t[p])==null?void 0:m.label:"")}},[t,w,f,p]);let[Y,v]=e.useState(((De=r==null?void 0:r.value)==null?void 0:De.toString())??""),[k,h]=e.useState(!1),me=e.useMemo(()=>{var n;return k?(n=q.current)==null?void 0:n.call(q,t,Y):t},[q,Y,t,k]),[Ne,Te]=e.useState(""),Ae=e.useCallback(n=>{var g;let{value:m}=n.currentTarget;v(m),H(),h(!0),z!=-1&&P(-1),(g=r==null?void 0:r.onChange)==null||g.call(r,n)},[z,r,H]),ne=e.useCallback(n=>T(p,f)?p.includes(n):p===n,[f,p]),$e=e.useCallback((n,m)=>{if(T(p,f))return m==="added"?[...p,n]:p==null?void 0:p.filter(g=>g!==n)},[p,f]),ke=e.useCallback((n,m,g)=>{var E,B,Q,U;It($.current,f)?(B=$.current)==null||B.call($,(E=O.current[n])==null?void 0:E.value):m&&g&&((U=$.current)==null||U.call($,g==null?void 0:g.map(we=>{var be;return(be=O.current[we])==null?void 0:be.value}),{value:(Q=O.current[n])==null?void 0:Q.value,type:m}))},[f,$,O]),J=e.useCallback(n=>{var m,g;if((m=te.current)==null||m.focus({preventScroll:!0}),!((g=O.current[n])!=null&&g.disabled))if(f){let E=ne(n)?"removed":"added",B=$e(n,E);if(B==null)return;C(B),ke(n,E,B),Te(B.map(Q=>{var U;return(U=O.current[Q])==null?void 0:U.label}).filter(Boolean).join(", ")),ue&&(v(""),h(!1))}else C(n),N(),ke(n)},[O,f,ne,$e,C,ke,ue,N]),Re=e.useCallback((n,m)=>{let g=Me(n,S),{__originalIndex:E}=j[g],{icon:B,startIcon:Q,label:U,...we}=n,be=Q??B,ge=I?I(n,{isFocused:z===E,isSelected:ne(E),index:E,id:g}):null;return ge?e.cloneElement(ge,{onClick:ae=>{var Fe,Le;J(E),(Le=(Fe=ge.props).onClick)==null||Le.call(Fe,ae)},focused:z===E,"data-iui-index":E,"data-iui-filtered-index":m,ref:Ye(ge.props.ref,ae=>{!x&&z===E&&(ae==null||ae.scrollIntoView({block:"nearest"}))})}):e.createElement(gt,{key:g,id:g,startIcon:be,...we,isSelected:ne(E),onClick:()=>{J(E)},index:E,"data-iui-filtered-index":m},U)},[x,z,S,ne,I,J,j]),qe=e.useMemo(()=>e.createElement(e.Fragment,null,e.isValidElement(b)?b:e.createElement(_e,null,e.createElement(lt,{isMuted:!0},b))),[b]),pe=Je({visible:w,onVisibleChange:n=>n?H():N(),matchWidth:!0,middleware:{size:{maxHeight:"var(--iui-menu-max-height)"},...y},closeOnOutsideClick:!0,interactions:{click:!1,focus:!0}});return e.useEffect(()=>pe.refs.setPositionReference(de),[pe.refs,de]),e.createElement(xe.Provider,{value:e.useMemo(()=>({inputRef:te,menuRef:R,optionsExtraInfo:j}),[j])},e.createElement(_.Provider,{value:e.useMemo(()=>({id:S,isOpen:w,focusedIndex:z,setFocusedIndex:P,setSelectedIndexes:C,setPositionReference:ve,onClickHandler:J,enableVirtualization:x,filteredOptions:me,getMenuItem:Re,multiple:f,popover:pe,show:H,hide:N,endIconProps:c,loading:ce,showClearButton:V}),[x,c,me,z,Re,J,N,S,w,ce,f,pe,C,H,V])},e.createElement(mt,{ref:o,disabled:r==null?void 0:r.disabled,...ee},e.createElement(ft,{value:Y,disabled:r==null?void 0:r.disabled,...r,onChange:Ae,"aria-describedby":[f?`${S}-selected-live`:void 0,r==null?void 0:r["aria-describedby"]].filter(Boolean).join(" "),selectTags:T(p,f)?p==null?void 0:p.map(n=>{let m=t[n],g=Me(m,S),{__originalIndex:E}=j[g];return e.createElement(tt,{key:m.label,label:m.label,onRemove:()=>{J(E),N()}})}).filter(Boolean):void 0})),f?e.createElement(rt,{text:Ne,id:`${S}-selected-live`}):null,e.createElement(bt,{as:"div",...M},me.length>0&&!x?me.map(Re):qe)))}),Lt=e.forwardRef((l,o)=>{let{children:d,className:i,labelPlacement:t,...s}=l,a=Et(d);return e.createElement(se,{className:Ee("iui-input-grid",i),"data-iui-label-placement":t,ref:o,...s},a)});let Et=l=>{let{labelId:o,inputId:d,messageId:i}=Ct(l);return e.useMemo(()=>e.Children.map(l,t=>e.isValidElement(t)?t.type===ze||t.type==="label"?Z(t,s=>({...s.props,htmlFor:s.props.htmlFor||d,id:s.props.id||o})):t.type===ye?Z(t,s=>({...s.props,id:s.props.id||i})):Ie(t)||t.type===A||t.type===Ce?yt(t,{labelId:o,inputId:d,messageId:i}):t:t),[l,d,o,i])},Ct=l=>{let o=Pe(),d,i,t,s=!1,a=!1,u=r=>{var c;if(e.isValidElement(r)){if(r.type===Be)return((c=r.props.inputProps)==null?void 0:c.id)||`${o}--input`;if(r.type!==oe)return r.props.id||`${o}--input`}};return e.Children.forEach(l,r=>{e.isValidElement(r)&&((r.type===ze||r.type==="label")&&(s=!0,d||(d=r.props.id||`${o}--label`)),r.type===ye&&(t||(t=r.props.id||`${o}--message`)),r.type===A||r.type===Ce?e.Children.forEach(r.props.children,c=>{Ie(c)&&(i||(i=u(c)))}):Ie(r)&&(i||(i=u(r))),r.type===oe&&(a=!0))}),{labelId:a?d:void 0,inputId:s&&!a?i:void 0,messageId:t}},yt=(l,{labelId:o,inputId:d,messageId:i})=>{let t=(a={})=>{let u=[a["aria-describedby"],i].filter(Boolean).join(" ");return{...a,...l.type!==oe&&{id:a.id||d},"aria-describedby":(u==null?void 0:u.trim())||void 0}},s=a=>a.type===Be?Z(a,u=>({inputProps:t(u.props.inputProps)})):a.type===oe?Z(a,u=>({triggerProps:{"aria-labelledby":o,...t(u.props.triggerProps)}})):Z(a,u=>t(u.props));return l.type===A||l.type===Ce?Z(l,a=>({children:e.Children.map(a.props.children,u=>e.isValidElement(u)&&Ie(u)?s(u):u)})):s(l)},Ie=l=>e.isValidElement(l)&&(l.type==="input"||l.type==="textarea"||l.type==="select"||l.type===Qe||l.type===Xe||l.type===A.Input||l.type===oe||l.type===Be);export{Be as C,Lt as I,ye as S};
