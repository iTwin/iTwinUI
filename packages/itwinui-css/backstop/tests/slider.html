<!--
  Copyright (c) Bentley Systems, Incorporated. All rights reserved.
  See LICENSE.md in the project root for license terms and full copyright notice.
-->

<!DOCTYPE html>
<html
  lang="en-US"
  id="theme"
>
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1"
    >
    <title>Slider | iTwinUI</title>

    <script type="module">
      import "./assets/theme.js";
      import "@itwin/itwinui-icons-elements/sound-mute";
      import "@itwin/itwinui-icons-elements/sound-loud";
    </script>
    <style>
      @import url("./assets/demo.css") layer(demo);
      @import url('@itwin/itwinui-variables') layer(variables);
      @import url("@itwin/itwinui-css/css/all.css") layer(itwinui);
      section[id^='demo'] {
        width: auto;
      }

      /* Gives left & right labels an equal width so the slider is centered. */
      .iui-slider-min,
      .iui-slider-max {width: 25px;}

      .iui-tooltip {
        display: none;
      }

      .iui-slider-container .iui-slider-thumb:focus + .iui-tooltip,
      .iui-slider-container .iui-slider-thumb:hover + .iui-tooltip,
      .iui-slider-container .iui-slider-thumb.iui-active + .iui-tooltip {
        position: absolute;
        display: block;
        margin-top: -32px;
        transform: translateX(-50%);
      }

      #demo-default-vertical,
      #demo-range-vertical {
        display: flex;
        gap: 2rem;
      }
    </style>


  </head>

  <body class="iui-root">
    <theme-button></theme-button>
    <h1>Slider</h1>
    <hr />
    <br>

    <h2>Default</h2>
    <section id="demo-default">
      <div class="iui-input-container">
        <div class="iui-label">Volume</div>

        <div class="iui-slider-component-container iui-slider-horizontal iui-input-group">
          <span class="iui-slider-min">
            <svg-sound-mute
              class="iui-icon"
              aria-hidden="true"
            ></svg-sound-mute>
          </span>
          <div class="iui-slider-container iui-progress-slider">
            <div class="iui-slider-rail"></div>
            <div
              class="iui-slider-track"
              style="right: 50%;"
            ></div>
            <div
              style="left: 50%;"
              class="iui-slider-thumb"
              role="slider"
              tabindex="0"
              aria-label="Volume Setting"
              aria-valuemin="0"
              aria-valuenow="50"
              aria-valuemax="100"
              id="test-slider-1"
            ></div>
            <output
              class="iui-tooltip"
              style="left: 50%;"
            >
              50
            </output>
          </div>
          <span class="iui-slider-max">
            <svg-sound-loud
              class="iui-icon"
              aria-hidden="true"
            ></svg-sound-loud>
          </span>
        </div>

      </div>

      <br /><br />

      <div class="iui-input-container">
        <div class="iui-label">Slider with ticks</div>

        <div class="iui-slider-component-container iui-slider-horizontal iui-input-group">
          <span class="iui-slider-min">0</span>
          <div class="iui-slider-container iui-progress-slider">
            <div class="iui-slider-rail"></div>
            <div
              class="iui-slider-track"
              style="right: 50%;"
            ></div>
            <div
              style="left: 50%;"
              class="iui-slider-thumb"
              role="slider"
              tabindex="0"
              aria-label="Percent Complete"
              aria-valuemin="0"
              aria-valuenow="50"
              aria-valuemax="100"
              id="test-slider-2"
            ></div>
            <output
              class="iui-tooltip"
              style="left: 50%;"
            >
              50
            </output>
            <div class="iui-slider-ticks">
              <!-- You could generate the ticks based on your min, max & step values. -->
              <span class="iui-slider-tick">0</span>
              <span class="iui-slider-tick">10</span>
              <span class="iui-slider-tick">20</span>
              <span class="iui-slider-tick">30</span>
              <span class="iui-slider-tick">40</span>
              <span class="iui-slider-tick">50</span>
              <span class="iui-slider-tick">60</span>
              <span class="iui-slider-tick">70</span>
              <span class="iui-slider-tick">80</span>
              <span class="iui-slider-tick">90</span>
              <span class="iui-slider-tick">100</span>
            </div>
          </div>
          <span class="iui-slider-max">100</span>
        </div>

      </div>

      <br /><br />

      <div class="iui-input-container iui-disabled">
        <div class="iui-label">Disabled slider</div>

        <div class="iui-slider-component-container iui-slider-horizontal iui-input-group iui-disabled">
          <span class="iui-slider-min">0</span>
          <div class="iui-slider-container iui-progress-slider">
            <div class="iui-slider-rail"></div>
            <div
              class="iui-slider-track"
              style="right: 50%;"
            ></div>
            <div
              style="left: 50%;"
              class="iui-slider-thumb"
              role="slider"
              aria-label="Percent Complete"
              aria-valuemin="0"
              aria-valuenow="50"
              aria-valuemax="100"
              id="test-slider-2"
            ></div>
            <output
              class="iui-tooltip"
              style="left: 50%;"
            >
              50
            </output>
            <div class="iui-slider-ticks">
              <!-- You could generate the ticks based on your min, max & step values. -->
              <span class="iui-slider-tick">0</span>
              <span class="iui-slider-tick">10</span>
              <span class="iui-slider-tick">20</span>
              <span class="iui-slider-tick">30</span>
              <span class="iui-slider-tick">40</span>
              <span class="iui-slider-tick">50</span>
              <span class="iui-slider-tick">60</span>
              <span class="iui-slider-tick">70</span>
              <span class="iui-slider-tick">80</span>
              <span class="iui-slider-tick">90</span>
              <span class="iui-slider-tick">100</span>
            </div>
          </div>
          <span class="iui-slider-max">100</span>
        </div>

      </div>
    </section>

    <br />

    <h2>Ranges</h2>
    <section id="demo-range">
      <div class="iui-input-container">
        <div class="iui-label">Price range</div>

        <div class="iui-slider-component-container iui-slider-horizontal iui-input-group">
          <span class="iui-slider-min">0</span>
          <div class="
              iui-slider-container iui-range-slider">
            <div class="iui-slider-rail"></div>
            <div
              class="iui-slider-track"
              style="left: 20%; right: 20%;"
            ></div>
            <div
              style="left: 20%;"
              class="iui-slider-thumb"
              role="slider"
              tabindex="0"
              aria-label="Start Value"
              aria-valuemin="0"
              aria-valuenow="20"
              aria-valuemax="79"
              data-range-max="100"
            ></div>
            <output
              class="iui-tooltip"
              style="left: 20%;"
            >
              20
            </output>
            <div
              style="left: 80%;"
              class="iui-slider-thumb"
              role="slider"
              tabindex="0"
              aria-label="End Value"
              aria-valuemin="21"
              aria-valuenow="80"
              aria-valuemax="100"
              data-range-min="0"
            ></div>
            <output
              class="iui-tooltip"
              style="left: 80%;"
            >
              80
            </output>
          </div>
          <span class="iui-slider-max">100</span>
        </div>

      </div>

      <br /><br />

      <div class="iui-input-container">
        <div class="iui-label">Range with ticks</div>

        <div class="iui-slider-component-container iui-slider-horizontal iui-input-group">
          <span class="iui-slider-min">0</span>
          <div class="
            iui-slider-container iui-range-slider">
            <div class="iui-slider-rail"></div>
            <div
              class="iui-slider-track"
              style="left: 20%; right: 20%;"
            ></div>
            <div
              style="left: 20%;"
              class="iui-slider-thumb"
              role="slider"
              tabindex="0"
              aria-label="Start Value"
              aria-valuemin="0"
              aria-valuenow="20"
              aria-valuemax="79"
              data-range-max="100"
            ></div>
            <output
              class="iui-tooltip"
              style="left: 20%;"
            >
              20
            </output>
            <div
              style="left: 80%;"
              class="iui-slider-thumb"
              role="slider"
              tabindex="0"
              aria-label="End Value"
              aria-valuemin="21"
              aria-valuenow="80"
              aria-valuemax="100"
              data-range-min="0"
            ></div>
            <output
              class="iui-tooltip"
              style="left: 80%;"
            >
              80
            </output>
            <div class="iui-slider-ticks">
              <!-- You could generate the ticks based on your min, max & step values. -->
              <span class="iui-slider-tick">0</span>
              <span class="iui-slider-tick">10</span>
              <span class="iui-slider-tick">20</span>
              <span class="iui-slider-tick">30</span>
              <span class="iui-slider-tick">40</span>
              <span class="iui-slider-tick">50</span>
              <span class="iui-slider-tick">60</span>
              <span class="iui-slider-tick">70</span>
              <span class="iui-slider-tick">80</span>
              <span class="iui-slider-tick">90</span>
              <span class="iui-slider-tick">100</span>
            </div>
          </div>
          <span class="iui-slider-max">100</span>
        </div>

      </div>

      <br /><br />

      <div class="iui-input-container iui-disabled">
        <div class="iui-label">Disabled range</div>

        <div class="iui-slider-component-container iui-slider-horizontal iui-input-group iui-disabled">
          <span class="iui-slider-min">0</span>
          <div class="
            iui-slider-container iui-range-slider">
            <div class="iui-slider-rail"></div>
            <div
              class="iui-slider-track"
              style="left: 20%; right: 20%;"
            ></div>
            <div
              style="left: 20%;"
              class="iui-slider-thumb"
              role="slider"
              aria-label="Start Value"
              aria-valuemin="0"
              aria-valuenow="20"
              aria-valuemax="79"
              data-range-max="100"
            ></div>
            <output
              class="iui-tooltip"
              style="left: 20%;"
            >
              20
            </output>
            <div
              style="left: 80%;"
              class="iui-slider-thumb"
              role="slider"
              aria-label="End Value"
              aria-valuemin="21"
              aria-valuenow="80"
              aria-valuemax="100"
              data-range-min="0"
            ></div>
            <output
              class="iui-tooltip"
              style="left: 80%;"
            >
              80
            </output>
            <div class="iui-slider-ticks">
              <!-- You could generate the ticks based on your min, max & step values. -->
              <span class="iui-slider-tick">0</span>
              <span class="iui-slider-tick">10</span>
              <span class="iui-slider-tick">20</span>
              <span class="iui-slider-tick">30</span>
              <span class="iui-slider-tick">40</span>
              <span class="iui-slider-tick">50</span>
              <span class="iui-slider-tick">60</span>
              <span class="iui-slider-tick">70</span>
              <span class="iui-slider-tick">80</span>
              <span class="iui-slider-tick">90</span>
              <span class="iui-slider-tick">100</span>
            </div>
          </div>
          <span class="iui-slider-max">100</span>
        </div>

      </div>
    </section>

    <br />

    <h2>Default vertical</h2>
    <section id="demo-default-vertical">
      <div class="iui-input-container">
        <div class="iui-label">Volume</div>

        <div
          class="iui-slider-component-container iui-slider-vertical iui-input-group"
          style="height: 500px;"
        >
          <span class="iui-slider-min">
            <svg-sound-mute
              class="iui-icon"
              aria-hidden="true"
            ></svg-sound-mute>
          </span>
          <div class="iui-slider-container iui-progress-slider">
            <div class="iui-slider-rail"></div>
            <div class="iui-slider-track"></div>
            <div
              style="bottom: 50%;"
              class="iui-slider-thumb"
              role="slider"
              tabindex="0"
              aria-label="Volume Setting"
              aria-valuemin="0"
              aria-valuenow="50"
              aria-valuemax="100"
              id="test-slider-1"
            ></div>
            <output
              class="iui-tooltip"
              style="bottom: 50%;"
            >
              50
            </output>
          </div>
          <span class="iui-slider-max">
            <svg-sound-loud
              class="iui-icon"
              aria-hidden="true"
            ></svg-sound-loud>
          </span>
        </div>

      </div>

      <br /><br />

      <div class="iui-input-container">
        <div class="iui-label">Slider with ticks</div>

        <div
          class="iui-slider-component-container iui-slider-vertical iui-input-group"
          style="height: 500px;"
        >
          <span class="iui-slider-min">0</span>
          <div class="iui-slider-container iui-progress-slider">
            <div class="iui-slider-rail"></div>
            <div class="iui-slider-track">
            </div>
            <div
              class="iui-slider-thumb"
              role="slider"
              tabindex="0"
              aria-label="Percent Complete"
              aria-valuemin="0"
              aria-valuenow="50"
              aria-valuemax="100"
              id="test-slider-2"
            >
            </div>
            <output class="iui-tooltip">
              50
            </output>
            <div class="iui-slider-ticks">
              <!-- You could generate the ticks based on your min, max & step values. -->
              <span class="iui-slider-tick">0</span>
              <span class="iui-slider-tick">10</span>
              <span class="iui-slider-tick">20</span>
              <span class="iui-slider-tick">30</span>
              <span class="iui-slider-tick">40</span>
              <span class="iui-slider-tick">50</span>
              <span class="iui-slider-tick">60</span>
              <span class="iui-slider-tick">70</span>
              <span class="iui-slider-tick">80</span>
              <span class="iui-slider-tick">90</span>
              <span class="iui-slider-tick">100</span>
            </div>
          </div>
          <span class="iui-slider-max">100</span>
        </div>

      </div>

      <div class="iui-input-container iui-disabled">
        <div class="iui-label">Disabled slider</div>

        <div
          class="iui-slider-component-container iui-slider-vertical iui-input-group iui-disabled"
          style="height: 500px;"
        >
          <span class="iui-slider-min">0</span>
          <div class="iui-slider-container iui-progress-slider">
            <div class="iui-slider-rail"></div>
            <div class="iui-slider-track">
            </div>
            <div
              class="iui-slider-thumb"
              role="slider"
              aria-label="Percent Complete"
              aria-valuemin="0"
              aria-valuenow="50"
              aria-valuemax="100"
              id="test-slider-2"
            >
            </div>
            <output class="iui-tooltip">
              50
            </output>


            <div class="iui-slider-ticks">
              <!-- You could generate the ticks based on your min, max & step values. -->
              <span class="iui-slider-tick">0</span>
              <span class="iui-slider-tick">10</span>
              <span class="iui-slider-tick">20</span>
              <span class="iui-slider-tick">30</span>
              <span class="iui-slider-tick">40</span>
              <span class="iui-slider-tick">50</span>
              <span class="iui-slider-tick">60</span>
              <span class="iui-slider-tick">70</span>
              <span class="iui-slider-tick">80</span>
              <span class="iui-slider-tick">90</span>
              <span class="iui-slider-tick">100</span>
            </div>
          </div>
          <span class="iui-slider-max">100</span>
        </div>
      </div>
    </section>

    <br />

    <h2>Ranges Vertical</h2>
    <section id="demo-range-vertical">
      <div class="iui-input-container ">
        <div class="iui-label">Price range</div>

        <div
          class="iui-slider-component-container iui-slider-vertical iui-input-group"
          style="height: 500px;"
        >
          <span class="iui-slider-min">0</span>
          <div class="
              iui-slider-container iui-range-slider">
            <div class="iui-slider-rail"></div>
            <div class="iui-slider-track">
            </div>
            <div
              class="iui-slider-thumb"
              role="slider"
              tabindex="0"
              aria-label="Start Value"
              aria-valuemin="0"
              aria-valuenow="20"
              aria-valuemax="79"
              data-range-max="100"
            >
            </div>
            <output class="iui-tooltip">
              20
            </output>
            <div
              class="iui-slider-thumb"
              role="slider"
              tabindex="0"
              aria-label="End Value"
              aria-valuemin="21"
              aria-valuenow="80"
              aria-valuemax="100"
              data-range-min="0"
            >
            </div>
            <output class="iui-tooltip">
              80
            </output>
          </div>
          <span class="iui-slider-max">100</span>
        </div>

      </div>

      <div class="iui-input-container">
        <div class="iui-label">Range with ticks</div>

        <div
          class="iui-slider-component-container iui-slider-vertical iui-input-group"
          style="height: 500px;"
        >
          <span class="iui-slider-min">0</span>
          <div class="
            iui-slider-container iui-range-slider">
            <div class="iui-slider-rail"></div>
            <div class="iui-slider-track">
            </div>
            <div
              class="iui-slider-thumb"
              role="slider"
              tabindex="0"
              aria-label="Start Value"
              aria-valuemin="0"
              aria-valuenow="20"
              aria-valuemax="79"
              data-range-max="100"
            >
            </div>
            <output class="iui-tooltip">
              20
            </output>
            <div
              class="iui-slider-thumb"
              role="slider"
              tabindex="0"
              aria-label="End Value"
              aria-valuemin="21"
              aria-valuenow="80"
              aria-valuemax="100"
              data-range-min="0"
            >
            </div>
            <output class="iui-tooltip">
              80
            </output>

            <div class="iui-slider-ticks">
              <!-- You could generate the ticks based on your min, max & step values. -->
              <span class="iui-slider-tick">0</span>
              <span class="iui-slider-tick">10</span>
              <span class="iui-slider-tick">20</span>
              <span class="iui-slider-tick">30</span>
              <span class="iui-slider-tick">40</span>
              <span class="iui-slider-tick">50</span>
              <span class="iui-slider-tick">60</span>
              <span class="iui-slider-tick">70</span>
              <span class="iui-slider-tick">80</span>
              <span class="iui-slider-tick">90</span>
              <span class="iui-slider-tick">100</span>
            </div>
          </div>
          <span class="iui-slider-max">100</span>
        </div>

      </div>

      <div class="iui-input-container iui-disabled">
        <div class="iui-label">Disabled range</div>

        <div
          class="iui-slider-component-container iui-slider-vertical iui-input-group iui-disabled"
          style="height: 500px;"
        >
          <span class="iui-slider-min">0</span>
          <div class="
            iui-slider-container iui-range-slider">
            <div class="iui-slider-rail"></div>
            <div class="iui-slider-track">
            </div>
            <div
              class="iui-slider-thumb"
              role="slider"
              aria-label="Start Value"
              aria-valuemin="0"
              aria-valuenow="20"
              aria-valuemax="79"
              data-range-max="100"
            >
            </div>
            <output class="iui-tooltip">
              20
            </output>
            <div
              class="iui-slider-thumb"
              role="slider"
              aria-label="End Value"
              aria-valuemin="21"
              aria-valuenow="80"
              aria-valuemax="100"
              data-range-min="0"
            >
            </div>
            <output class="iui-tooltip">
              80
            </output>

            <div class="iui-slider-ticks">
              <!-- You could generate the ticks based on your min, max & step values. -->
              <span class="iui-slider-tick">0</span>
              <span class="iui-slider-tick">10</span>
              <span class="iui-slider-tick">20</span>
              <span class="iui-slider-tick">30</span>
              <span class="iui-slider-tick">40</span>
              <span class="iui-slider-tick">50</span>
              <span class="iui-slider-tick">60</span>
              <span class="iui-slider-tick">70</span>
              <span class="iui-slider-tick">80</span>
              <span class="iui-slider-tick">90</span>
              <span class="iui-slider-tick">100</span>
            </div>
          </div>
          <span class="iui-slider-max">100</span>
        </div>

      </div>
    </section>

    <script>

      function setTooltip(percent, tooltip, sliderContainer) {
        if (getIsVerticalSlider(sliderContainer)) {
          if (tooltip) {
            tooltip.style.bottom = `${percent}%`;
            tooltip.innerHTML = `${percent}`;
          }
        } else {
          if (tooltip) {
            tooltip.style.left = `${percent}%`;
            tooltip.innerHTML = `${percent}`;
          }
        }
      }

      function setThumbAndTrack(percent, thumb, otherThumb, progress, sliderContainer, mode) {
        if (getIsVerticalSlider(sliderContainer)) {
          if (mode === "progress") {
            thumb.style.bottom = `${percent}%`;
            var progressPercent = 100 - percent;
            progress.style.top = `${progressPercent}%`;
            console.log(`${percent}%`);
          }
          else if (mode === "range-left") {
            otherThumb && otherThumb.setAttribute("aria-valuemin", percent + 1);
            thumb.style.bottom = `${percent}%`;
            progress.style.bottom = `${percent}%`;
            console.log(`${percent}% - ${otherThumb.getAttribute("aria-valuenow")}%`);
          } else if (mode === "range-right") {
            otherThumb && otherThumb.setAttribute("aria-valuemax", percent - 1);
            thumb.style.bottom = `${percent}%`;
            var progressPercent = 100 - percent;
            progress.style.top = `${progressPercent}%`;
            console.log(`${otherThumb.getAttribute("aria-valuenow")}% - ${percent}%`);
          }
        } else {
          if (mode === "progress") {
            thumb.style.left = `${percent}%`;
            var progressPercent = 100 - percent;
            progress.style.right = `${progressPercent}%`;
          } else if (mode === "range-left") {
            otherThumb && otherThumb.setAttribute("aria-valuemin", percent + 1);
            thumb.style.left = `${percent}%`;
            progress.style.left = `${percent}%`;
          } else if (mode === "range-right") {
            otherThumb && otherThumb.setAttribute("aria-valuemax", percent - 1);
            thumb.style.left = `${percent}%`;
            var progressPercent = 100 - percent;
            progress.style.right = `${progressPercent}%`;
          }
        }
      }

      function getMinValueFromThumb(thumb) {
        const minAtt = thumb.getAttribute("aria-valuemin");
        const dataRangeMinAtt = thumb.getAttribute("data-range-min");
        const min = parseInt(null !== dataRangeMinAtt ? dataRangeMinAtt : minAtt);
        return min;
      }

      function getMaxValueFromThumb(thumb) {
        const maxAtt = thumb.getAttribute("aria-valuemax");
        const dataRangeMaxAtt = thumb.getAttribute("data-range-max");
        const max = parseInt(null !== dataRangeMaxAtt ? dataRangeMaxAtt : maxAtt);
        return max;
      }

      function getMaxLimitValueFromThumb(thumb) {
        var maxAtt = thumb.getAttribute("aria-valuemax");
        var max = parseInt(maxAtt);
        return max;
      }

      function getMinLimitValueFromThumb(thumb) {
        var minAtt = thumb.getAttribute("aria-valuemin");
        var min = parseInt(minAtt);
        return min;
      }

      function getPercentFromThumb(thumb) {
        var valueAtt = thumb.getAttribute("aria-valuenow");
        var value = parseInt(valueAtt);
        var min = getMinValueFromThumb(thumb);
        var max = getMaxValueFromThumb(thumb);
        var percent = ((value - min) / (max - min)) * 100;
        return percent;
      }

      function moveSlider(event, thumb, track, progress, mode, toolTip, otherThumb, sliderContainer) {
        var min = getMinValueFromThumb(thumb);
        var limitMin = getMinLimitValueFromThumb(thumb);
        var max = getMaxValueFromThumb(thumb);
        var limitMax = getMaxLimitValueFromThumb(thumb);
        var rect = track.getBoundingClientRect();
        var diff;
        var trackLength;
        if (getIsVerticalSlider(sliderContainer)) {
          trackLength = rect.height;
          diff = - (event.pageY - (rect.bottom + window.scrollY));
          if (diff > rect.height)
            diff = rect.height;
          if (diff < 0)
            diff = 0;
        } else {
          trackLength = rect.width;
          diff = event.pageX - rect.left;
          if (diff > rect.width)
            diff = rect.width;
          if (diff < 0)
            diff = 0;
        }

        var percent = parseInt(((max - min) * diff) / trackLength);
        if (percent < limitMin)
          percent = limitMin;
        if (percent > limitMax)
          percent = limitMax;

        thumb.setAttribute("aria-valuenow", percent);
        setTooltip(percent, toolTip, sliderContainer);
        setThumbAndTrack(percent, thumb, otherThumb, progress, sliderContainer, mode);

        event.preventDefault();
        event.stopPropagation();
      }

      function getOtherRangeThumb(thumb) {
        var parent = thumb.parentNode;
        const allThumbs = parent.querySelectorAll(".iui-slider-thumb");
        for (var i = 0; i < allThumbs.length; i++) {
          if (allThumbs[i] !== thumb)
            return allThumbs[i];
        }
      }

      function getToolTip(thumb, mode) {
        const parent = thumb.parentNode;
        const tooltips = parent.querySelectorAll(".iui-tooltip");
        if (mode === "range-left")
          return tooltips[0];
        else if (mode === "range-right")
          return tooltips[1];

        return tooltips[0];
      }

      function getIsVerticalSlider(sliderContainer) {
        return sliderContainer.parentNode.classList.contains("iui-slider-vertical");
      }

      function initializeThumbProcessing(thumb, sliderContainer, mode) {
        const percent = getPercentFromThumb(thumb);
        let progress = sliderContainer.querySelector(".iui-slider-track");
        let otherThumb = getOtherRangeThumb(thumb);
        const toolTip = getToolTip(thumb, mode);

        setTooltip(percent, toolTip, sliderContainer);
        setThumbAndTrack(percent, thumb, otherThumb, progress, sliderContainer, mode);

        thumb.addEventListener("mousedown", function () {
          if (sliderContainer.parentElement.classList.contains('iui-disabled'))
            return;
          thumb.classList.add("iui-active");
          sliderContainer.classList.add("iui-grabbing");
          var ownerDoc = thumb.ownerDocument;
          var track = sliderContainer.querySelector(".iui-slider-rail");
          var handleMouseMove = function (event) {
            moveSlider(event, thumb, track, progress, mode, toolTip, otherThumb, sliderContainer);
          };

          var handleMouseUp = function (event) {
            ownerDoc.removeEventListener('mousemove', handleMouseMove);
            ownerDoc.removeEventListener('mouseup', handleMouseUp);
            thumb.classList.remove("iui-active");
            sliderContainer.classList.remove("iui-grabbing");
          };

          // bind a mousemove event handler to move pointer
          ownerDoc.addEventListener('mousemove', handleMouseMove);

          // bind a mouseup event handler to stop tracking mouse movements
          ownerDoc.addEventListener('mouseup', handleMouseUp);

          event.preventDefault();
          event.stopPropagation();
        });
      }

      function initializeAllProgressSliders() {
        const allProgressSliderContainers = document.querySelectorAll(".iui-slider-container.iui-progress-slider");
        allProgressSliderContainers.forEach(progressSliderContainer => {
          const thumb = progressSliderContainer.querySelector(".iui-slider-thumb");
          initializeThumbProcessing(thumb, progressSliderContainer, "progress");
        });
      }

      function initializeAllRangeSliders() {
        const allRangeSliderContainers = document.querySelectorAll(".iui-slider-container.iui-range-slider");
        allRangeSliderContainers.forEach(rangeSliderContainer => {
          const thumbs = rangeSliderContainer.querySelectorAll(".iui-slider-thumb");

          const leftThumb = thumbs[0];
          if (leftThumb) {
            initializeThumbProcessing(leftThumb, rangeSliderContainer, "range-left");
          }

          const rightThumb = thumbs[1];
          if (rightThumb) {
            initializeThumbProcessing(rightThumb, rangeSliderContainer, "range-right");
          }
        });
      }

      initializeAllProgressSliders();
      initializeAllRangeSliders();
    </script>
  </body>
</html>
