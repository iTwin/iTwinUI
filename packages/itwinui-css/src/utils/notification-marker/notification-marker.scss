// Copyright (c) Bentley Systems, Incorporated. All rights reserved.
// See LICENSE.md in the project root for license terms and full copyright notice.

$iui-notification-marker-border-width: var(--iui-size-3xs);
$iui-notification-before-size: calc(var(--iui-size-xs) + $iui-notification-marker-border-width * 2);
// $iui-notification-before-size: calc(var(--iui-size-xs));
// $iui-notification-before-size: 12px;

@mixin iui-notification-marker($status: primary) {
  position: relative;

  &::before {
    content: '';
    position: absolute;
    // width: $iui-notification-before-size;
    // height: $iui-notification-before-size;
    width: calc($iui-notification-before-size - 2 * $iui-notification-marker-border-width);
    height: calc($iui-notification-before-size - 2 * $iui-notification-marker-border-width);
    // width: calc(var(--iui-size-xs) + $iui-notification-marker-border-width * 2);
    // height: calc(var(--iui-size-xs) + $iui-notification-marker-border-width * 2);
    // width: 20px;
    // height: 20px;
    top: calc($iui-notification-before-size * 0.5 + var(--iui-size-s) * -0.5);
    right: calc($iui-notification-before-size * 0.5 + var(--iui-size-s) * -0.5);
    // right: 0;
    transform: translate(50%, -50%);
    // top: -10px;
    // right: -10px;

    border-radius: 100%;
    background-color: var(--iui-color-foreground-#{$status});
    // background-color: transparent;
    // border: $iui-notification-marker-border-width solid var(--iui-color-background-1);
    // border: $iui-notification-marker-border-width solid transparent;
    // padding: $iui-notification-marker-border-width;
    // box-sizing: content-box;
    @media (prefers-reduced-motion: no-preference) {
      transition: background-color var(--iui-duration-1) ease-out, border-color var(--iui-duration-1) ease-out;
    }
  }

  > * {
    /* width: var(--iui-size-s); */
    // width: 300px;
    // height: 300px;
    // mask-image: url('mask_3.svg');
    // mask-size: 100% 100%;

    // top: calc(var(--iui-size-s) * -0.5);
    // right: calc(var(--iui-size-s) * -0.5);
    // ellipse 1px 1px at calc(100% + var(--iui-size-s) * -0.5) calc(-1 * var(--iui-size-s) * -0.5),
    // ellipse 1px 1px at 98% 2%,
    // ellipse calc(10px + $iui-notification-marker-border-width) calc(10px + $iui-notification-marker-border-width) at calc(100% - 10px - var(--iui-size-s) * -0.5) calc(10px + var(--iui-size-s) * -0.5),
    // ellipse calc($iui-notification-before-size * 0.5) calc($iui-notification-before-size * 0.5) at
    mask: radial-gradient(
      ellipse 6px 6px at calc(100% - 6px - var(--iui-size-s) * -0.5) calc(6px + var(--iui-size-s) * -0.5),
      transparent 95%,
      #000 100%
    );
  }

  &.iui-urgent::before {
    @media (prefers-reduced-motion: no-preference) {
      animation: pulse-#{$status} 2s infinite;
    }
  }

  @media (prefers-reduced-motion: no-preference) {
    @keyframes pulse-#{$status} {
      0% {
        box-shadow: 0 0 0 0 var(--iui-color-foreground-#{$status});
      }

      70% {
        box-shadow: 0 0 0 7px rgba(0, 0, 0, 0);
      }

      100% {
        box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);
      }
    }
  }
}

@mixin iui-notification-marker-hover {
  .iui-notification-primary::before,
  .iui-notification-positive::before,
  .iui-notification-warning::before,
  .iui-notification-negative::before {
    border-color: var(--iui-color-background-1-hover);
  }
}
