// Copyright (c) Bentley Systems, Incorporated. All rights reserved.
// See LICENSE.md in the project root for license terms and full copyright notice.
@import '../style/index';
@import '../icon/index';

$default-border-color: var(--iui-icons-color); //rgba(var(--iui-color-foreground-body-rgb), var(--iui-opacity-4));
$hover-border-color: var(--iui-icons-color-actionable); //rgba(var(--iui-color-foreground-body-rgb), var(--iui-opacity-2));
$checked-border-color: var(--iui-color-foreground-primary);
$disabled-border-color: var(--iui-color-background-disabled);
$disabled-checked-border-color: var(--iui-icons-color); //rgba(var(--iui-color-foreground-body-rgb), var(--iui-opacity-4));

@mixin iui-radio-tile {
  cursor: pointer;
  -webkit-tap-highlight-color: rgba(var(--iui-color-foreground-primary-rgb), var(--iui-opacity-6));

  // &:first-of-type > .iui-radio-tile-content {
  //   border-radius: $iui-border-radius 0 0 $iui-border-radius;
  // }

  // &:last-of-type > .iui-radio-tile-content {
  //   border-radius: 0 $iui-border-radius $iui-border-radius 0;
  // }

  // &:not(:first-of-type) > .iui-radio-tile-content {
  //   margin-left: -1px;
  // }
}

@mixin iui-radio-tile-content {
  // box-sizing: content-box;
  // margin: 0 -1px -1px 0;
  width: $iui-xl * 5;
  height: 100%;
  padding: $iui-s;
  position: relative;
  z-index: 1;
  // border: 1px solid rgba(var(--iui-color-foreground-body-rgb), var(--iui-opacity-4));
  outline: 1px solid rgba(var(--iui-color-foreground-body-rgb), var(--iui-opacity-4));
  // box-shadow: 1px 0 0 0 $default-border-color, 0 1px 0 0 $default-border-color, 1px 1px 0 0 $default-border-color, 1px 0 0 0 $default-border-color inset, 0 1px 0 0 $default-border-color inset;
  // box-shadow: 0 0 0 1px $default-border-color;
  background-color: var(--iui-color-background-1);
  @media (prefers-reduced-motion: no-preference) {
    transition: border-color $iui-speed-fast ease-out;
  }

  &:hover {
    z-index: 2;
    // border-color: rgba(var(--iui-color-foreground-body-rgb), var(--iui-opacity-2));
    outline-color: rgba(var(--iui-color-foreground-body-rgb), var(--iui-opacity-2));
    // box-shadow: 1px 0 0 0 $hover-border-color, 0 1px 0 0 $hover-border-color, 1px 1px 0 0 $hover-border-color, 1px 0 0 0 $hover-border-color inset, 0 1px 0 0 $hover-border-color inset;
    // box-shadow: 0 0 0 1px $hover-border-color;

    .iui-radio-tile-icon {
      fill: var(--iui-icons-color-actionable);
      @media (forced-colors: active) {
        fill: CanvasText;
      }
    }
  }
}

@mixin iui-radio-tile-container {
  display: inline-flex;
  flex-wrap: wrap;
  gap: 0.75px; // prevent overlapping from outline
  user-select: none;
  // Create stacking context
  position: relative;
  isolation: isolate;
}

@mixin iui-radio-tile-input {
  width: 0;
  height: 0;
  appearance: none;
  opacity: 0;
  position: absolute;
  @include focus-visible {
    + * { // outline for checkmark
      outline-offset: -4px;
      outline: 2px solid var(--iui-color-foreground-primary);
      @media (forced-colors: active) {
        outline-color: Highlight;
      }
    }
  }

  &:checked + * {
    padding: $iui-s;
    z-index: 3;
    // border: 2px solid var(--iui-color-foreground-primary);
    outline: 2px solid var(--iui-color-foreground-primary);
    // box-shadow: 2px 0 0 0 $checked-border-color, 0 2px 0 0 $checked-border-color, 2px 2px 0 0 $checked-border-color, 2px 0 0 0 $checked-border-color inset, 0 2px 0 0 $checked-border-color inset;
    // box-shadow: 0 0 0 1px $checked-border-color;

    @media (forced-colors: active) {
      border-color: Highlight;
      // outline-color: Highlight;
    }

    .iui-radio-tile-icon {
      fill: var(--iui-icons-color-primary);
      @media (forced-colors: active) {
        fill: Highlight;
      }
    }

    &::after {
      content: '';
      width: $iui-icons-default;
      height: $iui-icons-default;
      position: absolute;
      top: $iui-s;
      right: $iui-s;
      mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6,14L0,8l2-2l4,4l8-8l2,2L6,14z" /></svg>');
      background-color: var(--iui-color-foreground-primary);
      @media (forced-colors: active) {
        background-color: Highlight;
      }
    }
  }

  &:disabled + * {
    cursor: not-allowed;
    z-index: 0;
    // border-color: var(--iui-color-background-disabled);
    outline-color: var(--iui-color-background-disabled);
    // box-shadow: 1px 0 0 0 $disabled-border-color, 0 1px 0 0 $disabled-border-color, 1px 1px 0 0 $disabled-border-color, 1px 0 0 0 $disabled-border-color inset, 0 1px 0 0 $disabled-border-color inset;
    // box-shadow: 0 0 0 1px $disabled-border-color;
    background-color: var(--iui-color-background-disabled);

    &::after {
      background-color: var(--iui-icons-color-actionable-disabled);
      @media (forced-colors: active) {
        background-color: GrayText;
      }
    }

    .iui-radio-tile-icon {
      filter: $iui-icons-color-multicolor-disabled;
      fill: var(--iui-icons-color-actionable-disabled);
      @media (forced-colors: active) {
        fill: GrayText;
      }
    }

    .iui-radio-tile-label,
    .iui-radio-tile-sublabel {
      @media (forced-colors: active) {
        color: GrayText;
      }
    }

    .iui-radio-tile-label {
      color: var(--iui-text-color-muted);
    }
  }

  &:disabled:checked + * {
    z-index: 3;
    // border: 2px solid rgba(var(--iui-color-foreground-body-rgb), var(--iui-opacity-4));
    outline: 2px solid rgba(var(--iui-color-foreground-body-rgb), var(--iui-opacity-4));
    // box-shadow: 2px 0 0 0 $disabled-checked-border-color, 0 2px 0 0 $disabled-checked-border-color, 2px 2px 0 0 $disabled-checked-border-color, 2px 0 0 0 $disabled-checked-border-color inset, 0 2px 0 0 $disabled-checked-border-color inset;
    // box-shadow: 0 0 0 1px $disabled-checked-border-color;
    @media (forced-colors: active) {
      // border-color: GrayText;
      outline-color: GrayText;
      // box-shadow: 2px 0 0 0 GrayText, 0 2px 0 0 GrayText, 2px 2px 0 0 GrayText, 2px 0 0 0 GrayText inset, 0 2px 0 0 GrayText inset;
      // box-shadow: 0 0 0 1px GrayText;
    }
  }
}

@mixin iui-radio-tile-icon {
  width: $iui-icons-xl;
  height: $iui-icons-xl;
  display: block;
  margin: round($iui-baseline * 0.5) auto $iui-baseline;
  fill: var(--iui-icons-color);
  @media (prefers-reduced-motion: no-preference) {
    transition: fill $iui-speed-fast ease-out;
  }
  @media (forced-colors: active) {
    fill: CanvasText;
  }
}

@mixin iui-radio-tile-label {
  font-size: $iui-font-size;
  font-weight: $iui-font-weight-semibold;
  line-height: $iui-line-height;
  text-align: center;
  word-break: break-word;
  color: var(--iui-text-color);
}

@mixin iui-radio-tile-sublabel {
  font-size: $iui-font-size-small;
  line-height: round($iui-baseline * 1.375);
  text-align: center;
  word-break: break-word;
  color: var(--iui-text-color-muted);
}
