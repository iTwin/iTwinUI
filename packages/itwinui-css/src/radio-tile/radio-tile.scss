// Copyright (c) Bentley Systems, Incorporated. All rights reserved.
// See LICENSE.md in the project root for license terms and full copyright notice.
@import '../utils/index';

@mixin iui-radio-tile {
  cursor: pointer;
  -webkit-tap-highlight-color: hsl(var(--iui-color-foreground-primary-hsl) / var(--iui-opacity-6));
}

@mixin iui-radio-tile-content {
  width: calc(var(--iui-size-xl) * 5);
  height: 100%;
  padding: var(--iui-size-xs);
  position: relative;
  z-index: 1;
  outline: 1px solid var(--iui-color-foreground-4);
  background-color: var(--iui-color-background-1);
  @media (prefers-reduced-motion: no-preference) {
    transition: outline-color var(--iui-duration-1) ease-out;
  }

  &:hover {
    z-index: 2;
    outline-color: var(--iui-color-foreground-2);

    .iui-radio-tile-icon {
      fill: var(--iui-color-foreground-2);
      @media (forced-colors: active) {
        fill: CanvasText;
      }
    }
  }
}

@mixin iui-radio-tile-container {
  display: inline-flex;
  flex-wrap: wrap;
  gap: 1px; // prevent overlapping from outline
  user-select: none;
  // Create stacking context
  position: relative;
  isolation: isolate;
}

@mixin iui-radio-tile-input {
  width: 0;
  height: 0;
  appearance: none;
  opacity: 0;
  position: absolute;

  &:checked + * {
    padding: var(--iui-size-xs);
    z-index: 3;
    outline: var(--iui-size-3xs) solid var(--iui-color-foreground-primary);
    outline-offset: -1px;

    @media (forced-colors: active) {
      outline-color: Highlight;
    }

    .iui-radio-tile-icon {
      fill: var(--iui-color-foreground-primary);
      @media (forced-colors: active) {
        fill: Highlight;
      }
    }

    &::after {
      @include iui-icon-style('m');
      content: '';
      position: absolute;
      top: var(--iui-size-xs);
      right: var(--iui-size-xs);
      mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6,14L0,8l2-2l4,4l8-8l2,2L6,14z" /></svg>');
      background-color: var(--iui-color-foreground-primary);
      @media (forced-colors: active) {
        background-color: Highlight;
      }
    }
  }

  &:disabled + * {
    cursor: not-allowed;
    z-index: 0;
    outline-color: var(--iui-color-background-disabled);
    background-color: var(--iui-color-background-disabled);

    &::after {
      background-color: var(--iui-color-foreground-5);
      @media (forced-colors: active) {
        background-color: GrayText;
      }
    }

    .iui-radio-tile-icon {
      filter: $iui-icon-color-multicolor-disabled;
      fill: var(--iui-color-foreground-5);
      @media (forced-colors: active) {
        fill: GrayText;
      }
    }

    .iui-radio-tile-label {
      color: var(--iui-color-foreground-4);
    }

    .iui-radio-tile-label,
    .iui-radio-tile-sublabel {
      @media (forced-colors: active) {
        color: GrayText;
      }
    }
  }

  &:disabled:checked + * {
    z-index: 3;
    outline: var(--iui-size-3xs) solid var(--iui-color-foreground-4);
    @media (forced-colors: active) {
      outline-color: GrayText;
    }
  }

  @include focus-visible {
    + * {
      // outline for checkmark
      z-index: 2;
      outline-offset: calc(0px - var(--iui-size-3xs));
      outline: 3px solid var(--iui-color-foreground-primary);
      @media (forced-colors: active) {
        outline-color: Highlight;
      }
    }
  }
}

@mixin iui-radio-tile-icon {
  @include iui-icon-style('xl');
  @include iui-icon-color;
  margin: calc(var(--iui-size-s) * 0.5) auto var(--iui-size-s);
  fill: var(--iui-color-foreground-4);
  @media (prefers-reduced-motion: no-preference) {
    transition: fill var(--iui-duration-1) ease-out;
  }
  @media (forced-colors: active) {
    fill: CanvasText;
  }
}

@mixin iui-radio-tile-label {
  font-size: var(--iui-font-size-1);
  font-weight: var(--iui-font-weight-semibold);
  line-height: var(--iui-size-l);
  text-align: center;
  word-break: break-word;
  color: var(--iui-color-foreground-2);
}

@mixin iui-radio-tile-sublabel {
  font-size: var(--iui-font-size-0);
  line-height: calc(var(--iui-size-s) * 1.375);
  text-align: center;
  word-break: break-word;
  color: var(--iui-color-foreground-4);
}
