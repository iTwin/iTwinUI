// Copyright (c) Bentley Systems, Incorporated. All rights reserved.
// See LICENSE.md in the project root for license terms and full copyright notice.
@use '../mixins';

.iui-fancy-input {
  display: grid;
  grid-template:
    'label label'
    'inputs inputs'
    'message message' / auto 1fr;

  &.iui-inline-label {
    grid-template:
      'label inputs inputs'
      '. message message' / auto auto 1fr;
  }

  .iui-input-label {
    font-weight: var(--iui-font-weight-semibold);
    margin-bottom: var(--iui-size-2xs);
    color: var(--_iui-input-label-color);

    grid-area: label;
    display: block;
    align-self: center;

    &.iui-required {
      &::after {
        content: '*';
        margin-left: var(--iui-size-2xs);
        color: var(--iui-color-text-negative);
      }
    }

    &.iui-disabled {
      --_iui-input-label-color: var(--iui-color-text-disabled);
      cursor: not-allowed;
    }

    cursor: default;

    &:is(label) {
      cursor: pointer;

      &.iui-disabled {
        cursor: not-allowed;
      }
    }
  }

  .iui-input-message {
    grid-area: message;
  }

  .iui-input-icon {
    margin: 0 var(--iui-size-s);

    &.iui-actionable {
      align-items: center;
      height: calc(100% - 4px); // subtract 2px on both sides to avoid overlapping with border/outline
      margin-right: 2px; // shift 2px from the right to avoid overlapping with border/outline
      border-radius: var(--iui-border-radius-1);
      padding-inline: calc(var(--iui-size-xs) + 1px);
      cursor: pointer;
      box-sizing: content-box;

      @include mixins.iui-ripple(var(--iui-color-background), var(--iui-color-background-backdrop));

      svg {
        fill: var(--iui-color-icon);
        transition: transform var(--iui-duration-1) ease-out;
      }

      &.iui-open svg {
        transform: rotate(180deg); // transform for arrow icon (e.g. svg-caret-down), used in combobox
      }
    }
  }

  &.iui-inline-label {
    .iui-input-label {
      margin: 0 var(--iui-size-m) 0 0;

      &.iui-required {
        margin-right: calc(var(--iui-size-2xs) * 1.5 - 1px);
      }
    }
  }

  .iui-input-flex-container {
    grid-area: inputs;
  }
}
