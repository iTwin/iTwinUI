// Copyright (c) Bentley Systems, Incorporated. All rights reserved.
// See LICENSE.md in the project root for license terms and full copyright notice.
@use 'sass:map';
@use '../utils/hex' as *;
@use '../utils/get-hsl' as *;

// #region SASS variables
$dark-primary-hue: 203;
$dark-primary-saturation: 100%;
$dark-primary-lightness: 39%;
$dark-primary-subtle-lightness-difference: 20%;

$dark-positive-hue: 115;
$dark-positive-saturation: 72%;
$dark-positive-lightness: 30%;
$dark-positive-subtle-lightness-difference: 10%;

$dark-warning-hue: 33;
$dark-warning-saturation: 89%;
$dark-warning-lightness: 36%;
$dark-warning-subtle-lightness-difference: 20%;

$dark-negative-hue: 0;
$dark-negative-saturation: 91%;
$dark-negative-lightness: 43%;
$dark-negative-subtle-lightness-difference: 25%;

$dark-background-saturation: 12%; // More saturated than high contrast theme
$dark-background-lightness: 20%;

$dark-background-lightness-difference: 2%;
$dark-foreground-lightness-difference: 41%;
$dark-subtle-saturation-difference: 64%;
$dark-hover-difference: $dark-background-lightness-difference * 3;

$dark-foreground-darkest-lightness: 30%;
// #endregion

$base-colors: (
  // #region Background colors - default
  background-1: hsl($dark-primary-hue, $dark-background-saturation, $dark-background-lightness),
  background-1-zebra: hsl($dark-primary-hue $dark-background-saturation calc($dark-background-lightness + $dark-background-lightness-difference / 2)),
  background-1-hover: hsl($dark-primary-hue $dark-background-saturation calc($dark-background-lightness + $dark-background-lightness-difference)),
  background-2: hsl($dark-primary-hue $dark-background-saturation calc($dark-background-lightness - $dark-background-lightness-difference * 2)),
  background-2-hover: hsl($dark-primary-hue $dark-background-saturation calc($dark-background-lightness - $dark-background-lightness-difference)),
  background-3: hsl($dark-primary-hue $dark-background-saturation calc($dark-background-lightness - $dark-background-lightness-difference * 4)),
  background-4: hsl($dark-primary-hue $dark-background-saturation calc($dark-background-lightness + $dark-background-lightness-difference * 2)),
  background-5: hsl($dark-primary-hue $dark-background-saturation calc($dark-background-lightness + $dark-background-lightness-difference * 4)),
  // #endregion
  // #region Background colors - statuses subtle
  background-subtle-primary: hsl($dark-primary-hue calc($dark-primary-saturation - $dark-subtle-saturation-difference) calc($dark-primary-lightness - $dark-primary-subtle-lightness-difference)),
  background-subtle-positive: hsl($dark-positive-hue calc($dark-positive-saturation - $dark-subtle-saturation-difference) calc($dark-positive-lightness - $dark-positive-subtle-lightness-difference)),
  background-subtle-warning: hsl($dark-warning-hue calc($dark-warning-saturation - $dark-subtle-saturation-difference) calc($dark-warning-lightness - $dark-warning-subtle-lightness-difference)),
  background-subtle-negative: hsl($dark-negative-hue calc($dark-negative-saturation - $dark-subtle-saturation-difference) calc($dark-negative-lightness - $dark-negative-subtle-lightness-difference)),
  // #endregion
  // #region Background colors - statuses
  background-primary: hsl($dark-primary-hue $dark-primary-saturation $dark-primary-lightness),
  background-primary-hover: hsl($dark-primary-hue $dark-primary-saturation calc($dark-primary-lightness + $dark-hover-difference)),
  background-positive: hsl($dark-positive-hue $dark-positive-saturation $dark-positive-lightness),
  background-positive-hover: hsl($dark-positive-hue $dark-positive-saturation calc($dark-positive-lightness + $dark-hover-difference)),
  background-warning: hsl($dark-warning-hue $dark-warning-saturation $dark-warning-lightness),
  background-warning-hover: hsl($dark-warning-hue $dark-warning-saturation calc($dark-warning-lightness + $dark-hover-difference)),
  background-negative: hsl($dark-negative-hue $dark-negative-saturation $dark-negative-lightness),
  background-negative-hover: hsl($dark-negative-hue $dark-negative-saturation calc($dark-negative-lightness + $dark-hover-difference)),
  // #endregion
  // #region Foreground colors - default
  foreground-1: hsl(0 0% 100%),
  foreground-2: hsl(0 0% calc($dark-foreground-darkest-lightness + ((100% - $dark-foreground-darkest-lightness) / 7 * 6))),
  foreground-3: hsl(0 0% calc($dark-foreground-darkest-lightness + ((100% - $dark-foreground-darkest-lightness) / 7 * 4))),
  foreground-4: hsl(0 0% calc($dark-foreground-darkest-lightness + ((100% - $dark-foreground-darkest-lightness) / 7 * 2))),
  foreground-5: hsl(0 0% $dark-foreground-darkest-lightness),
  // #endregion
  // #region Foreground colors - statuses
  foreground-primary: hsl($dark-primary-hue $dark-primary-saturation calc($dark-primary-lightness + $dark-foreground-lightness-difference)),
  foreground-primary-hover: hsl($dark-primary-hue $dark-primary-saturation calc(($dark-primary-lightness + $dark-foreground-lightness-difference) + $dark-hover-difference)),
  foreground-positive: hsl($dark-positive-hue $dark-positive-saturation calc($dark-positive-lightness + $dark-foreground-lightness-difference)),
  foreground-positive-hover: hsl($dark-positive-hue $dark-positive-saturation calc(($dark-positive-lightness + $dark-foreground-lightness-difference) + $dark-hover-difference)),
  foreground-warning: hsl($dark-warning-hue $dark-warning-saturation calc($dark-warning-lightness + $dark-foreground-lightness-difference)),
  foreground-warning-hover: hsl($dark-warning-hue $dark-warning-saturation calc(($dark-warning-lightness + $dark-foreground-lightness-difference) + $dark-hover-difference)),
  foreground-negative: hsl($dark-negative-hue $dark-negative-saturation calc($dark-negative-lightness + $dark-foreground-lightness-difference)),
  foreground-negative-hover: hsl($dark-negative-hue $dark-negative-saturation calc(($dark-negative-lightness + $dark-foreground-lightness-difference) + $dark-hover-difference))
  // #endregion
);

$opacities: (
  1: 1,
  2: 0.85,
  3: 0.65,
  4: 0.45,
  5: 0.25,
  6: 0.1,
);

@mixin theme {
  @each $color, $value in $base-colors {
    --iui-color-#{$color}: #{hex($value)};
  }

  @each $level, $value in $opacities {
    --iui-opacity-#{$level}: #{$value};
  }

  --iui-color-background-transparent-hover: rgba(255, 255, 255, 0.06); // Should match `$dark-hover-difference`
  --iui-color-background-border: #{hex(map.get($base-colors, background-5))};
  --iui-color-background-disabled: #{hex(map.get($base-colors, background-3))};
  --iui-color-foreground-disabled: #{hex(map.get($base-colors, foreground-4))};
  --iui-color-foreground-muted: #{hex(map.get($base-colors, foreground-3))};

  // Only HSL channels, for customizing transparency
  --iui-color-background-1-hsl: #{get-hsl(map.get($base-colors, background-1))};
  --iui-color-foreground-1-hsl: #{get-hsl(map.get($base-colors, foreground-1))};
  --iui-color-foreground-primary-hsl: #{get-hsl(map.get($base-colors, foreground-primary))};
  --iui-color-foreground-positive-hsl: #{get-hsl(map.get($base-colors, foreground-positive))};
  --iui-color-foreground-warning-hsl: #{get-hsl(map.get($base-colors, foreground-warning))};
  --iui-color-foreground-negative-hsl: #{get-hsl(map.get($base-colors, foreground-negative))};
}
