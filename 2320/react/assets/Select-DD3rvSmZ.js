import{p as ue,r as e,g as K,V as oe,B as p,c as R,O as B,m as W,l as ce,n as de,y as me,e as $,G as fe,L as Ee,M as be}from"./index-eRKR2_i9.js";import{M as ve}from"./MenuItem-CzbLWaei.js";import{I as ge}from"./Icon-C51axaHB.js";import{L as he}from"./List-Ck9B5Ea0.js";import{S as Se}from"./SvgCheckmark-CmLjVUwT.js";import{S as ye}from"./SvgCaretDownSmall-CIETFAj7.js";const j=ue.div("iui-input-with-icon"),Ce=({text:t=""})=>{let[n,a]=e.useState(t);return e.useEffect(()=>{var s;a(t);let r=(s=K())==null?void 0:s.setTimeout(()=>a(""),5e3);return()=>{var o;return void((o=K())==null?void 0:o.clearTimeout(r))}},[t]),e.createElement(oe,{as:"div","aria-live":"polite","aria-atomic":"true"},n)},G=e.forwardRef((t,n)=>{let{className:a,label:r,...s}=t;return e.createElement(p,{as:"span",className:R("iui-select-tag",a),ref:n,...s},e.createElement(p,{as:"span",className:"iui-select-tag-label"},r))}),pe=e.forwardRef((t,n)=>{let{tags:a,className:r,...s}=t,o=e.useMemo(()=>e.Children.toArray(a),[a]);return e.createElement(B,{itemsCount:o.length,className:R("iui-select-tag-container",r),ref:n,...s},e.createElement(xe,{...t,tags:o}))});let xe=t=>{let{tags:n}=t,{visibleCount:a}=B.useContext();return e.createElement(e.Fragment,null,a<n.length?n.slice(0,a-1):n,e.createElement(B.OverflowNode,null,e.createElement(G,{label:`+${n.length-a+1} item(s)`})))};const Be=e.forwardRef((t,n)=>{let{native:a,...r}=t,s=a?Ne:we;return e.createElement(s,{...r,ref:n})});let Ne=e.forwardRef((t,n)=>{let{triggerProps:a,options:r,disabled:s,placeholder:o,defaultValue:x=o!==void 0?"":void 0,value:m,onChange:g,size:h,status:N,styleType:c,required:b,...f}=t;return e.createElement(j,{...f,ref:n},e.createElement(U,{as:"select",size:h,status:N,styleType:c,disabled:s,defaultValue:m===void 0?x:void 0,value:m===null?"":m,required:b,...a,onKeyDown:W(a==null?void 0:a.onKeyDown,u=>{var I,M;u.key==="Enter"&&((M=(I=u.currentTarget).showPicker)==null||M.call(I))}),onChange:W(a==null?void 0:a.onChange,u=>{g==null||g(u.currentTarget.value,u)})},c!=="borderless"&&o!==void 0?e.createElement("option",{value:"",disabled:!0},o):null,r.map(u=>e.createElement("option",{key:u.value,...u},u.label))),e.createElement(J,{disabled:s}))}),we=e.forwardRef((t,n)=>{let a=ce(),{options:r,value:s,onChange:o,placeholder:x,disabled:m=!1,size:g,itemRenderer:h,selectedItemRenderer:N,menuClassName:c,menuStyle:b,multiple:f=!1,triggerProps:u,status:I,popoverProps:{portal:M=!0,...d}={},styleType:P,...Q}=t,[O,z]=e.useState(!1),[X,Y]=e.useState(""),[Z,A]=e.useState(),i=s!==void 0?s:Z,v=de(o),q=e.useRef(null),_=e.useCallback(()=>{var l;m||(z(!0),(l=d==null?void 0:d.onVisibleChange)==null||l.call(d,!0))},[m,d]),V=e.useCallback(()=>{var l,E;z(!1),(l=q.current)==null||l.focus({preventScroll:!0}),(E=d==null?void 0:d.onVisibleChange)==null||E.call(d,!1)},[d]),ee=e.useMemo(()=>r.map((l,E)=>{let y=F(i,f)?(i==null?void 0:i.includes(l.value))??!1:i===l.value,D=h?h(l,{close:()=>z(!1),isSelected:y}):e.createElement(ve,null,l.label),{label:le,icon:ne,startIcon:re,...se}=l,ie=re??ne;return e.cloneElement(D,{key:`${le}-${E}`,isSelected:y,startIcon:ie,endIcon:y?e.createElement(Se,{"aria-hidden":!0}):null,onClick:()=>{var k,H;if(!l.disabled&&(ke(v.current,f)?(A(l.value),(k=v.current)==null||k.call(v,l.value),V()):(A(C=>y?C==null?void 0:C.filter(L=>l.value!==L):[...C??[],l.value]),(H=v.current)==null||H.call(v,l.value,y?"removed":"added")),F(i,f))){let C=i||[],L=y?C.filter(T=>l.value!==T):[...C,l.value];Y(r.filter(T=>L.includes(T.value)).map(T=>T.label).filter(Boolean).join(", "))}},ref:k=>{y&&!f&&(k==null||k.scrollIntoView({block:"nearest"}))},role:"option",...se,...D.props})}),[V,h,f,v,r,i]),S=e.useMemo(()=>{if(i!=null)return F(i,f)?r.filter(l=>i.some(E=>E===l.value)):r.find(l=>l.value===i)},[f,r,i]),te=e.useMemo(()=>{let l=0;return Array.isArray(i)&&i.length>0?l=r.findIndex(E=>E.value===i[0]):i&&(l=r.findIndex(E=>E.value===i)),l>=0?l:0},[r,i]),ae=e.useCallback(l=>e.createElement(G,{key:l.label,label:l.label}),[]),w=me({visible:O,matchWidth:!0,closeOnOutsideClick:!0,middleware:{size:{maxHeight:"var(--iui-menu-max-height)"}},...d,onVisibleChange:l=>l?_():V()});return e.createElement(e.Fragment,null,e.createElement(j,{...Q,ref:$(w.refs.setPositionReference,n)},e.createElement(U,{...w.getReferenceProps(),tabIndex:0,role:"combobox",size:g,status:I,"aria-disabled":m?"true":void 0,"data-iui-disabled":m?"true":void 0,"aria-autocomplete":"none","aria-expanded":O,"aria-haspopup":"listbox","aria-controls":`${a}-menu`,styleType:P,...u,ref:$(q,u==null?void 0:u.ref,w.refs.setReference),className:R({"iui-placeholder":(!S||S.length===0)&&!!x},u==null?void 0:u.className)},(!S||S.length===0)&&e.createElement(p,{as:"span",className:"iui-content"},x),F(S,f)?e.createElement(Te,{selectedItems:S,selectedItemsRenderer:N,tagRenderer:ae}):e.createElement(Re,{selectedItem:S,selectedItemRenderer:N})),e.createElement(J,{disabled:m,isOpen:O}),f?e.createElement(Ce,{text:X}):null),w.open&&e.createElement(fe,{portal:M},e.createElement(Ie,{defaultFocusedIndex:te,className:c,id:`${a}-menu`,key:`${a}-menu`,...w.getFloatingProps({style:b,onKeyDown:({key:l})=>{l==="Tab"&&V()}}),ref:w.refs.setFloating},ee)))}),F=(t,n)=>n,ke=(t,n)=>!n,U=e.forwardRef((t,n)=>{let{size:a,status:r,styleType:s="default",...o}=t;return e.createElement(p,{"data-iui-size":a,"data-iui-status":r,"data-iui-variant":s!=="default"?s:void 0,...o,ref:n,className:R("iui-select-button","iui-field",t.className)})}),J=e.forwardRef((t,n)=>{let{disabled:a,isOpen:r,...s}=t;return e.createElement(ge,{"aria-hidden":!0,...s,ref:n,className:R("iui-end-icon",{"iui-disabled":a,"iui-open":r},t.className)},e.createElement(ye,null))}),Re=({selectedItem:t,selectedItemRenderer:n})=>{let a=(t==null?void 0:t.startIcon)??(t==null?void 0:t.icon);return e.createElement(e.Fragment,null,t&&n&&n(t),t&&!n&&e.createElement(e.Fragment,null,a&&e.createElement(p,{as:"span",className:"iui-icon","aria-hidden":!0},a),e.createElement(p,{as:"span",className:"iui-content"},t.label)))},Te=({selectedItems:t,selectedItemsRenderer:n,tagRenderer:a})=>{let r=e.useMemo(()=>t?t.map(s=>a(s)):[],[t,a]);return e.createElement(e.Fragment,null,t&&n&&n(t),t&&!n&&e.createElement(p,{as:"span",className:"iui-content"},e.createElement(pe,{tags:r})))},Ie=e.forwardRef((t,n)=>{let{defaultFocusedIndex:a=0,autoFocus:r=!0,children:s,className:o,...x}=t,[m,g]=e.useState(a),h=e.useCallback(c=>{queueMicrotask(()=>{let b=c==null?void 0:c.querySelector('[tabindex="0"]');b==null||b.focus()})},[]),N=e.useMemo(()=>e.Children.map(s,(c,b)=>e.isValidElement(c)?e.createElement(Ee,{key:b,render:c,ref:c.props.ref||c.ref}):c),[s]);return e.createElement(be,{render:e.createElement(he,{as:"div",className:R("iui-menu",o)}),orientation:"vertical",role:"listbox",activeIndex:m,onNavigate:g,ref:$(n,r?h:void 0),...x},N)});export{Ce as A,j as I,Be as S,pe as a,G as b};
