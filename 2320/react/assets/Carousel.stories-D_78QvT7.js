import{r as e,d as J,e as $,f as B,g as L,B as E,c as k,m as X,h as Y,i as Z,k as M,I as P,l as ee,n as te,j as d,R as z}from"./index-eRKR2_i9.js";import{u as re}from"./useIntersection-gy9cAW5G.js";import{S as le}from"./SvgChevronLeft-aRfwG1kw.js";import{S as se}from"./SvgChevronRight-DYslsNuQ.js";import{T as oe}from"./Text-CDEGYfwZ.js";import{C as K}from"./Code-5_OnjWHf.js";const N=e.createContext(void 0),ne=e.forwardRef((t,u)=>{let{children:r,className:l,...i}=t,a=e.useContext(N);if(!a)throw new Error("CarouselSlider must be used within Carousel");let{setSlideCount:c,idPrefix:f,scrollToSlide:o,isManuallyUpdating:s}=a,h=e.useMemo(()=>e.Children.map(r,(g,w)=>e.isValidElement(g)?e.cloneElement(g,{id:`${f}--slide-${w}`,"aria-labelledby":`${f}--dot-${w}`,index:w}):g)??[],[r,f]);J(()=>{c(h.length)},[h.length,c]);let C=e.useRef(null),x=$(C,u),y=B("(prefers-reduced-motion: no-preference)");o.current=(g,{instant:w}={})=>{var I;s.current=!0;let S=(I=C.current)==null?void 0:I.children.item(g);!C.current||!S||C.current.scrollTo({left:S.offsetLeft-C.current.offsetLeft,behavior:w||!y?"instant":"smooth"})};let b=e.useRef(),R=e.useCallback(()=>{var g,w;b.current&&((g=L())==null||g.clearTimeout(b.current)),b.current=(w=L())==null?void 0:w.setTimeout(()=>{s.current=!1},100)},[s]);return e.createElement(E,{className:k("iui-carousel-slider",l),ref:x,onScroll:R,tabIndex:-1,...i},h)}),ie=e.forwardRef((t,u)=>{let{index:r,className:l,children:i,...a}=t,c=e.useContext(N);if(!c||r==null)throw new Error("CarouselSlide must be used within Carousel");let{isManuallyUpdating:f,currentIndex:o,setCurrentIndex:s}=c,h=e.useCallback(()=>{f.current||s(r)},[r,f,s]),C=re(h,{threshold:.5},!1),x=$(C,u);return e.createElement(E,{className:k("iui-carousel-slider-item",l),role:"tabpanel","aria-roledescription":"slide",tabIndex:r===o?0:void 0,ref:x,inert:r!==o?"":void 0,...a,onKeyDown:X(t.onKeyDown,y=>{(y.key==="ArrowLeft"||y.key==="ArrowRight")&&y.preventDefault()})},i)}),O=e.forwardRef((t,u)=>{let{isActive:r,isSmaller:l,isSmall:i,className:a,...c}=t;return e.createElement(Y,{role:"tab",tabIndex:r?0:-1,className:k("iui-carousel-navigation-dot",{"iui-active":r,"iui-first":l,"iui-second":i},a),"aria-selected":r,ref:u,...c})}),U=e.forwardRef((t,u)=>{let{currentIndex:r,length:l,className:i,onSlideChange:a,children:c,...f}=t,o=e.useContext(N),s=l??(o==null?void 0:o.slideCount)??e.Children.count(c),h=r??(o==null?void 0:o.currentIndex)??0,C=t.id??(o==null?void 0:o.idPrefix),x=e.useCallback(m=>{var n,T;o&&(o.setCurrentIndex(m),o.scrollToSlide.current(m)),(T=(n=g.current)==null?void 0:n.children[m])==null||T.focus(),a==null||a(m)},[o,a]),y=e.useRef(!0),[b,R]=e.useState(s),g=e.useRef(null),[w,S]=e.useState(),[I,p]=Z(({width:m})=>{if(!g.current)return;S(m);let n=g.current.children[0].offsetWidth;R(Math.floor(m/n))});e.useEffect(()=>p==null?void 0:p.disconnect(),[p]);let F=$(u,I,g),j=e.useMemo(()=>M(h-Math.ceil(b/2)+1,0,s-b),[h,s,b]),D=e.useMemo(()=>M(h+Math.floor(b/2),b-1,s-1),[h,s,b]),_=e.useMemo(()=>Array(s).fill(null).map((m,n)=>{let T=n===j&&n!==0||n===D&&n!==s-1,q=n===j+1&&n!==1||n===D-1&&n!==s-2,G=n<j||n>D;return e.createElement(O,{key:n,"aria-label":`Slide ${n+1}`,isActive:n===h,onClick:()=>x(n),isSmall:q,isSmaller:T||G,id:C&&`${C}--dot-${n}`})}),[s,j,D,h,C,x]),A=B("(prefers-reduced-motion: no-preference)");e.useEffect(()=>{var n;let m=(n=g.current)==null?void 0:n.children[j];!g.current||!m||(g.current.scrollTo({left:m.offsetLeft-g.current.offsetLeft,behavior:A&&!y.current?"smooth":"auto"}),y.current&&(y.current=!1))},[h,j,A,s,b,w]);let H=m=>{if(m.altKey||m.ctrlKey||m.metaKey||m.shiftKey)return;let n=m.key;(n==="ArrowLeft"||n==="ArrowRight")&&m.preventDefault()},Q=m=>{switch(m.key){case"ArrowLeft":x((s+h-1)%s);break;case"ArrowRight":x((s+h+1)%s);break}};return e.createElement(e.Fragment,null,e.createElement(E,{className:k("iui-carousel-navigation-dots",i),role:"tablist","aria-label":"Slides",ref:F,onKeyDown:H,onKeyUp:Q,tabIndex:-1,...f},c??_))});let ae=e.forwardRef((t,u)=>{let{className:r,children:l,...i}=t;return e.createElement(E,{className:k("iui-carousel-navigation",r),ref:u,...i},l??e.createElement(e.Fragment,null,e.createElement(E,{className:"iui-carousel-navigation-left"},e.createElement(V,null)),e.createElement(U,null),e.createElement(E,{className:"iui-carousel-navigation-right"},e.createElement(W,null))))}),V=e.forwardRef((t,u)=>{let r=e.useContext(N);if(!r)throw new Error("CarouselNavigation should be used inside Carousel");let{slideCount:l,currentIndex:i,setCurrentIndex:a,scrollToSlide:c}=r;return e.createElement(P,{styleType:"borderless",size:"small",tabIndex:-1,"aria-label":"Previous",ref:u,...t,onClick:f=>{var s;let o=(l+i-1)%l;a(o),c.current(o,{instant:f.detail>3}),(s=t==null?void 0:t.onClick)==null||s.call(t,f)}},e.createElement(le,null))}),W=e.forwardRef((t,u)=>{let r=e.useContext(N);if(!r)throw new Error("CarouselNavigation should be used inside Carousel");let{slideCount:l,currentIndex:i,setCurrentIndex:a,scrollToSlide:c}=r;return e.createElement(P,{styleType:"borderless",size:"small",tabIndex:-1,"aria-label":"Next",ref:u,...t,onClick:f=>{var s;let o=(l+i+1)%l;a(o),c.current(o,{instant:f.detail>3}),(s=t==null?void 0:t.onClick)==null||s.call(t,f)}},e.createElement(se,null))});const ce=Object.assign(ae,{PreviousButton:V,NextButton:W});let de=e.forwardRef((t,u)=>{let r=ee(),{activeSlideIndex:l=0,onSlideChange:i,className:a,children:c,id:f=r,...o}=t,s=e.useRef(!1),h=e.useRef(null),C=$(h,u),[x,y]=e.useState(l),b=e.useRef(()=>{}),R=e.useRef(!0);e.useEffect(()=>{y(l),b.current(l,{instant:R.current}),R.current=!1},[l]);let[g,w]=e.useState(0),S=te(i);return e.useEffect(()=>{var I;(I=S.current)==null||I.call(S,x)},[S,x]),e.createElement(E,{as:"section","aria-roledescription":"carousel",ref:C,className:k("iui-carousel",a),...o,id:f},e.createElement(N.Provider,{value:{currentIndex:x,setCurrentIndex:y,slideCount:g,setSlideCount:w,idPrefix:f,isManuallyUpdating:s,scrollToSlide:b}},c))});const v=Object.assign(de,{Slider:ne,Slide:ie,Navigation:ce,DotsList:U,Dot:O}),ye={title:"Carousel"},we=()=>{const t=[{from:"#cc2b5e",to:"#753a88"},{from:"#00467f",to:"#a5cc82"},{from:"#2193b0",to:"#6dd5ed"},{from:"#ffe000",to:"#799f0c"},{from:"#e65c00",to:"#f9d423"},{from:"#1488cc",to:"#2b32b2"},{from:"#bbd2c5",to:"#536976"},{from:"#9796f0",to:"#fbc7d4"},{from:"#b79891",to:"#94716b"},{from:"#acb6e5",to:"#86fde8"}];return d.jsxs(v,{style:{width:"min(800px, 90vw)"},children:[d.jsx(v.Navigation,{}),d.jsx(v.Slider,{children:t.map(({from:u,to:r},l)=>d.jsx(v.Slide,{children:d.jsx("div",{style:{background:`linear-gradient(to right, ${u}, ${r})`,height:350,width:"100%",display:"grid",placeItems:"center"},children:d.jsx("div",{style:{fontSize:48,color:"hsl(0deg 0% 100% / 0.7)"},children:l+1})})},l))})]})},Se=()=>{const t=[{from:"#cc2b5e",to:"#753a88"},{from:"#00467f",to:"#a5cc82"},{from:"#2193b0",to:"#6dd5ed"},{from:"#ffe000",to:"#799f0c"},{from:"#e65c00",to:"#f9d423"},{from:"#1488cc",to:"#2b32b2"},{from:"#bbd2c5",to:"#536976"},{from:"#9796f0",to:"#fbc7d4"},{from:"#b79891",to:"#94716b"},{from:"#acb6e5",to:"#86fde8"}],[u,r]=z.useState(5);return d.jsxs(v,{style:{width:"min(800px, 90vw)"},activeSlideIndex:u,onSlideChange:l=>r(l),children:[d.jsx(v.Navigation,{}),d.jsx(v.Slider,{children:t.map(({from:l,to:i},a)=>d.jsx(v.Slide,{children:d.jsx("div",{style:{background:`linear-gradient(to right, ${l}, ${i})`,height:350,width:"100%",display:"grid",placeItems:"center"},children:d.jsx("div",{style:{fontSize:48,color:"hsl(0deg 0% 100% / 0.7)"},children:a+1})})},a))})]})},ue=()=>"my-custom-carousel",fe=()=>{const t=[{from:"#cc2b5e",to:"#753a88"},{from:"#00467f",to:"#a5cc82"},{from:"#2193b0",to:"#6dd5ed"},{from:"#ffe000",to:"#799f0c"},{from:"#e65c00",to:"#f9d423"},{from:"#1488cc",to:"#2b32b2"},{from:"#bbd2c5",to:"#536976"},{from:"#9796f0",to:"#fbc7d4"},{from:"#b79891",to:"#94716b"},{from:"#acb6e5",to:"#86fde8"}],u=ue(),[r,l]=z.useState(0);return d.jsxs("section",{"aria-roledescription":"carousel",tabIndex:0,onKeyUp:({key:i})=>{const a=i==="ArrowRight"?1:i==="ArrowLeft"?-1:0;l(c=>(t.length+c+a)%t.length)},style:{display:"inline-grid",width:"min(90vw, 40vh)"},children:[d.jsx(v.DotsList,{id:u,length:t.length,currentIndex:r,onSlideChange:i=>l(i),style:{justifySelf:"center",maxWidth:"min(100%, 200px)"}}),d.jsx("div",{style:{display:"grid",grid:"[slide] 1fr / [slide] 1fr",order:"-1"},children:t.map(({from:i,to:a},c)=>d.jsx("div",{role:"tabpanel",id:`${u}-slide-${c}`,onClick:({currentTarget:{clientWidth:f},clientX:o})=>{const s=f-o>f/2?-1:1;l(h=>(t.length+h+s)%t.length)},style:{gridArea:"slide",opacity:r===c?1:0,pointerEvents:r===c?"auto":"none",transition:"opacity 0.5s",cursor:"pointer"},children:d.jsx("div",{style:{background:`linear-gradient(to right, ${i}, ${a})`,height:"min(600px, 70vh)",display:"grid",placeItems:"center",fontSize:48,color:"hsl(0deg 0% 100% / 0.7)"},children:c+1})},c))})]})};fe.decorators=[t=>d.jsxs("div",{style:{display:"inline-grid",gap:"1rem"},children:[d.jsxs(oe,{isMuted:!0,style:{fontStyle:"italic"},children:["This example shows how ",d.jsx(K,{children:"Carousel.DotsList"})," can be used outside ",d.jsx(K,{children:"Carousel"}),".",d.jsx("br",{}),"Clicking on the right half of the slide will advance the carousel to the next slide, whereas clicking on the left half will go to the previous slide."]}),d.jsx(t,{})]})];typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{we as Basic,Se as Controlled,fe as OnlyDots,ye as default};
