---
type Props = {
  buttonIcon?: boolean;
  svg?: string;
  size?: 's' | 'm' | 'l';
  wrapperProps?: astroHTML.JSX.HTMLAttributes;
} & astroHTML.JSX.HTMLAttributes;

const {
  svg,
  class: className,
  size = 'auto',
  buttonIcon = false,
  wrapperProps,
  ...rest
} = Astro.props;

const basic = !Astro.slots.has('default');

const Element = `svg-${svg}`;

const iconProps = {
  ['class:list']: [
    {
      ['iui-svg-icon']: !buttonIcon,
      ['iui-button-icon']: buttonIcon,
    },
    className,
  ],
  ['data-iui-icon-size']: size,
  ['aria-hidden']: 'true',
  ...rest,
};
---

<!-- @ts-ignore -->{basic && <Element {...iconProps} />}
{
  !basic && (
    <div class:list={['iui-text-spacing', wrapperProps?.class]} {...wrapperProps}>
      <Element {...iconProps} />
      <slot />
    </div>
  )
}
