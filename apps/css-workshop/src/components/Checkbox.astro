---
import cx from 'classnames';

type Props = {
  isLoading?: boolean;
  label?: React.ReactNode;
  indeterminate?: boolean;
  disabled?: boolean;
  variant?: 'eyeball';
  labelPosition?: 'left' | 'right';
  status?: 'negative' | 'positive' | 'warning' | 'negative';
} & astroHTML.JSX.HTMLAttributes;

const {
  status,
  isLoading,
  labelPosition = 'right',
  label,
  indeterminate,
  disabled,
  variant,
  ...props
} = Astro.props;
---

<label
  class={cx('iui-checkbox-wrapper', {
    'iui-disabled': disabled,
    'iui-loading': isLoading,
    'iui-positive': status === 'positive',
    'iui-warning': status === 'warning',
    'iui-negative': status === 'negative',
  })}
  {...props}
>
  <input
    class={cx('iui-checkbox', {
      'iui-loading': isLoading,
      'iui-checkbox-visibility': variant === 'eyeball',
    })}
    type='checkbox'
    name={indeterminate ? 'indeterminate' : undefined}
    disabled
    {...props}
  />
  {
    isLoading && (
      <div
        class='iui-progress-indicator-radial'
        data-iui-indeterminate='true'
        data-iui-size='x-small'
      />
    )
  }
  <span class='iui-checkbox-label'>
    {label}
    <slot />
  </span>
</label>
