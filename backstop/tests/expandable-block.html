<!--
  Copyright (c) Bentley Systems, Incorporated. All rights reserved.
  See LICENSE.md in the project root for license terms and full copyright notice.
-->
<!DOCTYPE html>
<html
  lang="en-US"
  id="theme"
>
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1"
    >
    <title>Expandable block | iTwinUI</title>
    <link
      rel="stylesheet"
      href="../../lib/css/all.css"
    />
    <link
      rel="stylesheet"
      href="../assets/demo.css"
    />
    <script
      type="module"
      src="https://cdn.skypack.dev/@itwin/itwinui-icons-elements/chevron-right"
    ></script>
    <script src="../assets/theme.js"></script>
    <script>
      customElements.define('expandable-content', class extends HTMLElement {
        connectedCallback() {
          const innerHTML = `Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.`;
          this.parentElement.insertAdjacentHTML('beforeend', innerHTML);
          this.remove();
        }
      })
    </script>
  </head>
  <body class="iui-body">
    <theme-button></theme-button>
    <h1>Expandable block</h1>
    <hr />

    <h2 id="default">Default</h2>

    <div class="iui-expandable-block">
      <div
        aria-expanded="false"
        class="iui-header"
        tabindex="0"
      >
        <svg-chevron-right
          class="iui-icon"
          aria-hidden="true"
        ></svg-chevron-right>
        <div
          class="iui-title"
          title="Expandable block title"
        >
          Expandable block title
        </div>
      </div>
    </div>

    <br />

    <div class="iui-expandable-block iui-expanded">
      <div
        aria-expanded="true"
        class="iui-header"
        tabindex="0"
      >
        <svg-chevron-right
          class="iui-icon"
          aria-hidden="true"
        ></svg-chevron-right>
        <div
          class="iui-title"
          title="Expandable block title"
        >
          Expandable block title
        </div>
      </div>
      <div class="iui-expandable-content">
        <div>
          <expandable-content></expandable-content>
        </div>
      </div>
    </div>

    <hr />
    <h2 id="captions">Captions</h2>

    <div class="iui-expandable-block iui-with-caption">
      <div
        aria-expanded="false"
        class="iui-header"
        tabindex="0"
      >
        <svg-chevron-right
          class="iui-icon"
          aria-hidden="true"
        ></svg-chevron-right>
        <div
          class="iui-title"
          title="Expandable block title"
        >
          Expandable block title
        </div>
        <div
          class="iui-caption"
          title="Collapsed block caption"
        >
          Collapsed block caption
        </div>
      </div>
    </div>

    <br />

    <div class="iui-expandable-block iui-with-caption iui-expanded">
      <div
        aria-expanded="true"
        class="iui-header"
        tabindex="0"
      >
        <svg-chevron-right
          class="iui-icon"
          aria-hidden="true"
        ></svg-chevron-right>
        <div
          class="iui-title"
          title="Expandable block title"
        >
          Expandable block title
        </div>
        <div
          class="iui-caption"
          title="Expanded block caption"
        >
          Expanded block caption
        </div>
      </div>
      <div class="iui-expandable-content">
        <div>
          <expandable-content></expandable-content>
        </div>
      </div>
    </div>

    <script>
      document.querySelectorAll('.iui-header').forEach((el) => {
        el.addEventListener('click', (event) => {
          event.currentTarget.parentElement.classList.toggle('iui-expanded');
          if (el.nextElementSibling?.classList.contains('iui-expandable-content')) {
            el.nextElementSibling.remove();
          } else {
            el.insertAdjacentHTML('afterend', '<div class="iui-expandable-content"><div><expandable-content></expandable-content></div></div>')
          }
        });
      });
    </script>
  </body>
</html>
