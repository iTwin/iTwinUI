<!--
  Copyright (c) Bentley Systems, Incorporated. All rights reserved.
  See LICENSE.md in the project root for license terms and full copyright notice.
-->
<!DOCTYPE html>
<html
  lang="en-US"
  id="theme"
>
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1"
    >
    <title>Carousel | iTwinUI</title>
    <link
      rel="stylesheet"
      href="../../lib/css/all.css"
    />
    <link
      rel="stylesheet"
      href="../assets/demo.css"
    />
    <style>
      section[id^='demo'] {
        margin-bottom: 22px;
      }

      /* These dimensions equal 16.9 ratio */
      .demo-carousel-width {
        width: 600px;
      }

      .demo-carousel-height {
        height: 337.5px;
      }

      /* Slide gradients */
      [data-slide-id="0"] {
        background: linear-gradient(to right, #e65c00, #f9d423);
      }
      [data-slide-id="1"] {
        background: linear-gradient(to right, #2193b0, #6dd5ed);
      }
      [data-slide-id="2"] {
        background: linear-gradient(to right, #cc2b5e, #753a88);
      }
      [data-slide-id="3"] {
        background: linear-gradient(to right, #00467f, #a5cc82);
      }

    </style>
    <script
      type="module"
      src="https://cdn.skypack.dev/@itwin/itwinui-icons-elements/chevron-left"
    ></script>
    <script
      type="module"
      src="https://cdn.skypack.dev/@itwin/itwinui-icons-elements/chevron-right"
    ></script>
    <script
      type="module"
      src="https://cdn.skypack.dev/@itwin/itwinui-icons-elements/pause"
    ></script>
    <script
      type="module"
      src="https://cdn.skypack.dev/@itwin/itwinui-icons-elements/play"
    ></script>
    <script src="../assets/theme.js"></script>
  </head>
  <body class="iui-body">
    <theme-button></theme-button>
    <h1>Carousel</h1>
    <hr />

    <h2>Default</h2>
    <section id="demo-default">

      <div
        class="iui-carousel demo-carousel-width"
        aria-roledescription="carousel"
        aria-label="Introduction to iTwinUI"
        aria-live="polite"
        aria-atomic="true"
      >
        <ol
          class="iui-carousel-slider demo-carousel-height"
          id="myCarousel-items"
        >

          <li
            class="iui-carousel-slider-item demo-carousel-height iui-current"
            data-slide-id="0"
            role="group"
            aria-roledescription="slide"
            aria-label="1 of 4"
            aria-hidden="false"
            id="demo-slide-1"
          ></li>

          <li
            class="iui-carousel-slider-item demo-carousel-height"
            data-slide-id="1"
            role="group"
            aria-roledescription="slide"
            aria-label="2 of 4"
            aria-hidden="true"
            id="demo-slide-2"
          ></li>

          <li
            class="iui-carousel-slider-item demo-carousel-height"
            data-slide-id="2"
            role="group"
            aria-roledescription="slide"
            aria-label="3 of 4"
            aria-hidden="true"
            id="demo-slide-3"
          ></li>

          <li
            class="iui-carousel-slider-item demo-carousel-height"
            data-slide-id="3"
            role="group"
            aria-roledescription="slide"
            aria-label="4 of 4"
            aria-hidden="true"
            id="demo-slide-4"
          ></li>

        </ol>

        <nav class="iui-carousel-navigation">
          <button
            class="iui-button iui-borderless iui-small iui-carousel-navigation-button"
            type="button"
            aria-controls="myCarousel-items"
            aria-label="Previous slide"
          >
            <svg-chevron-left
              class="iui-button-icon"
              aria-hidden="true"
            ></svg-chevron-left>
          </button>

          <button
            class="iui-button iui-borderless iui-small"
            aria-label="Pause animation"
            data-action="pause"
          >
            <svg-pause
              class="iui-button-icon"
              aria-hidden="true"
            ></svg-pause>
          </button>

          <ol class="iui-carousel-navigation-dots">
            <li>
              <button
                class="iui-active iui-carousel-navigation-dot"
                data-slide="0"
                aria-label="Slide 1 (Current slide)"
              ></button>
            </li>
            <li>
              <button
                class="iui-carousel-navigation-dot"
                data-slide="1"
                aria-label="Slide 2"
                id="test-1"
              ></button>
            </li>
            <li>
              <button
                class="iui-carousel-navigation-dot"
                data-slide="2"
                aria-label="Slide 3"
                id="test-2"
              ></button>
            </li>
            <li>
              <button
                class="iui-carousel-navigation-dot"
                data-slide="3"
                aria-label="Slide 4"
              ></button>
            </li>
          </ol>

          <div style="width: 28px"></div>
          <button
            class="iui-button iui-borderless iui-small iui-carousel-navigation-button"
            type="button"
            aria-controls="myCarousel-items"
            aria-label="Next slide"
          >
            <svg-chevron-right
              class="iui-button-icon"
              aria-hidden="true"
            ></svg-chevron-right>
          </button>
        </nav>
      </div>

    </section>

    <script>
      document.querySelectorAll('.iui-carousel').forEach((carousel) => {
        const slides = [...carousel.querySelectorAll('.iui-carousel-slider-item')];
        const dots = [...carousel.querySelectorAll('.iui-carousel-navigation-dot')];
        const [prev, next] = [...carousel.querySelectorAll('.iui-carousel-navigation-button')];
        const slider = carousel.querySelector('.iui-carousel-slider');

        const updateSlide = (current) => {
          slider.style.transform = `translateX(-${(current * 100)}%)`;

          dots.forEach((dot, index) => {
            dot.classList.toggle('iui-active', index === current);
          })
        };

        // previous / next slide buttons
        let currentSlide = slides.findIndex(slide => slide.classList.contains('iui-current'));

        prev.addEventListener('click', () => {
          currentSlide = (currentSlide - 1 + slides.length) % slides.length;
          updateSlide(currentSlide);
        });

        next.addEventListener('click', () => {
          currentSlide = (currentSlide + 1) % slides.length;
          updateSlide(currentSlide);
        });

        // clickable dots
        dots.forEach((dot, index) => {
          if (!dot.classList.contains('iui-invisible')) {
            dot.addEventListener('click', () => {
              currentSlide = index;
              updateSlide(currentSlide);
            });
          }
        });
      });

      // play / pause toggle
      const playbackButton = document.querySelector("[data-action='pause']");
      playbackButton.addEventListener('click', () => {
        if (playbackButton.dataset.action === 'pause') {
          playbackButton.dataset.action = 'play';
          playbackButton.innerHTML = `<svg-play class="iui-button-icon" aria-hidden="true"></svg-play>`;
        } else {
          playbackButton.dataset.action = 'pause';
          playbackButton.innerHTML = `<svg-pause class="iui-button-icon" aria-hidden="true"></svg-pause>`;
        }
      });
    </script>

  </body>
</html>
