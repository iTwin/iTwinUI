// Copyright (c) Bentley Systems, Incorporated. All rights reserved.
// See LICENSE.md in the project root for license terms and full copyright notice.
@import '../style/index';
@import '../side-navigation/index';

@mixin iui-header-brand {
  height: 100%;
  display: inline-flex;
  align-items: center;
  flex-shrink: 0;
  white-space: nowrap;
  background-color: transparent;
  box-sizing: border-box;

  &-icon {
    width: $iui-icons-large;
    height: $iui-icons-large;
    margin: 0 $iui-side-navigation-icon-margins;
    fill: var(--iui-icons-color-actionable);
    will-change: transform;
    @media (prefers-reduced-motion: no-preference) {
      transition: transform $iui-speed-fast ease-out;
    }
    @at-root .iui-slim & {
      transform: scale(0.66666);
    }
  }

  &-label {
    margin-right: $iui-sm;
    font-size: $iui-font-size-leading;
    @media (prefers-reduced-motion: no-preference) {
      transition: font-size $iui-speed-fast ease-out;
    }
    @media (max-width: 1024px) {
      display: none;
    }
    @at-root .iui-slim & {
      font-size: $iui-font-size;
    }
  }

  @at-root {
    a#{&}, // rendered as anchor element
    button#{&}, // rendered as button element
    &[role='button'] {
      @include iui-focus;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
      transition: background-color $iui-speed-fast ease-out;
      @media (forced-colors: active) {
        border: 1px solid transparent;
        border-bottom-width: 0;
      }

      // #region resets for button
      @include iui-reset;
      font-family: inherit;
      background-color: unset;
      color: unset;
      // #endregion

      &:hover {
        background-color: rgba(var(--iui-color-foreground-body-rgb), var(--iui-opacity-6));
      }
    }
  }
}

@mixin iui-header-breadcrumb-button-container($active-color: primary) {
  max-width: 25vw;
  transition: background-color $iui-speed-fast ease-out;
  height: 100%;
  display: flex;
  overflow: hidden;
  position: relative;
  color: var(--iui-text-color);
  box-sizing: border-box;
  @media (forced-colors: active) {
    color: LinkText;
    border: none;
  }

  // Hover state
  &:hover {
    background-color: rgba(var(--iui-color-foreground-body-rgb), var(--iui-opacity-6));
  }

  // Active state
  &.iui-active {
    background-color: rgba(var(--iui-color-foreground-#{$active-color}-rgb), var(--iui-opacity-6));
    box-shadow: 0 $iui-xxs 0 0 currentColor;
    color: var(--iui-color-foreground-#{$active-color});
    pointer-events: none; // Removes hover effect, reduces specificity
    @media (forced-colors: active) {
      color: LinkText;
      border-bottom: 3px solid LinkText;
    }
  }

  // Disabled state
  &.iui-disabled,
  &[aria-disabled='true'] {
    cursor: not-allowed;
    background-color: transparent;
    color: var(--iui-text-color-placeholder);
    pointer-events: none; // Removes hover effect

    // Disabled active state
    &.iui-active {
      box-shadow: none;
      background-color: rgba(var(--iui-color-foreground-body-rgb), var(--iui-opacity-6));
    }
  }
}

@mixin iui-header-breadcrumb-button {
  --_iui-header-breadcrumb-button-dropdown-svg: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><path d='m4.8067 6h6.3953a.27961.27961 0 0 1 .24043.44321l-3.1736 3.45707a.33969.33969 0 0 1 -.48085 0l-3.2217-3.45707a.26909.26909 0 0 1 .24042-.44321z' /></svg>");

  @include iui-reset;
  @include iui-focus;
  display: inline-flex;
  align-items: center;
  vertical-align: middle;
  justify-content: center;
  height: 100%;
  border-radius: 0;
  max-width: 25vw;
  overflow: hidden;
  padding-left: $iui-sm;
  padding-right: $iui-s;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
  transition: background-color $iui-speed-fast ease-out;
  color: inherit;
  gap: $iui-sm;
  pointer-events: auto; // Reverts change from parent element
  cursor: pointer;
  @media (forced-colors: active) {
    border: 1px solid transparent;
    border-bottom-width: 0;

    &:not(:last-child) {
      border-right-width: 0;
    }
  }

  // Default & hover state
  &,
  &:hover {
    background-color: transparent;
  }

  // Dropdown icon
  &:last-of-type::after {
    content: '';
    width: $iui-icons-default;
    height: $iui-icons-default;
    background-color: currentColor;
    flex-shrink: 0;
    mask: var(--_iui-header-breadcrumb-button-dropdown-svg);
  }

  // Split menu dropdown button
  &-dropdown {
    padding: 0 $iui-xs;

    &:hover:enabled {
      background-color: rgba(var(--iui-color-foreground-body-rgb), var(--iui-opacity-6));
    }
  }

  // Disabled state
  &.iui-disabled,
  &:disabled,
  &[aria-disabled='true'] {
    cursor: not-allowed;
  }
}

@mixin iui-header-breadcrumb-button-label {
  @include iui-label-with-sublabel;

  &-sublabel {
    @at-root .iui-slim & {
      display: none;
    }
  }
}

@mixin iui-header-breadcrumb-button-icon {
  @include iui-thumbnail-or-icon;
  will-change: transform;

  @at-root .iui-slim & {
    transform: scale(0.66666);
  }

  @at-root .iui-disabled & {
    background-color: var(--iui-color-background-2);
    fill: var(--iui-icons-color-actionable-disabled);
  }

  @media (prefers-reduced-motion: no-preference) {
    transition: transform $iui-speed-fast ease-out;
  }

  @media (max-width: 767px) {
    display: none;
  }
}
