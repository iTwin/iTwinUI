// Copyright (c) Bentley Systems, Incorporated. All rights reserved.
// See LICENSE.md in the project root for license terms and full copyright notice.
@import '../style/index';
@import '../side-navigation/index';

@mixin iui-header-brand {
  height: 100%;
  display: inline-flex;
  align-items: center;
  flex-shrink: 0;
  white-space: nowrap;
  background-color: transparent;
  box-sizing: border-box;

  @at-root {
    a#{&}, // rendered as anchor element
    button#{&}, // rendered as button element
    &[role='button'] {
      @include iui-focus;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
      transition: background-color $iui-speed-fast ease-out;
      @media (forced-colors: active) {
        border: 1px solid transparent;
        border-bottom-width: 0;
      }

      // #region resets for button
      @include iui-reset;
      font-family: inherit;
      background-color: unset;
      color: unset;
      // #endregion

      &:hover {
        background-color: rgba(var(--iui-color-foreground-body-rgb), var(--iui-opacity-6));
      }
    }
  }

  @at-root a#{&} {
    text-decoration: none;
  }
}

@mixin iui-header-brand-icon {
  width: $iui-icons-large;
  height: $iui-icons-large;
  margin: 0 $iui-side-navigation-icon-margins;
  fill: var(--iui-icons-color-actionable);
  will-change: transform;
  @media (prefers-reduced-motion: no-preference) {
    transition: transform $iui-speed-fast ease-out;
  }
  @at-root .iui-slim & {
    transform: scale(0.66666);
  }
}

@mixin iui-header-brand-label {
  margin-right: $iui-sm;
  font-size: $iui-font-size-leading;
  @media (prefers-reduced-motion: no-preference) {
    transition: font-size $iui-speed-fast ease-out;
  }
  @media (max-width: 1024px) {
    display: none;
  }
  @at-root .iui-slim & {
    font-size: $iui-font-size;
  }
}

@mixin iui-header-breadcrumb-button-container($active-color: primary) {
  max-width: 25vw;
  transition: background-color $iui-speed-fast ease-out;
  height: 100%;
  display: flex;
  overflow: hidden;
  position: relative;
  color: var(--iui-text-color);
  box-sizing: border-box;
  @media (forced-colors: active) {
    color: LinkText;
    border: none;
  }

  // Hover state
  &:hover {
    background-color: rgba(var(--iui-color-foreground-body-rgb), var(--iui-opacity-6));
  }

  // Active state
  &[aria-current] {
    background-color: rgba(var(--iui-color-foreground-#{$active-color}-rgb), var(--iui-opacity-6));
    box-shadow: 0 $iui-xxs 0 0 currentColor;
    color: var(--iui-color-foreground-#{$active-color});
    pointer-events: none; // Removes hover effect, reduces specificity
    @media (forced-colors: active) {
      color: LinkText;
      border-bottom: 3px solid LinkText;
    }
  }

  // Disabled state
  &.iui-disabled,
  &[aria-disabled='true'] {
    cursor: not-allowed;
    background-color: transparent;
    color: var(--iui-text-color-placeholder);
    pointer-events: none; // Removes hover effect

    // Disabled active state
    &[aria-current] {
      box-shadow: none;
      background-color: var(--iui-color-background-2);

      @media (forced-colors: active) {
        border-bottom: 3px solid GrayText;
      }
    }
  }
}

@mixin iui-header-breadcrumb-button {
  @include iui-reset;
  @include iui-focus;
  display: inline-flex;
  align-items: center;
  vertical-align: middle;
  justify-content: center;
  height: 100%;
  border-radius: 0;
  max-width: 25vw;
  overflow: hidden;
  padding-left: $iui-sm;
  padding-right: $iui-sm;
  box-sizing: border-box;
  font-family: inherit;
  -webkit-tap-highlight-color: transparent;
  transition: background-color $iui-speed-fast ease-out;
  color: inherit;
  gap: $iui-sm;
  pointer-events: auto; // Reverts change from parent element
  cursor: pointer;
  @media (forced-colors: active) {
    border: 1px solid transparent;
    border-bottom-width: 0;

    &:not(:last-child) {
      border-right-width: 0;
    }
  }

  // Default & hover state
  &,
  &:hover {
    background-color: transparent;
  }

  // Disabled state
  &.iui-disabled,
  &:disabled,
  &[aria-disabled='true'] {
    cursor: not-allowed;
  }
}

@mixin iui-header-breadcrumb-button-dropdown {
  padding: 0 $iui-xs;

  &:hover {
    background-color: rgba(var(--iui-color-foreground-body-rgb), var(--iui-opacity-6));
  }

  @at-root [aria-current] &:hover {
    background-color: rgba(var(--iui-color-foreground-primary-rgb), var(--iui-opacity-6));
  }

  &.iui-disabled,
  &:disabled,
  &[aria-disabled='true'] {
    cursor: not-allowed;

    &:hover {
      background-color: transparent;
    }
  }
}

@mixin iui-header-breadcrumb-button-dropdown-icon {
  width: $iui-icons-default;
  height: $iui-icons-default;
  fill: currentColor;
  flex-shrink: 0;
  margin-right: -4px;

  @at-root .iui-header-breadcrumb-button-dropdown & {
    margin-right: 0;
  }

  @at-root .iui-disabled & {
    @media (forced-colors: active) {
      fill: GrayText;
    }
  }
}

@mixin iui-header-breadcrumb-button-label {
  @include iui-label-with-sublabel;

  &-sublabel {
    @at-root .iui-slim & {
      display: none;
    }
  }
}

@mixin iui-header-breadcrumb-button-icon {
  @include iui-thumbnail-or-icon;
  will-change: transform;

  @media (forced-colors: active) {
    fill: LinkText;
  }

  @at-root .iui-slim & {
    transform: scale(0.66666);
  }

  @at-root .iui-disabled & {
    background-color: var(--iui-color-background-2);
    fill: var(--iui-icons-color-actionable-disabled);

    @media (forced-colors: active) {
      fill: GrayText;
    }
  }

  @media (max-width: 767px) {
    display: none;
  }
}
