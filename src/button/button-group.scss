// Copyright (c) Bentley Systems, Incorporated. All rights reserved.
// See LICENSE.md in the project root for license terms and full copyright notice.
@import '../style/index';

@mixin iui-button-group {
  display: inline-flex;
  align-items: center;
  isolation: isolate;

  $childSelector: 'input, button'; // target nested inputs and buttons

  > * {
    display: flex;

    #{$childSelector} {
      position: relative;

      &:hover {
        z-index: 1;
      }

      &:focus {
        z-index: 2;

        &:where(:not(:focus-visible):not(:hover)) {
          z-index: revert;
        }
      }

      &:disabled {
        z-index: -1;
      }

      // Adds stripe above active button
      &.iui-active {
        &::after {
          content: '';
          position: absolute;
          height: $iui-xxs;
          opacity: 1;
          top: $iui-xxs;
          left: $iui-xxs;
          width: calc(100% - #{$iui-xs});
          @include themed {
            background-color: t(iui-color-foreground-primary);
          }
        }

        &:disabled {
          &::after {
            @include themed {
              background-color: rgba(t(iui-color-foreground-body-rgb), t(iui-opacity-5));
            }
          }
        }
      }

      // Reset border radius only for non-borderless items
      &:not(.iui-borderless) {
        border-radius: 0;
      }
    }

    // Add rounded corners to first and last items
    &:first-child {
      #{$childSelector}:not(.iui-borderless) {
        border-top-left-radius: $iui-border-radius;
        border-bottom-left-radius: $iui-border-radius;
      }
    }

    &:last-child {
      #{$childSelector}:not(.iui-borderless) {
        border-top-right-radius: $iui-border-radius;
        border-bottom-right-radius: $iui-border-radius;
      }
    }

    // Use negative margin to make adjacent borders overlap
    &:not(:last-child) {
      margin-right: -1px;
    }

    // Add slight border between disabled items
    &:not(:first-child) {
      .iui-default:disabled {
        @include themed {
          border-left-color: t(iui-color-background-4);
        }
      }
    }
  }
}
