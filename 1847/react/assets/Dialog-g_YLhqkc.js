import{r as e,_ as X,l as K,x as G,q as J,B as Y,c as F,p as H,m as Q,I as ee,e as W,k as te,i as L,h as re,Z as ne,$ as se,P as oe}from"./index-7nKTUIFH.js";import{u as ie}from"./useEventListener-Sp3nvNmU.js";import{a as le}from"./focusable-TYTfgik1.js";const ae=s=>e.createElement("div",{style:{position:"absolute",inset:-6,display:"grid",pointerEvents:"none"}},e.createElement(ue,null),e.createElement(ce,{...s})),ce=s=>{const{elementRef:t,containerRef:n,onResizeStart:d,onResizeEnd:f}=s,p=e.useRef(!1),o=i=>{if(!t.current||i.button!==0)return;const l=i.clientX,$=i.clientY,[b,w]=X(t.current),{width:h,height:g}=t.current.getBoundingClientRect();let m=`${h}px`,x=`${g}px`,c=b,u=w,E=parseFloat(getComputedStyle(t.current).minWidth);Number.isNaN(E)&&(E=380);const z=parseFloat(getComputedStyle(t.current).minHeight),k=i.currentTarget.dataset.iuiResizer,a=t.current.ownerDocument||document,S=a.body.style.userSelect;a.body.style.userSelect="none";const T=P=>{var B;if(!t.current)return;p.current||(p.current=!0,d==null||d());const D=(B=n==null?void 0:n.current)==null?void 0:B.getBoundingClientRect(),R=K(P.clientX,(D==null?void 0:D.left)??0,(D==null?void 0:D.right)??a.documentElement.clientWidth??0),N=K(P.clientY,(D==null?void 0:D.top)??0,(D==null?void 0:D.bottom)??a.documentElement.clientHeight??0),C=l-R,v=$-N;switch(k){case"top-left":{const r=g+v;r>=z&&(x=t.current.style.height=`${r}px`,u=w-v);const y=h+C;y>=E&&(m=t.current.style.width=`${y}px`,c=b-C),t.current.style.transform=`translate(${c}px, ${u}px)`;break}case"top":{const r=g+v;if(r<z)break;x=t.current.style.height=`${r}px`,u=w-v,t.current.style.transform=`translate(${c}px, ${u}px)`;break}case"top-right":{const r=g+v;r>=z&&(x=t.current.style.height=`${r}px`,u=w-v),m=t.current.style.width=`${h-C}px`,t.current.style.transform=`translate(${c}px, ${u}px)`;break}case"right":{m=t.current.style.width=`${h-C}px`,x=t.current.style.height=`${g}px`,t.current.style.transform=`translate(${c}px, ${u}px)`;break}case"bottom-right":{m=t.current.style.width=`${h-C}px`,x=t.current.style.height=`${g-v}px`,t.current.style.transform=`translate(${c}px, ${u}px)`;break}case"bottom":{x=t.current.style.height=`${g-v}px`,t.current.style.transform=`translate(${c}px, ${u}px)`;break}case"bottom-left":{const r=h+C;r>=E&&(m=t.current.style.width=`${r}px`,c=b-C),x=t.current.style.height=`${g-v}px`,t.current.style.transform=`translate(${c}px, ${u}px)`;break}case"left":{const r=h+C;if(r<E)break;m=t.current.style.width=`${r}px`,x=t.current.style.height=`${g}px`,c=b-C,t.current.style.transform=`translate(${c}px, ${u}px)`;break}}};a.addEventListener("pointermove",T),a.addEventListener("pointerup",()=>{a.removeEventListener("pointermove",T),t.current&&(a.body.style.userSelect=S,p.current=!1,f==null||f({width:m,height:x,transform:`translate(${c}px, ${u}px)`}))},{once:!0})};return e.createElement(e.Fragment,null,e.createElement("div",{"data-iui-resizer":"top-left",onPointerDown:o,style:{cursor:"nw-resize"}}),e.createElement("div",{"data-iui-resizer":"top",onPointerDown:o,style:{cursor:"n-resize"}}),e.createElement("div",{"data-iui-resizer":"top-right",onPointerDown:o,style:{cursor:"ne-resize"}}),e.createElement("div",{"data-iui-resizer":"right",onPointerDown:o,style:{cursor:"e-resize"}}),e.createElement("div",{"data-iui-resizer":"bottom-right",onPointerDown:o,style:{cursor:"se-resize"}}),e.createElement("div",{"data-iui-resizer":"bottom",onPointerDown:o,style:{cursor:"s-resize"}}),e.createElement("div",{"data-iui-resizer":"bottom-left",onPointerDown:o,style:{cursor:"sw-resize"}}),e.createElement("div",{"data-iui-resizer":"left",onPointerDown:o,style:{cursor:"w-resize"}}))},ue=e.memo(()=>e.createElement("style",null,de)),de=`
[data-iui-resizer] {
  pointer-events: auto;
  grid-area: 1 / 1 / -1 / -1;
  width: 12px;
  height: 12px;
  z-index: 1;
}
[data-iui-resizer='top'],
[data-iui-resizer='bottom'] {
  height: 8px;
  width: auto;
  z-index: 0;
}
[data-iui-resizer='left'],
[data-iui-resizer='right'] {
  height: auto;
  width: 8px;
  z-index: 0;
}
[data-iui-resizer^='top'] {
  align-self: start;
}
[data-iui-resizer^='bottom'] {
  align-self: end;
}
[data-iui-resizer$='left'] {
  justify-self: start;
}
[data-iui-resizer$='right'] {
  justify-self: end;
}`,fe=s=>{const{children:t}=s,n=e.useRef(),d=()=>{const o=le(n.current),i=o[0],l=o[(o.length||1)-1];return[i,l]},f=o=>{const[i,l]=d();o.relatedTarget===i?l==null||l.focus():i==null||i.focus()},p=o=>{const[i,l]=d();o.relatedTarget===l?i==null||i.focus():l==null||l.focus()};return e.createElement(e.Fragment,null,e.createElement("div",{tabIndex:0,onFocus:f,"aria-hidden":!0}),e.cloneElement(t,{ref:G(t.ref,n)}),e.createElement("div",{tabIndex:0,onFocus:p,"aria-hidden":!0}))},me=s=>e.createElement(J,{...s},e.createElement("path",{d:"m14 0-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6 6-6"})),pe=e.forwardRef((s,t)=>{const{isVisible:n=!0,className:d,...f}=s;return e.createElement(Y,{className:F("iui-backdrop",{"iui-backdrop-visible":n},d),ref:t,...f})}),A=e.createContext(void 0),I=()=>e.useContext(A)||{},U=H.div("iui-dialog-title"),Z=e.createContext(void 0),ge=()=>({...e.useContext(Z)}),he=Object.assign(e.forwardRef((s,t)=>{const n=I(),{children:d,titleText:f,isDismissible:p=n.isDismissible,onClose:o=n.onClose,isDraggable:i=n.isDraggable,className:l,onPointerDown:$,...b}=s,{onPointerDown:w}=ge();return e.createElement(Y,{className:F("iui-dialog-title-bar",l,{"iui-dialog-title-bar-filled":i}),ref:t,onPointerDown:Q($,w),...b},d||e.createElement(e.Fragment,null,e.createElement(U,null,f),p&&e.createElement(ee,{size:"small",styleType:"borderless",onClick:o,"aria-label":"Close"},e.createElement(me,null))))}),{Title:U}),xe=H.div("iui-dialog-content"),be=e.forwardRef((s,t)=>{const n=I(),{isVisible:d=n.isOpen,isDismissible:f=n.isDismissible,onClose:p=n.onClose,closeOnExternalClick:o=n.closeOnExternalClick,relativeTo:i=n.relativeTo,onMouseDown:l,className:$,style:b,...w}=s,h=e.useRef(null),g=W(h,t),m=x=>{x.persist(),x.target===h.current&&(f&&o&&p&&p(x),l==null||l(x))};return e.createElement(pe,{isVisible:d,className:F({"iui-backdrop-fixed":i==="viewport"},$),ref:g,onMouseDown:m,style:{pointerEvents:"auto",...b},...w})}),ye=H.div("iui-dialog-button-bar"),q=s=>{var n,d,f;const t=(n=s==null?void 0:s.current)==null?void 0:n.getBoundingClientRect();return{top:(t==null?void 0:t.top)??0,right:(t==null?void 0:t.right)??((d=L())==null?void 0:d.innerWidth)??0,bottom:(t==null?void 0:t.bottom)??((f=L())==null?void 0:f.innerHeight)??0,left:(t==null?void 0:t.left)??0}},we=(s,t,n=!0)=>{const d=e.useRef(0),f=e.useRef(0),p=e.useRef(),o=e.useRef(),i=e.useRef(q(t)),l=e.useCallback(()=>{var S;if(!s.current||!n)return;const{top:c,right:u,bottom:E,left:z}=(S=s.current)==null?void 0:S.getBoundingClientRect();let[k,a]=X(s.current);i.current=q(t),E>i.current.bottom&&(a-=E-i.current.bottom),c<i.current.top&&(a+=i.current.top-c),u>i.current.right&&(k-=u-i.current.right),z<i.current.left&&(k+=i.current.left-z),p.current=k,o.current=a,s.current.style.transform=`translate(${k}px, ${a}px)`},[t,s,n]),[$,b]=te(l);$(t==null?void 0:t.current),e.useEffect(()=>()=>{b==null||b.disconnect()},[b]),ie("resize",()=>{l(),p.current!=null&&o.current!=null&&h(`translate(${p.current}px, ${o.current}px)`)},L());const[w,h]=e.useState(""),g=e.useRef(c=>{if(!s.current)return;const u=c.clientX-d.current,E=c.clientY-f.current;s.current.style.transform=`translate(${u}px, ${E}px)`,l()}),m=e.useRef("");return{onPointerDown:e.useCallback(c=>{if(!s.current||c.button!==0||!n)return;const[u,E]=X(s.current);d.current=c.clientX-u,f.current=c.clientY-E,m.current=s.current.style.userSelect,s.current.style.userSelect="none";const z=s.current.ownerDocument||document;z.addEventListener("pointermove",g.current),z.addEventListener("pointerup",()=>{h(`translate(${p.current}px, ${o.current}px)`),z.removeEventListener("pointermove",g.current),s.current&&(s.current.style.userSelect=m.current)},{once:!0})},[s,n]),transform:w}},Ee=e.forwardRef((s,t)=>{const n=I(),{className:d,children:f,styleType:p="default",isOpen:o=n.isOpen,isDismissible:i=n.isDismissible,onClose:l=n.onClose,closeOnEsc:$=n.closeOnEsc,trapFocus:b=n.trapFocus,setFocus:w=n.setFocus,preventDocumentScroll:h=n.preventDocumentScroll,onKeyDown:g,isDraggable:m=n.isDraggable,isResizable:x=n.isResizable,style:c,placement:u=n.placement,...E}=s,[z,k]=e.useState(),a=e.useRef(null),S=e.useRef(!1),T=e.useRef(),P=e.useRef("");e.useEffect(()=>{o&&(P.current=document.body.style.overflow)},[o]),e.useEffect(()=>{var y;const r=(y=a.current)==null?void 0:y.ownerDocument;if(!(!r||!h||P.current==="hidden"))return o?r.body.style.overflow="hidden":r.body.style.overflow=P.current,()=>{r.body.style.overflow=P.current}},[o,h]);const D=r=>{r.altKey||(r.persist(),i&&$&&r.key==="Escape"&&l&&l(r),g==null||g(r))},{onPointerDown:R,transform:N}=we(a,n.dialogRootRef,m),C=e.useCallback(r=>{m&&R(r)},[m,R]);re(()=>{var M;if(!m||!o)return;const r=(M=a.current)==null?void 0:M.getBoundingClientRect(),[y,O]=X(a.current);k(_=>{var j,V;return{..._,inlineSize:r==null?void 0:r.width,blockSize:r==null?void 0:r.height,insetInlineStart:(j=a.current)==null?void 0:j.offsetLeft,insetBlockStart:(V=a.current)==null?void 0:V.offsetTop,transform:`translate(${y}px,${O}px)`}})},[m,o]);const v=e.useCallback(r=>{k(y=>({...y,...r}))},[]),B=e.createElement(Y,{className:F("iui-dialog",{"iui-dialog-default":p==="default","iui-dialog-full-page":p==="fullPage","iui-dialog-visible":o,"iui-dialog-draggable":m},d),role:"dialog",ref:W(a,t),onKeyDown:D,tabIndex:-1,"data-iui-placement":u,style:{transform:N,...z,...c},...E},e.createElement(ne,null,e.createElement("slot",null),x&&e.createElement(ae,{elementRef:a,containerRef:n.dialogRootRef,onResizeStart:()=>{S.current||(S.current=!0,v({maxInlineSize:"100%"}))},onResizeEnd:v})),f);return e.createElement(se,{in:o,timeout:{exit:600},onEntered:()=>{var r,y;T.current=(r=a.current)==null?void 0:r.ownerDocument.activeElement,w&&((y=a.current)==null||y.focus({preventScroll:!0}))},onExit:()=>{var r,y,O;(y=a.current)!=null&&y.contains((r=a.current)==null?void 0:r.ownerDocument.activeElement)&&((O=T.current)==null||O.focus())},unmountOnExit:!0,nodeRef:a},e.createElement(Z.Provider,{value:{onPointerDown:C}},b&&e.createElement(fe,null,B),!b&&B))}),De=e.forwardRef((s,t)=>{const{trapFocus:n=!1,setFocus:d=!1,preventDocumentScroll:f=!1,isOpen:p=!1,isDismissible:o=!0,closeOnEsc:i=!0,closeOnExternalClick:l=!1,onClose:$,isDraggable:b=!1,isResizable:w=!1,relativeTo:h="viewport",placement:g,className:m,portal:x=!1,...c}=s,u=e.useRef(null);return e.createElement(A.Provider,{value:{isOpen:p,onClose:$,closeOnEsc:i,closeOnExternalClick:l,isDismissible:o,preventDocumentScroll:f,trapFocus:n,setFocus:d,isDraggable:b,isResizable:w,relativeTo:h,dialogRootRef:u,placement:g}},e.createElement(oe,{portal:x},e.createElement(Y,{className:F("iui-dialog-wrapper",m),"data-iui-relative":h==="container",ref:W(t,u),...c})))}),Ce=Object.assign(De,{Backdrop:be,Main:Ee,TitleBar:he,Content:xe,ButtonBar:ye});export{Ce as D,xe as a,ye as b};
