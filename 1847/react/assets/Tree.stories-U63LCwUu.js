import{r,q as J,p as Q,B as I,c as B,x as X,I as Y,R as a,j as p}from"./index-7nKTUIFH.js";import{S as P}from"./Placeholder-7mbqDT_L.js";import{g as G}from"./focusable-TYTfgik1.js";import{u as ee}from"./VirtualScroll-PkuY1nvU.js";import{S as se}from"./SvgChevronRight-yTtxq0rE.js";import{C as U}from"./Checkbox-e4JaGEb5.js";import{P as te}from"./ProgressRadial-MCZMRZZx.js";const oe=b=>r.createElement(J,{...b},r.createElement("path",{d:"m5.525 2-1.05 1.05L9.425 8l-4.95 4.95L5.525 14l6-6-6-6Z"})),O=r.createContext(void 0),ae=()=>{const b=r.useContext(O);if(b==null)throw new Error("TreeContext must be used within a TreeContext.Provider");return b},T=b=>{const{data:c,className:m,nodeRenderer:N,getNode:E,size:f="default",enableVirtualization:t=!1,style:n,...d}=b,u=r.useRef(null),e=r.useRef(0);r.useEffect(()=>{e.current=0},[c]);const s=r.useCallback(()=>{const g=G(u.current);return g.filter(i=>!g.some(h=>h.contains(i.parentElement)))},[]),o=g=>{if(g.altKey)return;const i=s();if(!(i!=null&&i.length))return;const h=i.findIndex(x=>{var j;return x.contains((j=u.current)==null?void 0:j.ownerDocument.activeElement)}),C=h>-1?h:0;switch(g.key){case"ArrowUp":{g.preventDefault();const x=Math.max(0,C-1);i[x].focus(),e.current=x;break}case"ArrowDown":{g.preventDefault();const x=Math.min(i.length-1,C+1);i[x].focus(),e.current=x;break}}},[l,k]=r.useMemo(()=>{const g=[],i=[],h=(C=[],x=0,j)=>{const v=Array();return C.forEach((S,A)=>{const{subNodes:F,...V}=E(S),w={nodeProps:V,depth:x,parentNode:j,indexInGroup:A};if(v.push(w.nodeProps.nodeId),g.push(w),x===0&&i.push(w),w.nodeProps.isExpanded){const K=h(F,x+1,w);w.subNodeIds=K}}),v};return h(c),[g,i]},[c,E]),$=r.useCallback(g=>{var h,C,x;const i=l[g];return r.createElement(O.Provider,{key:i.nodeProps.nodeId,value:{nodeDepth:i.depth,subNodeIds:i.subNodeIds,groupSize:i.depth===0?k.length:((C=(h=i.parentNode)==null?void 0:h.subNodeIds)==null?void 0:C.length)??0,indexInGroup:i.indexInGroup,parentNodeId:(x=i.parentNode)==null?void 0:x.nodeProps.nodeId,scrollToParent:i.parentNode?()=>{var S;const j=(S=i.parentNode)==null?void 0:S.nodeProps.nodeId,v=l.findIndex(A=>A.nodeProps.nodeId===j);M(v)}:void 0,size:f}},N(i.nodeProps))},[k.length,l,N,f]),[y,M]=r.useState(),_=r.useRef(l);r.useEffect(()=>{_.current=l},[l]),r.useEffect(()=>{setTimeout(()=>{var g;if(y!==void 0){const i=_.current[y].nodeProps.nodeId,h=(g=u.current)==null?void 0:g.ownerDocument.querySelector(`#${i}`);h==null||h.focus(),M(void 0)}})},[y]);const R=g=>{var h,C;if((h=u.current)!=null&&h.contains(g.relatedTarget))return;const i=s();i.length>0&&((C=i[e.current])==null||C.focus())};return r.createElement(r.Fragment,null,t?r.createElement(le,{flatNodesList:l,itemRenderer:$,scrollToIndex:y,onFocus:R,onKeyDown:o,ref:u,className:m,style:n,...d}):r.createElement(Z,{onKeyDown:o,onFocus:R,className:m,"data-iui-size":f==="small"?"small":void 0,style:n,ref:u,...d},l.map((g,i)=>$(i))))},Z=Q.ul("iui-tree",{role:"tree",tabIndex:0}),le=r.forwardRef(({flatNodesList:b,itemRenderer:c,scrollToIndex:m,className:N,style:E,...f},t)=>{const{outerProps:n,innerProps:d,visibleChildren:u}=ee({itemsLength:b.length,itemRenderer:c,scrollToIndex:m});return r.createElement(I,{...n,className:B(N,n.className),style:{...E,...n.style}},r.createElement(Z,{...d,...f,ref:X(t,d.ref)},u))}),H=r.forwardRef((b,c)=>{var t;const{isExpanded:m,...N}=b,f=(((t=r.useContext(O))==null?void 0:t.size)??"default")==="small"?oe:se;return r.createElement(Y,{styleType:"borderless",size:"small","aria-label":m?"Collapse":"Expand",ref:c,...N},r.createElement(f,{className:B("iui-tree-node-content-expander-icon",{"iui-tree-node-content-expander-icon-expanded":m})}))}),z=b=>{const{nodeId:c,label:m,sublabel:N,children:E,className:f,icon:t,hasSubNodes:n=!1,isDisabled:d=!1,isExpanded:u=!1,isSelected:e=!1,onSelected:s,onExpanded:o,checkbox:l,expander:k,...$}=b,{nodeDepth:y,subNodeIds:M=[],parentNodeId:_,scrollToParent:R,groupSize:g,indexInGroup:i}=ae(),[h,C]=r.useState(!1),x=r.useRef(null),j=S=>{var F,V,w,K,q,W;if(S.altKey)return;const A=x.current===((F=x.current)==null?void 0:F.ownerDocument.activeElement);switch(S.key){case"ArrowLeft":{if(S.preventDefault(),A){if(u){o(c,!1);break}if(_){R==null||R();break}break}const D=G(x.current),L=D.indexOf((V=x.current)==null?void 0:V.ownerDocument.activeElement);L===0?(w=x.current)==null||w.focus():(K=D[L-1])==null||K.focus();break}case"ArrowRight":{S.preventDefault();const D=G(x.current);if(A){if(!u&&n){o(c,!0);break}(q=D[0])==null||q.focus();break}const L=D.indexOf((W=x.current)==null?void 0:W.ownerDocument.activeElement);if(L<D.length-1){D[L+1].focus();break}break}case" ":case"Spacebar":case"Enter":{if(S.target!==x.current)break;S.preventDefault(),d||s==null||s(c,!e);break}}},v=r.useCallback(S=>{o(c,!u),S.stopPropagation()},[u,c,o]);return r.createElement(I,{as:"li",role:"treeitem",className:B("iui-tree-item",f),id:c,"aria-expanded":n?u:void 0,"aria-disabled":d,"aria-selected":e,"aria-level":y+1,"aria-setsize":g,"aria-posinset":i+1,tabIndex:-1,onFocus:S=>{C(!0),S.stopPropagation()},onBlur:()=>{C(!1)},ref:x,onKeyDown:j,...$},r.createElement(I,{className:B("iui-tree-node",{"iui-active":e,"iui-disabled":d}),style:{"--level":y},onClick:()=>!d&&(s==null?void 0:s(c,!e))},l&&r.createElement(I,{className:"iui-tree-node-checkbox"},r.isValidElement(l)?r.cloneElement(l,{tabIndex:h?0:-1}):l),r.createElement(I,{className:"iui-tree-node-content"},n&&k,n&&!k&&r.createElement(H,{isExpanded:u,disabled:d,onClick:v,tabIndex:h?0:-1}),t&&r.createElement(I,{as:"span",className:"iui-tree-node-content-icon","aria-hidden":!0},t),r.createElement(I,{className:"iui-tree-node-content-label"},r.createElement(I,{className:"iui-tree-node-content-title"},m),N&&r.createElement(I,{className:"iui-tree-node-content-caption"},N)),E)),n&&r.createElement(I,{as:"ul",className:"iui-sub-tree",role:"group","aria-owns":M.join(" ")}))},Ne={title:"Tree"},me=()=>{const[b,c]=a.useState({"Node-2":!0,"Node-2-1":!0,"Node-3":!0}),m=a.useCallback((t,n)=>{n?(c(d=>({...d,[t]:!0})),console.log(`Expanded node ${t}`)):(c(d=>({...d,[t]:!1})),console.log(`Closed node ${t}`))},[]),N=a.useCallback((t,n="",d=0)=>{const u=n?`${n}-${t}`:`${t}`;return{id:`Node-${u}`,label:`Node ${u}`,sublabel:`Sublabel for Node ${u}`,subItems:d<10?Array(Math.round(t%5)).fill(null).map((e,s)=>N(s,u,d+1)):[]}},[]),E=a.useMemo(()=>Array(8).fill(null).map((t,n)=>N(n)),[N]),f=a.useCallback(t=>({subNodes:t.subItems,nodeId:t.id,node:t,isExpanded:b[t.id],hasSubNodes:t.subItems.length>0}),[b]);return p.jsx(T,{data:E,getNode:f,nodeRenderer:a.useCallback(({node:t,...n})=>p.jsx(z,{label:t.label,sublabel:t.sublabel,onExpanded:m,icon:p.jsx(P,{}),...n}),[m])})},fe=()=>{const[b,c]=a.useState({"Node-0":!0,"Node-3-2":!0,"Node-22":!0}),m=a.useCallback((e,s)=>{s?(c(o=>({...o,[e]:!0})),console.log(`Selected node ${e}`)):(c(o=>({...o,[e]:!1})),console.log(`Unselected node ${e}`))},[]),[N,E]=a.useState({"Node-2":!0,"Node-2-1":!0,"Node-3":!0}),f=a.useCallback((e,s)=>{s?(E(o=>({...o,[e]:!0})),console.log(`Expanded node ${e}`)):(E(o=>({...o,[e]:!1})),console.log(`Closed node ${e}`))},[]),[t]=a.useState({"Node-4":!0,"Node-3-0":!0,"Node-6":!0,"Node-10":!0}),n=a.useCallback((e,s="",o=0)=>{const l=s?`${s}-${e}`:`${e}`;return{id:`Node-${l}`,label:`Node ${l}`,sublabel:`Sublabel for Node ${l}`,subItems:o<10?Array(Math.round(e%5)).fill(null).map((k,$)=>n($,l,o+1)):[]}},[]),d=a.useMemo(()=>Array(8).fill(null).map((e,s)=>n(s)),[n]),u=a.useCallback(e=>({subNodes:e.subItems,nodeId:e.id,node:e,isExpanded:N[e.id],isDisabled:t[e.id],isSelected:b[e.id],hasSubNodes:e.subItems.length>0}),[t,N,b]);return p.jsx(T,{data:d,getNode:u,nodeRenderer:a.useCallback(({node:e,...s})=>p.jsx(z,{label:e.label,sublabel:e.sublabel,onExpanded:f,onSelected:m,checkbox:p.jsx(U,{variant:"eyeball",disabled:s.isDisabled}),icon:p.jsx(P,{}),...s}),[f,m])})},pe=()=>{const b=a.useCallback(e=>({id:`Node-${e}`,label:`Node ${e}`,subItems:[],hasSubNodes:!0}),[]),[c,m]=a.useState(()=>Array(8).fill(null).map((e,s)=>b(s))),[N,E]=a.useState({}),f=a.useCallback((e,s)=>{s?(E(o=>({...o,[e]:!0})),console.log(`Selected node ${e}`)):(E(o=>({...o,[e]:!1})),console.log(`Unselected node ${e}`))},[]),[t,n]=a.useState({}),d=a.useCallback((e,s,o)=>{s&&!o.subItems.length&&o.hasSubNodes&&setTimeout(()=>{m(l=>{const k=[...l],$=k.find(y=>y.id===e);return $?($.subItems=[{id:`Async-${e}`,label:`Async ${e}`,subItems:[]}],k):l})},1e3),s?(n(l=>({...l,[e]:!0})),console.log(`Expanded node ${e}`)):(n(l=>({...l,[e]:!1})),console.log(`Closed node ${e}`))},[]),u=a.useCallback(e=>({subNodes:!e.subItems.length&&e.hasSubNodes?[{id:`Async-${e.id}`,label:"",subItems:[],isLoading:!0}]:e.subItems,nodeId:e.id,node:e,isExpanded:t[e.id],isSelected:N[e.id],hasSubNodes:!!e.hasSubNodes}),[t,N]);return p.jsx(T,{data:c,getNode:u,nodeRenderer:a.useCallback(({node:e,...s})=>p.jsx(z,{label:e.isLoading?"Loading...":e.label,onExpanded:(o,l)=>d(o,l,e),onSelected:f,checkbox:p.jsx(U,{variant:"eyeball",disabled:s.isDisabled}),icon:e.isLoading?p.jsx(te,{size:"x-small",indeterminate:!0}):p.jsx(P,{}),...s}),[d,f])})},xe=()=>{const[b,c]=a.useState({"Node-0":!0,"Node-3-2":!0,"Node-22":!0}),m=a.useCallback((s,o)=>{o?(c(l=>({...l,[s]:!0})),console.log(`Selected node ${s}`)):(c(l=>({...l,[s]:!1})),console.log(`Unselected node ${s}`))},[]),[N,E]=a.useState({"Node-2":!0,"Node-2-1":!0,"Node-3":!0}),f=a.useCallback((s,o)=>{o?(E(l=>({...l,[s]:!0})),console.log(`Expanded node ${s}`)):(E(l=>({...l,[s]:!1})),console.log(`Closed node ${s}`))},[]),[t]=a.useState({"Node-4":!0,"Node-3":!0,"Node-6":!0,"Node-10":!0}),n=a.useCallback(s=>Object.keys(t).some(o=>s===o||s.startsWith(`${o}-`)),[t]),d=a.useCallback((s,o="",l=0)=>{const k=o?`${o}-${s}`:`${s}`;return{id:`Node-${k}`,label:`Node ${k}`,sublabel:`Sublabel for Node ${k}`,subItems:l<10?Array(Math.round(s%5)).fill(null).map(($,y)=>d(y,k,l+1)):[]}},[]),u=a.useMemo(()=>Array(8).fill(null).map((s,o)=>d(o)),[d]),e=a.useCallback(s=>({subNodes:s.subItems,nodeId:s.id,node:s,isExpanded:N[s.id],isDisabled:n(s.id),isSelected:b[s.id],hasSubNodes:s.subItems.length>0}),[N,n,b]);return p.jsx(T,{data:u,getNode:e,nodeRenderer:a.useCallback(({node:s,...o})=>p.jsx(z,{label:s.label,sublabel:s.sublabel,onExpanded:f,onSelected:m,checkbox:p.jsx(U,{variant:"eyeball",disabled:o.isDisabled}),icon:p.jsx(P,{}),expander:p.jsx(H,{isExpanded:o.isExpanded,onClick:l=>{f(s.id,!o.isExpanded),l.stopPropagation()}}),...o}),[f,m])})},Ee=()=>{const[b,c]=a.useState({"Node-0":!0,"Node-3-2":!0,"Node-22":!0}),m=a.useCallback((e,s)=>{s?(c(o=>({...o,[e]:!0})),console.log(`Selected node ${e}`)):(c(o=>({...o,[e]:!1})),console.log(`Unselected node ${e}`))},[]),[N,E]=a.useState({"Node-2":!0,"Node-2-1":!0,"Node-3":!0}),f=a.useCallback((e,s)=>{s?(E(o=>({...o,[e]:!0})),console.log(`Expanded node ${e}`)):(E(o=>({...o,[e]:!1})),console.log(`Closed node ${e}`))},[]),[t]=a.useState({"Node-4":!0,"Node-3-0":!0,"Node-6":!0,"Node-10":!0}),n=a.useCallback((e,s="",o=0)=>{const l=s?`${s}-${e}`:`${e}`;return{id:`Node-${l}`,label:`Node ${l}`,sublabel:`Sublabel for Node ${l}`,subItems:o<10?Array(Math.round(e%5)).fill(null).map((k,$)=>n($,l,o+1)):[]}},[]),d=a.useMemo(()=>Array(1e5).fill(null).map((e,s)=>n(s)),[n]),u=a.useCallback(e=>({subNodes:e.subItems,nodeId:e.id,node:e,isExpanded:N[e.id],isDisabled:t[e.id],isSelected:b[e.id],hasSubNodes:e.subItems.length>0}),[t,N,b]);return p.jsx("div",{style:{height:"min(400px, 90vh)",overflow:"auto"},children:p.jsx(T,{data:d,getNode:u,enableVirtualization:!0,nodeRenderer:a.useCallback(({node:e,...s})=>p.jsx(z,{label:e.label,sublabel:e.sublabel,onExpanded:f,onSelected:m,checkbox:p.jsx(U,{variant:"eyeball",disabled:s.isDisabled}),icon:p.jsx(P,{}),...s}),[f,m])})})},ge=()=>{const[b,c]=a.useState({"Node-2":!0,"Node-2-1":!0,"Node-3":!0}),m=a.useCallback((t,n)=>{n?(c(d=>({...d,[t]:!0})),console.log(`Expanded node ${t}`)):(c(d=>({...d,[t]:!1})),console.log(`Closed node ${t}`))},[]),N=a.useCallback((t,n="",d=0)=>{const u=n?`${n}-${t}`:`${t}`;return{id:`Node-${u}`,label:`Node ${u}`,sublabel:`Sublabel for Node ${u}`,subItems:d<10?Array(Math.round(t%5)).fill(null).map((e,s)=>N(s,u,d+1)):[]}},[]),E=a.useMemo(()=>Array(8).fill(null).map((t,n)=>N(n)),[N]),f=a.useCallback(t=>({subNodes:t.subItems,nodeId:t.id,node:t,isExpanded:b[t.id],hasSubNodes:t.subItems.length>0}),[b]);return p.jsx(T,{data:E,size:"small",getNode:f,nodeRenderer:a.useCallback(({node:t,...n})=>p.jsx(z,{label:t.label,sublabel:t.sublabel,onExpanded:m,icon:p.jsx(P,{}),...n}),[m])})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{pe as AsyncLoading,me as Basic,xe as CustomizedExpander,fe as Full,ge as Small,Ee as Virtualized,Ne as default};
