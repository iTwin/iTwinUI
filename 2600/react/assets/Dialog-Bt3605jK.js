import{r as e,Y as N,l as A,q as le,B as L,c as R,p as M,m as se,I as ne,f as j,k as ie,h as I,e as Z,K as ae,F as oe,Z as ue}from"./index-DxK2kHbH.js";import{u as ce}from"./useEventListener-BW9zRg31.js";import{g as fe}from"./focusable-g8mFEPTA.js";const me=l=>e.createElement("div",{style:{position:"absolute",inset:-6,display:"grid",pointerEvents:"none"}},e.createElement(de,null),e.createElement(pe,l));let pe=l=>{let{elementRef:r,containerRef:t,onResizeStart:a,onResizeEnd:d}=l,b=e.useRef(!1),n=s=>{if(!r.current||s.button!==0)return;let u=s.clientX,D=s.clientY,[g,v]=N(r.current),{width:h,height:m}=r.current.getBoundingClientRect(),p=`${h}px`,w=`${m}px`,i=g,c=v,E=parseFloat(getComputedStyle(r.current).minWidth);Number.isNaN(E)&&(E=380);let x=parseFloat(getComputedStyle(r.current).minHeight),S=s.currentTarget.dataset.iuiResizer,o=r.current.ownerDocument||document,T=o.body.style.userSelect;o.body.style.userSelect="none";let Y=B=>{var C;if(!r.current)return;b.current||(b.current=!0,a==null||a());let z=(C=t==null?void 0:t.current)==null?void 0:C.getBoundingClientRect(),F=A(B.clientX,(z==null?void 0:z.left)??0,(z==null?void 0:z.right)??o.documentElement.clientWidth??0),H=A(B.clientY,(z==null?void 0:z.top)??0,(z==null?void 0:z.bottom)??o.documentElement.clientHeight??0),$=u-F,P=D-H;switch(S){case"top-left":{let y=m+P;y>=x&&(w=r.current.style.height=`${y}px`,c=v-P);let O=h+$;O>=E&&(p=r.current.style.width=`${O}px`,i=g-$),r.current.style.transform=`translate(${i}px, ${c}px)`;break}case"top":{let y=m+P;if(y<x)break;w=r.current.style.height=`${y}px`,c=v-P,r.current.style.transform=`translate(${i}px, ${c}px)`;break}case"top-right":{let y=m+P;y>=x&&(w=r.current.style.height=`${y}px`,c=v-P),p=r.current.style.width=`${h-$}px`,r.current.style.transform=`translate(${i}px, ${c}px)`;break}case"right":p=r.current.style.width=`${h-$}px`,w=r.current.style.height=`${m}px`,r.current.style.transform=`translate(${i}px, ${c}px)`;break;case"bottom-right":p=r.current.style.width=`${h-$}px`,w=r.current.style.height=`${m-P}px`,r.current.style.transform=`translate(${i}px, ${c}px)`;break;case"bottom":w=r.current.style.height=`${m-P}px`,r.current.style.transform=`translate(${i}px, ${c}px)`;break;case"bottom-left":{let y=h+$;y>=E&&(p=r.current.style.width=`${y}px`,i=g-$),w=r.current.style.height=`${m-P}px`,r.current.style.transform=`translate(${i}px, ${c}px)`;break}case"left":{let y=h+$;if(y<E)break;p=r.current.style.width=`${y}px`,w=r.current.style.height=`${m}px`,i=g-$,r.current.style.transform=`translate(${i}px, ${c}px)`;break}}};o.addEventListener("pointermove",Y),o.addEventListener("pointerup",()=>{o.removeEventListener("pointermove",Y),r.current&&(o.body.style.userSelect=T,b.current=!1,d==null||d({width:p,height:w,transform:`translate(${i}px, ${c}px)`}))},{once:!0})};return e.createElement(e.Fragment,null,e.createElement("div",{"data-iui-resizer":"top-left",onPointerDown:n,style:{cursor:"nw-resize"}}),e.createElement("div",{"data-iui-resizer":"top",onPointerDown:n,style:{cursor:"n-resize"}}),e.createElement("div",{"data-iui-resizer":"top-right",onPointerDown:n,style:{cursor:"ne-resize"}}),e.createElement("div",{"data-iui-resizer":"right",onPointerDown:n,style:{cursor:"e-resize"}}),e.createElement("div",{"data-iui-resizer":"bottom-right",onPointerDown:n,style:{cursor:"se-resize"}}),e.createElement("div",{"data-iui-resizer":"bottom",onPointerDown:n,style:{cursor:"s-resize"}}),e.createElement("div",{"data-iui-resizer":"bottom-left",onPointerDown:n,style:{cursor:"sw-resize"}}),e.createElement("div",{"data-iui-resizer":"left",onPointerDown:n,style:{cursor:"w-resize"}}))},de=e.memo(()=>e.createElement("style",null,ge)),ge=`
[data-iui-resizer] {
  pointer-events: auto;
  grid-area: 1 / 1 / -1 / -1;
  width: 12px;
  height: 12px;
  z-index: 1;
}
[data-iui-resizer='top'],
[data-iui-resizer='bottom'] {
  height: 8px;
  width: auto;
  z-index: 0;
}
[data-iui-resizer='left'],
[data-iui-resizer='right'] {
  height: auto;
  width: 8px;
  z-index: 0;
}
[data-iui-resizer^='top'] {
  align-self: start;
}
[data-iui-resizer^='bottom'] {
  align-self: end;
}
[data-iui-resizer$='left'] {
  justify-self: start;
}
[data-iui-resizer$='right'] {
  justify-self: end;
}`;const be=l=>{let{children:r}=l,t=e.useRef(null),a=e.useCallback(()=>{var g;let n=(g=t.current)==null?void 0:g.nextElementSibling,s=fe(n),u=s[0],D=s[(s.length||1)-1];return[u,D]},[]),d=e.useCallback(n=>{let[s,u]=a();n.relatedTarget===s?u==null||u.focus():s==null||s.focus()},[a]),b=e.useCallback(n=>{let[s,u]=a();n.relatedTarget===u?s==null||s.focus():u==null||u.focus()},[a]);return e.createElement(e.Fragment,null,e.createElement("div",{ref:t,tabIndex:0,onFocus:d,"aria-hidden":!0}),r,e.createElement("div",{tabIndex:0,onFocus:b,"aria-hidden":!0}))},he=l=>e.createElement(le,l,e.createElement("path",{d:"m14 0-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6 6-6"})),ye=e.forwardRef((l,r)=>{let{isVisible:t=!0,className:a,...d}=l;return e.createElement(L,{className:R("iui-backdrop",{"iui-backdrop-visible":t},a),ref:r,...d})}),Q=e.createContext(void 0),V=()=>e.useContext(Q),_=e.createContext(null),ee=()=>e.useContext(_),G=M.div("iui-dialog-title"),te=e.createContext(void 0),we=()=>({...e.useContext(te)}),Ee=Object.assign(e.forwardRef((l,r)=>{let t=V(),a=ee(),{children:d,titleText:b,isDismissible:n=t==null?void 0:t.isDismissible,onClose:s=t==null?void 0:t.onClose,isDraggable:u=t==null?void 0:t.isDraggable,className:D,onPointerDown:g,...v}=l,{onPointerDown:h}=we(),m=e.useCallback(p=>{a==null||a.beforeClose(),s==null||s(p)},[a,s]);return e.createElement(L,{className:R("iui-dialog-title-bar",D,{"iui-dialog-title-bar-filled":u}),ref:r,onPointerDown:se(g,h),...v},d||e.createElement(e.Fragment,null,e.createElement(G,null,b),n&&e.createElement(ne,{size:"small",styleType:"borderless",onClick:m,"aria-label":"Close","data-iui-shift":"right"},e.createElement(he,null))))}),{Title:G}),De=M.div("iui-dialog-content"),ve=e.forwardRef((l,r)=>{let t=V(),a=ee(),{isVisible:d=t==null?void 0:t.isOpen,isDismissible:b=t==null?void 0:t.isDismissible,onClose:n=t==null?void 0:t.onClose,closeOnExternalClick:s=t==null?void 0:t.closeOnExternalClick,relativeTo:u=t==null?void 0:t.relativeTo,onMouseDown:D,className:g,style:v,...h}=l,m=e.useRef(null),p=j(m,r),w=i=>{i.persist(),i.target===m.current&&(b&&s&&n&&(a==null||a.beforeClose(),n(i)),D==null||D(i))};return e.createElement(ye,{isVisible:d,className:R({"iui-backdrop-fixed":u==="viewport"},g),ref:p,onMouseDown:w,style:{pointerEvents:"auto",...v},...h})}),xe=M.div("iui-dialog-button-bar");let J=l=>{var t,a,d;let r=(t=l==null?void 0:l.current)==null?void 0:t.getBoundingClientRect();return{top:(r==null?void 0:r.top)??0,right:(r==null?void 0:r.right)??((a=I())==null?void 0:a.innerWidth)??0,bottom:(r==null?void 0:r.bottom)??((d=I())==null?void 0:d.innerHeight)??0,left:(r==null?void 0:r.left)??0}};const ze=(l,r,t=!0)=>{let a=e.useRef(0),d=e.useRef(0),b=e.useRef(void 0),n=e.useRef(void 0),s=e.useRef(J(r)),u=e.useCallback(()=>{var T;if(!l.current||!t)return;let{top:i,right:c,bottom:E,left:x}=(T=l.current)==null?void 0:T.getBoundingClientRect(),[S,o]=N(l.current);s.current=J(r),E>s.current.bottom&&(o-=E-s.current.bottom),i<s.current.top&&(o+=s.current.top-i),c>s.current.right&&(S-=c-s.current.right),x<s.current.left&&(S+=s.current.left-x),b.current=S,n.current=o,l.current.style.transform=`translate(${S}px, ${o}px)`},[r,l,t]),[D,g]=ie(u);D(r==null?void 0:r.current),e.useEffect(()=>()=>{g==null||g.disconnect()},[g]),ce("resize",()=>{u(),b.current!=null&&n.current!=null&&h(`translate(${b.current}px, ${n.current}px)`)},I());let[v,h]=e.useState(""),m=e.useRef(i=>{if(!l.current)return;let c=i.clientX-a.current,E=i.clientY-d.current;l.current.style.transform=`translate(${c}px, ${E}px)`,u()}),p=e.useRef("");return{onPointerDown:e.useCallback(i=>{if(!l.current||i.button!==0||!t)return;let[c,E]=N(l.current);a.current=i.clientX-c,d.current=i.clientY-E,p.current=l.current.style.userSelect,l.current.style.userSelect="none";let x=l.current.ownerDocument||document;x.addEventListener("pointermove",m.current),x.addEventListener("pointerup",()=>{h(`translate(${b.current}px, ${n.current}px)`),x.removeEventListener("pointermove",m.current),l.current&&(l.current.style.userSelect=p.current)},{once:!0})},[l,t]),transform:v}},$e=e.forwardRef((l,r)=>{let t=V(),{className:a,children:d,styleType:b="default",isOpen:n=t==null?void 0:t.isOpen,isDismissible:s=t==null?void 0:t.isDismissible,onClose:u=t==null?void 0:t.onClose,closeOnEsc:D=t==null?void 0:t.closeOnEsc,trapFocus:g=t==null?void 0:t.trapFocus,setFocus:v=t==null?void 0:t.setFocus,preventDocumentScroll:h=t==null?void 0:t.preventDocumentScroll,onKeyDown:m,isDraggable:p=t==null?void 0:t.isDraggable,isResizable:w=t==null?void 0:t.isResizable,style:i,placement:c=t==null?void 0:t.placement,...E}=l,{dialogRootRef:x,setDialogElement:S}=t||{},o=e.useRef(null),T=e.useRef(null),[Y,B]=e.useState(),z=e.useRef(!1),F=e.useRef("");Z(()=>{n&&(F.current=document.body.style.overflow)},[n]),e.useEffect(()=>{var k;let f=(k=o.current)==null?void 0:k.ownerDocument;if(!(!f||!h||F.current==="hidden"))return n?f.body.style.overflow="hidden":f.body.style.overflow=F.current,()=>{f.body.style.overflow=F.current}},[o,n,h]);let H=f=>{f.altKey||(f.persist(),s&&D&&f.key==="Escape"&&u&&(W(),u(f)),m==null||m(f))},{onPointerDown:$,transform:P}=ze(o,x,p),C=e.useCallback(f=>{p&&$(f)},[p,$]);Z(()=>{if(!p||!n)return;let[f,k]=N(o.current);B(X=>{var U,q;return{...X,insetInlineStart:(U=o.current)==null?void 0:U.offsetLeft,insetBlockStart:(q=o.current)==null?void 0:q.offsetTop,transform:`translate(${f}px,${k}px)`}})},[o,p,n]);let y=e.useCallback(f=>{B(k=>({...k,...f}))},[]),O=e.useCallback(()=>{var f,k;T.current=(f=o.current)==null?void 0:f.ownerDocument.activeElement,v&&((k=o.current)==null||k.focus({preventScroll:!0}))},[v]),W=e.useCallback(()=>{var f,k,X;(k=o.current)!=null&&k.contains((f=o.current)==null?void 0:f.ownerDocument.activeElement)&&((X=T.current)==null||X.focus())},[o,T]),re=e.useCallback(f=>{f&&O()},[O]),K=e.createElement(L,{className:R("iui-dialog",{"iui-dialog-default":b==="default","iui-dialog-full-page":b==="fullPage","iui-dialog-visible":n,"iui-dialog-draggable":p},a),role:"dialog",ref:j(o,re,S,r),onKeyDown:H,tabIndex:-1,"data-iui-placement":c,style:{transform:P,...Y,...i},...E},e.createElement(ae,null,e.createElement("slot",null),w&&e.createElement(me,{elementRef:o,containerRef:x,onResizeStart:()=>{z.current||(z.current=!0,y({maxInlineSize:"100%"}))},onResizeEnd:y})),d);return e.createElement(_.Provider,{value:e.useMemo(()=>({beforeClose:W}),[W])},e.createElement(te.Provider,{value:{onPointerDown:C}},g&&e.createElement(be,null,K),!g&&K))});let ke=e.forwardRef((l,r)=>{let{trapFocus:t=!1,setFocus:a=t,preventDocumentScroll:d=!1,isOpen:b=!1,isDismissible:n=!0,closeOnEsc:s=!0,closeOnExternalClick:u=!1,onClose:D,isDraggable:g=!1,isResizable:v=!1,relativeTo:h="viewport",placement:m,className:p,portal:w=!1,...i}=l,c=e.useRef(null),[E,x]=e.useState(null),S=j(r,c);return b?e.createElement(Q.Provider,{value:{isOpen:b,onClose:D,closeOnEsc:s,closeOnExternalClick:u,isDismissible:n,preventDocumentScroll:d,trapFocus:t,setFocus:a,isDraggable:g,isResizable:v,relativeTo:h,placement:m,dialogRootRef:c,setDialogElement:x}},e.createElement(oe,{portal:w},e.createElement(ue.Provider,{value:E},e.createElement(L,{className:R("iui-dialog-wrapper",p),"data-iui-relative":h==="container",ref:S,...i})))):null});const Fe=Object.assign(ke,{Backdrop:ve,Main:$e,TitleBar:Ee,Content:De,ButtonBar:xe});export{Fe as D,De as a,xe as b};
