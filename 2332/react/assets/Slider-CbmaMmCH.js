import{r as t,B as N,c as T,T as ce,e as me,k as R}from"./index-ZG0WEztO.js";import{u as G}from"./useEventListener-CWiQcQZ1.js";function fe(r,n){return n==="odd-segments"&&(r+1)%2===0||n==="even-segments"&&r%2===0}function J(r,n,e){let l=[],i=[...r];if(i.sort((m,p)=>m-p),i.length===0||i[0]<n||i[i.length-1]>e||n===e)return[];let s=n;for(let m=0;m<i.length;m++)l.push({left:s,right:i[m]}),s=i[m];return l.push({left:s,right:e}),l}const de=r=>{let{className:n,trackDisplayMode:e,sliderMin:l,sliderMax:i,values:s,orientation:m}=r,[p,w]=t.useState(()=>J(s,l,i));return t.useEffect(()=>{w(J(s,l,i))},[s,l,i]),t.createElement(t.Fragment,null,e!=="none"&&p.map((V,h)=>{let v=V.left>=l&&i!==l?100*(V.left-l)/(i-l):0,M=V.right>=l&&i!==l?100-100*(V.right-l)/(i-l):100;return t.createElement(t.Fragment,{key:h},fe(h,e)?t.createElement(N,{className:T("iui-slider-track",n),style:{...m==="horizontal"?{insetInlineStart:`${v}%`,insetInlineEnd:`${M}%`}:{insetBlockStart:`${M}%`,insetBlockEnd:`${v}%`}}}):null)}))},ge=r=>{let{value:n,index:e,minVal:l,maxVal:i,step:s,sliderMin:m,sliderMax:p,isActive:w,onThumbActivated:V,onThumbValueChanged:h,tooltipProps:v,thumbProps:M,disabled:o}=r,g=t.useRef(null),P=t.useCallback((b,k)=>{if(!(o||b.altKey)){switch(b.key){case"ArrowLeft":case"ArrowDown":h(e,Math.max(n-s,l),k);break;case"ArrowRight":case"ArrowUp":h(e,Math.min(n+s,i),k);break;case"Home":h(e,l,k);break;case"End":h(e,i,k);break;default:return}b.preventDefault()}},[o,h,e,n,s,l,i]),F=t.useCallback(()=>{o||V(e)},[o,e,V]),y=t.useMemo(()=>n<m?m:n>p?p:n,[p,m,n]),C=t.useMemo(()=>p===m?0:100*(y-m)/(p-m),[y,p,m]),{style:L,className:$,...A}=M||{};return t.createElement(ce,{placement:"top",autoUpdateOptions:{animationFrame:!0},ariaStrategy:"none",...v},t.createElement(N,{...A,ref:me(g,M==null?void 0:M.ref),style:{...L,"--iui-slider-thumb-position":`${C}%`},className:T("iui-slider-thumb",{"iui-active":w},$),role:"slider",tabIndex:o?void 0:0,"aria-valuemin":l,"aria-valuenow":n,"aria-valuemax":i,"aria-disabled":o,onPointerDown:F,onKeyDown:b=>P(b,!1),onKeyUp:b=>P(b,!0)}))};let Q=(r,n,e,l)=>{if(l==="horizontal")return(R(n,r.left,r.right)-r.left)/r.width;let i=R(e,r.top,r.bottom);return(r.bottom-i)/r.height},pe=(r,n)=>{if(r.length===1)return 0;let e=r.map(i=>Math.abs(i-n)),l=Math.min(...e);return e.indexOf(l)},U=(r,n)=>r!=="auto"?r:n.length%2?"even-segments":"odd-segments",W=(r,n,e)=>Math.round((r-e)/n)*n+e,be=(r,n,e)=>Number.isInteger(n)?r.toFixed(0):r.toFixed(e),he=(r,n)=>{var l;let e=r.ownerDocument;if(!r.contains(e.activeElement)||Number((l=e.activeElement)==null?void 0:l.getAttribute("data-index"))!==n){let i=r.querySelector(`[data-index="${n}"]`);i&&i.focus()}};const Ee=t.forwardRef((r,n)=>{var q,H;let{min:e=0,max:l=100,values:i,step:s=1,tooltipProps:m,disabled:p=!1,tickLabels:w,minLabel:V,maxLabel:h,trackDisplayMode:v="auto",thumbMode:M="inhibit-crossing",onChange:o,onUpdate:g,thumbProps:P,className:F,trackContainerProps:y,minProps:C,maxProps:L,trackProps:$,tickProps:A,ticksProps:b,orientation:k="horizontal",...Z}=r,[c,I]=t.useState(i);t.useEffect(()=>{I(i)},[i]);let[z,_]=t.useState(()=>V??e.toString());t.useEffect(()=>{_(V??e.toString())},[V,e]);let[X,ee]=t.useState(()=>h??l.toString());t.useEffect(()=>{ee(h??l.toString())},[h,l]);let[te,le]=t.useState(()=>U(v,c));t.useEffect(()=>{le(U(v,c))},[v,c]);let D=t.useRef(null),Y=t.useMemo(()=>{let a=s.toString(),u=a.indexOf(".");return a.length-(u+1)},[s]),B=t.useCallback(a=>{if(M==="inhibit-crossing"){let u=a===0?e:c[a-1]+s,f=a<c.length-1?c[a+1]-s:l;return[u,f]}return[e,l]},[l,e,s,M,c]),[E,j]=t.useState(void 0),O=t.useCallback((a,u)=>{if(D.current&&E!==void 0){let f=Q(D.current.getBoundingClientRect(),a.clientX,a.clientY,k),d=e+(l-e)*f;d=W(d,s,e);let[x,K]=B(E);if(d=R(d,x,K),d!==c[E]){let S=[...c];S[E]=d,I(S),u==="onChange"?o==null||o(S):g==null||g(S)}else u==="onChange"&&(o==null||o(c))}},[E,e,l,s,B,c,g,o,k]),ae=t.useCallback(a=>{E!==void 0&&(a.preventDefault(),a.stopPropagation(),O(a,"onUpdate"))},[E,O]),re=t.useCallback((a,u,f)=>{if(!(c[a]===u&&!f))if(f)o==null||o(c);else{let d=[...c];d[a]=u,g==null||g(d),I(d)}},[c,g,o]),ne=t.useCallback(a=>{j(a)},[]),ie=t.useCallback(a=>{E!==void 0&&(O(a,"onChange"),j(void 0),a.preventDefault(),a.stopPropagation())},[E,O]),se=t.useCallback(a=>{if(D.current){let u=Q(D.current.getBoundingClientRect(),a.clientX,a.clientY,k),f=e+(l-e)*u;f=W(f,s,e);let d=pe(c,f),[x,K]=B(d);if(f=R(f,x,K),f===c[d])return;let S=[...c];S[d]=f,I(S),o==null||o(S),g==null||g(S),he(D.current,d),a.preventDefault(),a.stopPropagation()}},[e,l,s,c,B,o,g,k]);G("pointermove",ae,(q=D.current)==null?void 0:q.ownerDocument),G("pointerup",ie,(H=D.current)==null?void 0:H.ownerDocument);let ue=t.useMemo(()=>w?Array.isArray(w)?t.createElement(N,{as:"div",...b,className:T("iui-slider-ticks",b==null?void 0:b.className)},w.map((a,u)=>t.createElement(N,{as:"span",...A,key:u,className:T("iui-slider-tick",A==null?void 0:A.className)},a))):w:null,[w,A,b]),oe=t.useCallback((a,u)=>{let f=m?m(a,u,s):{};return{...f,content:f.content?f.content:be(u,s,Y)}},[Y,s,m]);return t.createElement(N,{ref:n,className:T("iui-slider-container",F),"data-iui-orientation":k,"data-iui-disabled":p?"true":void 0,...Z},z&&t.createElement(N,{as:"span",...C,className:T("iui-slider-min",C==null?void 0:C.className)},z),t.createElement(N,{ref:D,...y,className:T("iui-slider",{"iui-grabbing":E!==void 0},y==null?void 0:y.className),onPointerDown:se},c.map((a,u)=>{let[f,d]=B(u),x=P==null?void 0:P(u);return t.createElement(ge,{key:(x==null?void 0:x.id)??u,index:u,disabled:p,isActive:E===u,onThumbActivated:ne,onThumbValueChanged:re,minVal:f,maxVal:d,value:a,tooltipProps:oe(u,a),thumbProps:x,step:s,sliderMin:e,sliderMax:l})}),t.createElement(de,{trackDisplayMode:te,sliderMin:e,sliderMax:l,values:c,orientation:k,...$})),ue,X&&t.createElement(N,{as:"span",...L,className:T("iui-slider-max",L==null?void 0:L.className)},X))});export{Ee as S};
