import{r as t,o as re,D as de,p as ue,d as ce,e as se,K as ie,I as be,c as y,B as w,m as W,j as x}from"./index-ZG0WEztO.js";import{S as F}from"./Placeholder-BEv5IjaU.js";import{a as O}from"./focusable-LKR0keZU.js";import{u as me}from"./useVirtualScroll-C709BmsB.js";import{S as Ne}from"./SvgChevronRight-mvlcsb6f.js";import{C as U}from"./Checkbox-BkryqZv_.js";import{P as fe}from"./ProgressRadial-DMqIAwlY.js";const xe=u=>t.createElement(re,u,t.createElement("path",{d:"m5.525 2-1.05 1.05L9.425 8l-4.95 4.95L5.525 14l6-6-6-6Z"})),H=t.createContext(void 0),pe=()=>{let u=t.useContext(H);if(u==null)throw new Error("TreeContext must be used within a TreeContext.Provider");return u},M=u=>{let{data:m,className:c,nodeRenderer:d,getNode:f,size:i="default",enableVirtualization:l=!1,style:n,...b}=u,o=t.useRef(null),e=t.useRef(0);t.useEffect(()=>{e.current=0},[m]);let s=t.useCallback(()=>{let p=O(o.current);return p.filter(N=>!p.some(E=>E.contains(N.parentElement)))},[]),a=p=>{if(p.altKey)return;let N=s();if(!(N!=null&&N.length))return;let E=N.findIndex(S=>{var v;return S.contains((v=o.current)==null?void 0:v.ownerDocument.activeElement)}),h=E>-1?E:0;switch(p.key){case"ArrowUp":{p.preventDefault();let S=Math.max(0,h-1);N[S].focus(),e.current=S;break}case"ArrowDown":{p.preventDefault();let S=Math.min(N.length-1,h+1);N[S].focus(),e.current=S;break}}},[r,g]=t.useMemo(()=>{let p=[],N=[],E=(h=[],S=0,v)=>{let j=Array();return h.forEach((D,P)=>{let{subNodes:R,...K}=f(D),z={nodeProps:K,depth:S,parentNode:v,indexInGroup:P};if(j.push(z.nodeProps.nodeId),p.push(z),S===0&&N.push(z),z.nodeProps.isExpanded){let G=E(R,S+1,z);z.subNodeIds=G}}),j};return E(m),[p,N]},[m,f]),k=t.useCallback((p,N,E)=>{var S,v,j;let h=r[p];return t.createElement(H.Provider,{key:h.nodeProps.nodeId,value:{nodeDepth:h.depth,subNodeIds:h.subNodeIds,groupSize:h.depth===0?g.length:((v=(S=h.parentNode)==null?void 0:S.subNodeIds)==null?void 0:v.length)??0,indexInGroup:h.indexInGroup,parentNodeId:(j=h.parentNode)==null?void 0:j.nodeProps.nodeId,scrollToParent:h.parentNode?()=>{var R;let D=(R=h.parentNode)==null?void 0:R.nodeProps.nodeId,P=r.findIndex(K=>K.nodeProps.nodeId===D);A(P)}:void 0,size:i}},N&&E?de(d(h.nodeProps),D=>({...D.props,key:N.key,"data-iui-index":N.index,"data-iui-virtualizer":"item",ref:E.measureElement,style:{...D.props.style,"--_iui-width":"100%",transform:`translateY(${N.start}px)`}})):d(h.nodeProps))},[g.length,r,d,i]),[C,A]=t.useState(),T=t.useRef(r);t.useEffect(()=>{T.current=r},[r]),t.useEffect(()=>{setTimeout(()=>{var p;if(C!==void 0){let N=T.current[C].nodeProps.nodeId,E=(p=o.current)==null?void 0:p.ownerDocument.querySelector(`#${N}`);E==null||E.focus(),A(void 0)}})},[C]);let _=p=>{var E,h;if((E=o.current)!=null&&E.contains(p.relatedTarget))return;let N=s();N.length>0&&((h=N[e.current])==null||h.focus())};return t.createElement(t.Fragment,null,l?t.createElement(Ee,{flatNodesList:r,itemRenderer:k,scrollToIndex:C,onFocus:_,onKeyDown:a,ref:o,className:c,"data-iui-size":i==="small"?"small":void 0,style:n,...b}):t.createElement(le,{onKeyDown:a,onFocus:_,className:c,"data-iui-size":i==="small"?"small":void 0,style:n,ref:o,...b},r.map((p,N)=>k(N))))};let le=ue.div("iui-tree",{role:"tree",tabIndex:0}),Ee=t.forwardRef(({flatNodesList:u,itemRenderer:m,scrollToIndex:c,...d},f)=>{let i=t.useRef(null),l=t.useCallback(o=>u[o].nodeProps.nodeId,[u]),{virtualizer:n,css:b}=me({count:u.length,getScrollElement:()=>i.current,estimateSize:()=>39,getItemKey:l});return ce(()=>{c&&n.scrollToIndex(c)},[n,c]),t.createElement(le,{...d,ref:se(f,i)},t.createElement(ie,{css:b},t.createElement("div",{"data-iui-virtualizer":"root",style:{minBlockSize:n.getTotalSize()}},t.createElement("slot",null))),t.createElement(t.Fragment,null,n.getVirtualItems().map(o=>m(o.index,o,n))))});const ae=t.forwardRef((u,m)=>{var n;let{isExpanded:c,expanderIconProps:d={},...f}=u,l=(((n=t.useContext(H))==null?void 0:n.size)??"default")==="small"?xe:Ne;return t.createElement(be,{styleType:"borderless",size:"small","aria-label":c?"Collapse":"Expand",ref:m,...f},t.createElement(l,{...d,className:y("iui-tree-node-content-expander-icon",d==null?void 0:d.className,{"iui-tree-node-content-expander-icon-expanded":c})}))}),V=t.forwardRef((u,m)=>{let{nodeId:c,nodeProps:d={},label:f,labelProps:i={},sublabel:l,sublabelProps:n={},children:b,className:o,icon:e,iconProps:s={},hasSubNodes:a=!1,isDisabled:r=!1,isExpanded:g=!1,isSelected:k=!1,onSelected:C,onExpanded:A,checkbox:T,checkboxProps:_={},subTreeProps:p={},contentProps:N={},titleProps:E={},expanderProps:h={},expander:S,...v}=u,{nodeDepth:j,subNodeIds:D=[],parentNodeId:P,scrollToParent:R,groupSize:K,indexInGroup:z}=pe(),[G,q]=t.useState(!1),I=t.useRef(null),oe=$=>{var Z,J,Q,X,ee,te;if($.altKey)return;let Y=I.current===((Z=I.current)==null?void 0:Z.ownerDocument.activeElement);switch($.key){case"ArrowLeft":{if($.preventDefault(),Y){if(g){A(c,!1);break}P&&(R==null||R());break}let L=O(I.current),B=L.indexOf((J=I.current)==null?void 0:J.ownerDocument.activeElement);B===0?(Q=I.current)==null||Q.focus():(X=L[B-1])==null||X.focus();break}case"ArrowRight":{$.preventDefault();let L=O(I.current);if(Y){if(!g&&a){A(c,!0);break}(ee=L[0])==null||ee.focus();break}let B=L.indexOf((te=I.current)==null?void 0:te.ownerDocument.activeElement);B<L.length-1&&L[B+1].focus();break}case" ":case"Spacebar":case"Enter":if($.target!==I.current)break;$.preventDefault(),r||C==null||C(c,!k);break}},ne=t.useCallback($=>{A(c,!g),$.stopPropagation()},[g,c,A]);return t.createElement(w,{as:"div",role:"treeitem",className:y("iui-tree-item",o),"aria-expanded":a?g:void 0,"aria-disabled":r,"aria-selected":k,"aria-level":j+1,"aria-setsize":K,"aria-posinset":z+1,tabIndex:-1,...v,id:c,ref:se(I,m),onFocus:W(u.onFocus,$=>{q(!0),$.stopPropagation()}),onBlur:W(u.onBlur,()=>{q(!1)}),onKeyDown:W(u.onKeyDown,oe)},t.createElement(w,{as:"div",style:{"--level":j},onClick:()=>!r&&(C==null?void 0:C(c,!k)),...d,className:y("iui-tree-node",{"iui-active":k,"iui-disabled":r},d==null?void 0:d.className)},T&&t.createElement(w,{as:"div",..._,className:y("iui-tree-node-checkbox",_==null?void 0:_.className)},t.isValidElement(T)?t.cloneElement(T,{tabIndex:G?0:-1}):T),t.createElement(w,{as:"div",...N,className:y("iui-tree-node-content",N==null?void 0:N.className)},a&&S,a&&!S&&t.createElement(ae,{isExpanded:g,disabled:r,onClick:ne,tabIndex:G?0:-1,...h}),e&&t.createElement(w,{as:"span","aria-hidden":!0,...s,className:y("iui-tree-node-content-icon",s==null?void 0:s.className)},e),t.createElement(w,{as:"div",...i,className:y("iui-tree-node-content-label",i==null?void 0:i.className)},t.createElement(w,{as:"div",...E,className:y("iui-tree-node-content-title",E==null?void 0:E.className)},f),l&&t.createElement(w,{as:"div",...n,className:y("iui-tree-node-content-caption",n==null?void 0:n.className)},l)),b)),a&&t.createElement(w,{as:"div",role:"group","aria-owns":D.join(" "),...p,className:y("iui-sub-tree",p==null?void 0:p.className)}))}),ve={title:"Tree"},Ie=()=>{const[u,m]=t.useState({"Node-2":!0,"Node-2-1":!0,"Node-3":!0}),c=t.useCallback((l,n)=>{n?(m(b=>({...b,[l]:!0})),console.log(`Expanded node ${l}`)):(m(b=>({...b,[l]:!1})),console.log(`Closed node ${l}`))},[]),d=t.useCallback((l,n="",b=0)=>{const o=n?`${n}-${l}`:`${l}`;return{id:`Node-${o}`,label:`Node ${o}`,sublabel:`Sublabel for Node ${o}`,subItems:b<10?Array(Math.round(l%5)).fill(null).map((e,s)=>d(s,o,b+1)):[]}},[]),f=t.useMemo(()=>Array(8).fill(null).map((l,n)=>d(n)),[d]),i=t.useCallback(l=>({subNodes:l.subItems,nodeId:l.id,node:l,isExpanded:u[l.id],hasSubNodes:l.subItems.length>0}),[u]);return x.jsx(M,{data:f,getNode:i,nodeRenderer:t.useCallback(({node:l,...n})=>x.jsx(V,{label:l.label,onExpanded:c,...n}),[c])})},we=()=>{const[u,m]=t.useState({"Node-0":!0,"Node-3-2":!0,"Node-22":!0}),c=t.useCallback((e,s)=>{s?(m(a=>({...a,[e]:!0})),console.log(`Selected node ${e}`)):(m(a=>({...a,[e]:!1})),console.log(`Unselected node ${e}`))},[]),[d,f]=t.useState({"Node-2":!0,"Node-2-1":!0,"Node-3":!0}),i=t.useCallback((e,s)=>{s?(f(a=>({...a,[e]:!0})),console.log(`Expanded node ${e}`)):(f(a=>({...a,[e]:!1})),console.log(`Closed node ${e}`))},[]),[l]=t.useState({"Node-4":!0,"Node-3-0":!0,"Node-6":!0,"Node-10":!0}),n=t.useCallback((e,s="",a=0)=>{const r=s?`${s}-${e}`:`${e}`;return{id:`Node-${r}`,label:`Node ${r}`,sublabel:`Sublabel for Node ${r}`,subItems:a<10?Array(Math.round(e%5)).fill(null).map((g,k)=>n(k,r,a+1)):[]}},[]),b=t.useMemo(()=>Array(8).fill(null).map((e,s)=>n(s)),[n]),o=t.useCallback(e=>({subNodes:e.subItems,nodeId:e.id,node:e,isExpanded:d[e.id],isDisabled:l[e.id],isSelected:u[e.id],hasSubNodes:e.subItems.length>0}),[l,d,u]);return x.jsx(M,{data:b,getNode:o,nodeRenderer:t.useCallback(({node:e,...s})=>x.jsx(V,{label:e.label,sublabel:e.sublabel,onExpanded:i,onSelected:c,checkbox:x.jsx(U,{variant:"eyeball",disabled:s.isDisabled}),icon:x.jsx(F,{}),...s}),[i,c])})},je=()=>{const u=t.useCallback(e=>({id:`Node-${e}`,label:`Node ${e}`,subItems:[],hasSubNodes:!0}),[]),[m,c]=t.useState(()=>Array(8).fill(null).map((e,s)=>u(s))),[d,f]=t.useState({}),i=t.useCallback((e,s)=>{s?(f(a=>({...a,[e]:!0})),console.log(`Selected node ${e}`)):(f(a=>({...a,[e]:!1})),console.log(`Unselected node ${e}`))},[]),[l,n]=t.useState({}),b=t.useCallback((e,s,a)=>{s&&!a.subItems.length&&a.hasSubNodes&&setTimeout(()=>{c(r=>{const g=[...r],k=g.find(C=>C.id===e);return k?(k.subItems=[{id:`Async-${e}`,label:`Async ${e}`,subItems:[]}],g):r})},1e3),s?(n(r=>({...r,[e]:!0})),console.log(`Expanded node ${e}`)):(n(r=>({...r,[e]:!1})),console.log(`Closed node ${e}`))},[]),o=t.useCallback(e=>({subNodes:!e.subItems.length&&e.hasSubNodes?[{id:`Async-${e.id}`,label:"",subItems:[],isLoading:!0}]:e.subItems,nodeId:e.id,node:e,isExpanded:l[e.id],isSelected:d[e.id],hasSubNodes:!!e.hasSubNodes}),[l,d]);return x.jsx(M,{data:m,getNode:o,nodeRenderer:t.useCallback(({node:e,...s})=>x.jsx(V,{label:e.isLoading?"Loading...":e.label,onExpanded:(a,r)=>b(a,r,e),onSelected:i,checkbox:x.jsx(U,{variant:"eyeball",disabled:s.isDisabled}),icon:e.isLoading?x.jsx(fe,{size:"x-small",indeterminate:!0}):x.jsx(F,{}),...s}),[b,i])})},De=()=>{const[u,m]=t.useState({"Node-0":!0,"Node-3-2":!0,"Node-22":!0}),c=t.useCallback((s,a)=>{a?(m(r=>({...r,[s]:!0})),console.log(`Selected node ${s}`)):(m(r=>({...r,[s]:!1})),console.log(`Unselected node ${s}`))},[]),[d,f]=t.useState({"Node-2":!0,"Node-2-1":!0,"Node-3":!0}),i=t.useCallback((s,a)=>{a?(f(r=>({...r,[s]:!0})),console.log(`Expanded node ${s}`)):(f(r=>({...r,[s]:!1})),console.log(`Closed node ${s}`))},[]),[l]=t.useState({"Node-4":!0,"Node-3":!0,"Node-6":!0,"Node-10":!0}),n=t.useCallback(s=>Object.keys(l).some(a=>s===a||s.startsWith(`${a}-`)),[l]),b=t.useCallback((s,a="",r=0)=>{const g=a?`${a}-${s}`:`${s}`;return{id:`Node-${g}`,label:`Node ${g}`,sublabel:`Sublabel for Node ${g}`,subItems:r<10?Array(Math.round(s%5)).fill(null).map((k,C)=>b(C,g,r+1)):[]}},[]),o=t.useMemo(()=>Array(8).fill(null).map((s,a)=>b(a)),[b]),e=t.useCallback(s=>({subNodes:s.subItems,nodeId:s.id,node:s,isExpanded:d[s.id],isDisabled:n(s.id),isSelected:u[s.id],hasSubNodes:s.subItems.length>0}),[d,n,u]);return x.jsx(M,{data:o,getNode:e,nodeRenderer:t.useCallback(({node:s,...a})=>x.jsx(V,{label:s.label,sublabel:s.sublabel,onExpanded:i,onSelected:c,checkbox:x.jsx(U,{variant:"eyeball",disabled:a.isDisabled}),icon:x.jsx(F,{}),expander:x.jsx(ae,{isExpanded:a.isExpanded,onClick:r=>{i(s.id,!a.isExpanded),r.stopPropagation()}}),...a}),[i,c])})},Re=()=>{const[u,m]=t.useState({"Node-0":!0,"Node-3-2":!0,"Node-22":!0}),c=t.useCallback((e,s)=>{s?(m(a=>({...a,[e]:!0})),console.log(`Selected node ${e}`)):(m(a=>({...a,[e]:!1})),console.log(`Unselected node ${e}`))},[]),[d,f]=t.useState({"Node-2":!0,"Node-2-1":!0,"Node-3":!0}),i=t.useCallback((e,s)=>{s?(f(a=>({...a,[e]:!0})),console.log(`Expanded node ${e}`)):(f(a=>({...a,[e]:!1})),console.log(`Closed node ${e}`))},[]),[l]=t.useState({"Node-4":!0,"Node-3-0":!0,"Node-6":!0,"Node-10":!0}),n=t.useCallback((e,s="",a=0)=>{const r=s?`${s}-${e}`:`${e}`;return{id:`Node-${r}`,label:`Node ${r}`,sublabel:`Sublabel for Node ${r}`,subItems:a<10?Array(Math.round(e%5)).fill(null).map((g,k)=>n(k,r,a+1)):[]}},[]),b=t.useMemo(()=>Array(1e5).fill(null).map((e,s)=>n(s)),[n]),o=t.useCallback(e=>({subNodes:e.subItems,nodeId:e.id,node:e,isExpanded:d[e.id],isDisabled:l[e.id],isSelected:u[e.id],hasSubNodes:e.subItems.length>0}),[l,d,u]);return x.jsx(M,{data:b,getNode:o,enableVirtualization:!0,nodeRenderer:t.useCallback(({node:e,...s})=>x.jsx(V,{label:e.label,sublabel:e.sublabel,onExpanded:i,onSelected:c,checkbox:x.jsx(U,{variant:"eyeball",disabled:s.isDisabled}),icon:x.jsx(F,{}),...s}),[i,c]),style:{height:"min(400px, 90vh)"}})},ze=()=>{const[u,m]=t.useState({"Node-2":!0,"Node-2-1":!0,"Node-3":!0}),c=t.useCallback((l,n)=>{n?(m(b=>({...b,[l]:!0})),console.log(`Expanded node ${l}`)):(m(b=>({...b,[l]:!1})),console.log(`Closed node ${l}`))},[]),d=t.useCallback((l,n="",b=0)=>{const o=n?`${n}-${l}`:`${l}`;return{id:`Node-${o}`,label:`Node ${o}`,sublabel:`Sublabel for Node ${o}`,subItems:b<10?Array(Math.round(l%5)).fill(null).map((e,s)=>d(s,o,b+1)):[]}},[]),f=t.useMemo(()=>Array(8).fill(null).map((l,n)=>d(n)),[d]),i=t.useCallback(l=>({subNodes:l.subItems,nodeId:l.id,node:l,isExpanded:u[l.id],hasSubNodes:l.subItems.length>0}),[u]);return x.jsx(M,{data:f,size:"small",getNode:i,nodeRenderer:t.useCallback(({node:l,...n})=>x.jsx(V,{label:l.label,sublabel:l.sublabel,onExpanded:c,icon:x.jsx(F,{}),...n}),[c])})},Ae=()=>{const[u,m]=t.useState({"Node-0":!0,"Node-3-2":!0,"Node-22":!0}),c=t.useCallback((o,e)=>{e?(m(s=>({...s,[o]:!0})),console.log(`Selected node ${o}`)):(m(s=>({...s,[o]:!1})),console.log(`Unselected node ${o}`))},[]),[d,f]=t.useState({"Node-0":!0,"Node-0-0":!0,"Node-0-0-0":!0,"Node-0-0-0-0":!0,"Node-2":!0,"Node-2-1":!0,"Node-3":!0}),i=t.useCallback((o,e)=>{e?(f(s=>({...s,[o]:!0})),console.log(`Expanded node ${o}`)):(f(s=>({...s,[o]:!1})),console.log(`Closed node ${o}`))},[]),l=t.useCallback((o,e="",s=0)=>{const a=e?`${e}-${o}`:`${o}`;return{id:`Node-${a}`,label:`Node ${a}`,subItems:s<10?Array(1).fill(null).map((r,g)=>l(g,a,s+1)):[]}},[]),n=t.useMemo(()=>Array(1e5).fill(null).map((o,e)=>l(e)),[l]),b=t.useCallback(o=>({subNodes:o.subItems,nodeId:o.id,node:o,isExpanded:d[o.id],isSelected:u[o.id],hasSubNodes:o.subItems.length>0}),[d,u]);return x.jsx(M,{data:n,getNode:b,enableVirtualization:!0,nodeRenderer:t.useCallback(({node:o,...e})=>x.jsx(V,{label:o.label,onExpanded:i,onSelected:c,checkbox:x.jsx(U,{variant:"eyeball",disabled:e.isDisabled}),icon:x.jsx(F,{}),style:{width:"fit-content",minWidth:"100%"},...e}),[i,c]),style:{height:"min(400px, 90vh)",width:"250px"}})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{je as AsyncLoading,Ie as Basic,De as CustomizedExpander,we as Full,ze as Small,Re as Virtualized,Ae as VirtualizedWithHorizontalScroll,ve as default};
