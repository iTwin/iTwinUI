import{r as e,U as X,k as V,E as J,o as Q,B as Y,c as F,p as W,m as Z,I as _,e as H,i as ee,g as L,d as te,K as re,W as A,G as le}from"./index-ZG0WEztO.js";import{u as ne}from"./useEventListener-CWiQcQZ1.js";import{g as ie}from"./focusable-LKR0keZU.js";const se=l=>e.createElement("div",{style:{position:"absolute",inset:-6,display:"grid",pointerEvents:"none"}},e.createElement(ae,null),e.createElement(oe,l));let oe=l=>{let{elementRef:t,containerRef:r,onResizeStart:d,onResizeEnd:f}=l,m=e.useRef(!1),i=s=>{if(!t.current||s.button!==0)return;let o=s.clientX,$=s.clientY,[b,E]=X(t.current),{width:h,height:g}=t.current.getBoundingClientRect(),p=`${h}px`,x=`${g}px`,a=b,c=E,w=parseFloat(getComputedStyle(t.current).minWidth);Number.isNaN(w)&&(w=380);let v=parseFloat(getComputedStyle(t.current).minHeight),k=s.currentTarget.dataset.iuiResizer,u=t.current.ownerDocument||document,P=u.body.style.userSelect;u.body.style.userSelect="none";let T=S=>{var B;if(!t.current)return;m.current||(m.current=!0,d==null||d());let D=(B=r==null?void 0:r.current)==null?void 0:B.getBoundingClientRect(),O=V(S.clientX,(D==null?void 0:D.left)??0,(D==null?void 0:D.right)??u.documentElement.clientWidth??0),N=V(S.clientY,(D==null?void 0:D.top)??0,(D==null?void 0:D.bottom)??u.documentElement.clientHeight??0),C=o-O,z=$-N;switch(k){case"top-left":{let n=g+z;n>=v&&(x=t.current.style.height=`${n}px`,c=E-z);let y=h+C;y>=w&&(p=t.current.style.width=`${y}px`,a=b-C),t.current.style.transform=`translate(${a}px, ${c}px)`;break}case"top":{let n=g+z;if(n<v)break;x=t.current.style.height=`${n}px`,c=E-z,t.current.style.transform=`translate(${a}px, ${c}px)`;break}case"top-right":{let n=g+z;n>=v&&(x=t.current.style.height=`${n}px`,c=E-z),p=t.current.style.width=`${h-C}px`,t.current.style.transform=`translate(${a}px, ${c}px)`;break}case"right":p=t.current.style.width=`${h-C}px`,x=t.current.style.height=`${g}px`,t.current.style.transform=`translate(${a}px, ${c}px)`;break;case"bottom-right":p=t.current.style.width=`${h-C}px`,x=t.current.style.height=`${g-z}px`,t.current.style.transform=`translate(${a}px, ${c}px)`;break;case"bottom":x=t.current.style.height=`${g-z}px`,t.current.style.transform=`translate(${a}px, ${c}px)`;break;case"bottom-left":{let n=h+C;n>=w&&(p=t.current.style.width=`${n}px`,a=b-C),x=t.current.style.height=`${g-z}px`,t.current.style.transform=`translate(${a}px, ${c}px)`;break}case"left":{let n=h+C;if(n<w)break;p=t.current.style.width=`${n}px`,x=t.current.style.height=`${g}px`,a=b-C,t.current.style.transform=`translate(${a}px, ${c}px)`;break}}};u.addEventListener("pointermove",T),u.addEventListener("pointerup",()=>{u.removeEventListener("pointermove",T),t.current&&(u.body.style.userSelect=P,m.current=!1,f==null||f({width:p,height:x,transform:`translate(${a}px, ${c}px)`}))},{once:!0})};return e.createElement(e.Fragment,null,e.createElement("div",{"data-iui-resizer":"top-left",onPointerDown:i,style:{cursor:"nw-resize"}}),e.createElement("div",{"data-iui-resizer":"top",onPointerDown:i,style:{cursor:"n-resize"}}),e.createElement("div",{"data-iui-resizer":"top-right",onPointerDown:i,style:{cursor:"ne-resize"}}),e.createElement("div",{"data-iui-resizer":"right",onPointerDown:i,style:{cursor:"e-resize"}}),e.createElement("div",{"data-iui-resizer":"bottom-right",onPointerDown:i,style:{cursor:"se-resize"}}),e.createElement("div",{"data-iui-resizer":"bottom",onPointerDown:i,style:{cursor:"s-resize"}}),e.createElement("div",{"data-iui-resizer":"bottom-left",onPointerDown:i,style:{cursor:"sw-resize"}}),e.createElement("div",{"data-iui-resizer":"left",onPointerDown:i,style:{cursor:"w-resize"}}))},ae=e.memo(()=>e.createElement("style",null,ue)),ue=`
[data-iui-resizer] {
  pointer-events: auto;
  grid-area: 1 / 1 / -1 / -1;
  width: 12px;
  height: 12px;
  z-index: 1;
}
[data-iui-resizer='top'],
[data-iui-resizer='bottom'] {
  height: 8px;
  width: auto;
  z-index: 0;
}
[data-iui-resizer='left'],
[data-iui-resizer='right'] {
  height: auto;
  width: 8px;
  z-index: 0;
}
[data-iui-resizer^='top'] {
  align-self: start;
}
[data-iui-resizer^='bottom'] {
  align-self: end;
}
[data-iui-resizer$='left'] {
  justify-self: start;
}
[data-iui-resizer$='right'] {
  justify-self: end;
}`;const ce=l=>{let{children:t}=l,r=e.useRef(),d=()=>{let i=ie(r.current),s=i[0],o=i[(i.length||1)-1];return[s,o]},f=i=>{let[s,o]=d();i.relatedTarget===s?o==null||o.focus():s==null||s.focus()},m=i=>{let[s,o]=d();i.relatedTarget===o?s==null||s.focus():o==null||o.focus()};return e.createElement(e.Fragment,null,e.createElement("div",{tabIndex:0,onFocus:f,"aria-hidden":!0}),e.cloneElement(t,{ref:J(t.ref,r)}),e.createElement("div",{tabIndex:0,onFocus:m,"aria-hidden":!0}))},de=l=>e.createElement(Q,l,e.createElement("path",{d:"m14 0-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6 6-6"})),fe=e.forwardRef((l,t)=>{let{isVisible:r=!0,className:d,...f}=l;return e.createElement(Y,{className:F("iui-backdrop",{"iui-backdrop-visible":r},d),ref:t,...f})}),G=e.createContext(void 0),I=()=>e.useContext(G)||{},K=W.div("iui-dialog-title"),q=e.createContext(void 0),me=()=>({...e.useContext(q)}),pe=Object.assign(e.forwardRef((l,t)=>{let r=I(),{children:d,titleText:f,isDismissible:m=r.isDismissible,onClose:i=r.onClose,isDraggable:s=r.isDraggable,className:o,onPointerDown:$,...b}=l,{onPointerDown:E}=me();return e.createElement(Y,{className:F("iui-dialog-title-bar",o,{"iui-dialog-title-bar-filled":s}),ref:t,onPointerDown:Z($,E),...b},d||e.createElement(e.Fragment,null,e.createElement(K,null,f),m&&e.createElement(_,{size:"small",styleType:"borderless",onClick:i,"aria-label":"Close","data-iui-shift":"right"},e.createElement(de,null))))}),{Title:K}),ge=W.div("iui-dialog-content"),he=e.forwardRef((l,t)=>{let r=I(),{isVisible:d=r.isOpen,isDismissible:f=r.isDismissible,onClose:m=r.onClose,closeOnExternalClick:i=r.closeOnExternalClick,relativeTo:s=r.relativeTo,onMouseDown:o,className:$,style:b,...E}=l,h=e.useRef(null),g=H(h,t),p=x=>{x.persist(),x.target===h.current&&(f&&i&&m&&m(x),o==null||o(x))};return e.createElement(fe,{isVisible:d,className:F({"iui-backdrop-fixed":s==="viewport"},$),ref:g,onMouseDown:p,style:{pointerEvents:"auto",...b},...E})}),xe=W.div("iui-dialog-button-bar");let U=l=>{var r,d,f;let t=(r=l==null?void 0:l.current)==null?void 0:r.getBoundingClientRect();return{top:(t==null?void 0:t.top)??0,right:(t==null?void 0:t.right)??((d=L())==null?void 0:d.innerWidth)??0,bottom:(t==null?void 0:t.bottom)??((f=L())==null?void 0:f.innerHeight)??0,left:(t==null?void 0:t.left)??0}};const be=(l,t,r=!0)=>{let d=e.useRef(0),f=e.useRef(0),m=e.useRef(),i=e.useRef(),s=e.useRef(U(t)),o=e.useCallback(()=>{var P;if(!l.current||!r)return;let{top:a,right:c,bottom:w,left:v}=(P=l.current)==null?void 0:P.getBoundingClientRect(),[k,u]=X(l.current);s.current=U(t),w>s.current.bottom&&(u-=w-s.current.bottom),a<s.current.top&&(u+=s.current.top-a),c>s.current.right&&(k-=c-s.current.right),v<s.current.left&&(k+=s.current.left-v),m.current=k,i.current=u,l.current.style.transform=`translate(${k}px, ${u}px)`},[t,l,r]),[$,b]=ee(o);$(t==null?void 0:t.current),e.useEffect(()=>()=>{b==null||b.disconnect()},[b]),ne("resize",()=>{o(),m.current!=null&&i.current!=null&&h(`translate(${m.current}px, ${i.current}px)`)},L());let[E,h]=e.useState(""),g=e.useRef(a=>{if(!l.current)return;let c=a.clientX-d.current,w=a.clientY-f.current;l.current.style.transform=`translate(${c}px, ${w}px)`,o()}),p=e.useRef("");return{onPointerDown:e.useCallback(a=>{if(!l.current||a.button!==0||!r)return;let[c,w]=X(l.current);d.current=a.clientX-c,f.current=a.clientY-w,p.current=l.current.style.userSelect,l.current.style.userSelect="none";let v=l.current.ownerDocument||document;v.addEventListener("pointermove",g.current),v.addEventListener("pointerup",()=>{h(`translate(${m.current}px, ${i.current}px)`),v.removeEventListener("pointermove",g.current),l.current&&(l.current.style.userSelect=p.current)},{once:!0})},[l,r]),transform:E}},ye=e.forwardRef((l,t)=>{let r=I(),{className:d,children:f,styleType:m="default",isOpen:i=r.isOpen,isDismissible:s=r.isDismissible,onClose:o=r.onClose,closeOnEsc:$=r.closeOnEsc,trapFocus:b=r.trapFocus,setFocus:E=r.setFocus,preventDocumentScroll:h=r.preventDocumentScroll,onKeyDown:g,isDraggable:p=r.isDraggable,isResizable:x=r.isResizable,style:a,placement:c=r.placement,...w}=l,[v,k]=e.useState(),u=e.useRef(null),P=e.useRef(!1),T=e.useRef(),S=e.useRef("");e.useEffect(()=>{i&&(S.current=document.body.style.overflow)},[i]),e.useEffect(()=>{var y;let n=(y=u.current)==null?void 0:y.ownerDocument;if(!(!n||!h||S.current==="hidden"))return i?n.body.style.overflow="hidden":n.body.style.overflow=S.current,()=>{n.body.style.overflow=S.current}},[i,h]);let D=n=>{n.altKey||(n.persist(),s&&$&&n.key==="Escape"&&o&&o(n),g==null||g(n))},{onPointerDown:O,transform:N}=be(u,r.dialogRootRef,p),C=e.useCallback(n=>{p&&O(n)},[p,O]);te(()=>{if(!p||!i)return;let[n,y]=X(u.current);k(R=>{var M,j;return{...R,insetInlineStart:(M=u.current)==null?void 0:M.offsetLeft,insetBlockStart:(j=u.current)==null?void 0:j.offsetTop,transform:`translate(${n}px,${y}px)`}})},[p,i]);let z=e.useCallback(n=>{k(y=>({...y,...n}))},[]),B=e.createElement(Y,{className:F("iui-dialog",{"iui-dialog-default":m==="default","iui-dialog-full-page":m==="fullPage","iui-dialog-visible":i,"iui-dialog-draggable":p},d),role:"dialog",ref:H(u,t),onKeyDown:D,tabIndex:-1,"data-iui-placement":c,style:{transform:N,...v,...a},...w},e.createElement(re,null,e.createElement("slot",null),x&&e.createElement(se,{elementRef:u,containerRef:r.dialogRootRef,onResizeStart:()=>{P.current||(P.current=!0,z({maxInlineSize:"100%"}))},onResizeEnd:z})),f);return e.createElement(A,{in:i,appear:!0,timeout:{exit:600},onEntered:()=>{var n,y;T.current=(n=u.current)==null?void 0:n.ownerDocument.activeElement,E&&((y=u.current)==null||y.focus({preventScroll:!0}))},onExit:()=>{var n,y,R;(y=u.current)!=null&&y.contains((n=u.current)==null?void 0:n.ownerDocument.activeElement)&&((R=T.current)==null||R.focus())},unmountOnExit:!0,nodeRef:u},e.createElement(q.Provider,{value:{onPointerDown:C}},b&&e.createElement(ce,null,B),!b&&B))});let Ee=e.forwardRef((l,t)=>{let{trapFocus:r=!1,setFocus:d=r,preventDocumentScroll:f=!1,isOpen:m=!1,isDismissible:i=!0,closeOnEsc:s=!0,closeOnExternalClick:o=!1,onClose:$,isDraggable:b=!1,isResizable:E=!1,relativeTo:h="viewport",placement:g,className:p,portal:x=!1,...a}=l,c=e.useRef(null);return e.createElement(A,{in:m,timeout:{exit:600},mountOnEnter:!0,unmountOnExit:!0},e.createElement(G.Provider,{value:{isOpen:m,onClose:$,closeOnEsc:s,closeOnExternalClick:o,isDismissible:i,preventDocumentScroll:f,trapFocus:r,setFocus:d,isDraggable:b,isResizable:E,relativeTo:h,dialogRootRef:c,placement:g}},e.createElement(le,{portal:x},e.createElement(Y,{className:F("iui-dialog-wrapper",p),"data-iui-relative":h==="container",ref:H(t,c),...a}))))});const ze=Object.assign(Ee,{Backdrop:he,Main:ye,TitleBar:pe,Content:ge,ButtonBar:xe});export{ze as D,ge as a,xe as b};
