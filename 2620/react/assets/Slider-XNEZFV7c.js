import{r as t,B as y,c as x,T as ce,f as me,L as fe,M as de,l as O}from"./index-COG5rSGa.js";import{u as H}from"./useEventListener-CHl9Xrrm.js";function ge(r,n){return n==="odd-segments"&&(r+1)%2===0||n==="even-segments"&&r%2===0}function J(r,n,e){let l=[],i=[...r];if(i.sort((m,p)=>m-p),i.length===0||i[0]<n||i[i.length-1]>e||n===e)return[];let s=n;for(let m=0;m<i.length;m++)l.push({left:s,right:i[m]}),s=i[m];return l.push({left:s,right:e}),l}const pe=r=>{let{className:n,trackDisplayMode:e,sliderMin:l,sliderMax:i,values:s,orientation:m}=r,[p,w]=t.useState(()=>J(s,l,i));return t.useEffect(()=>{w(J(s,l,i))},[s,l,i]),t.createElement(t.Fragment,null,e!=="none"&&p.map((V,h)=>{let S=V.left>=l&&i!==l?100*(V.left-l)/(i-l):0,k=V.right>=l&&i!==l?100-100*(V.right-l)/(i-l):100;return t.createElement(t.Fragment,{key:h},ge(h,e)?t.createElement(y,{className:x("iui-slider-track",n),style:{...m==="horizontal"?{insetInlineStart:`${S}%`,insetInlineEnd:`${k}%`}:{insetBlockStart:`${k}%`,insetBlockEnd:`${S}%`}}}):null)}))},be=r=>{let{value:n,index:e,minVal:l,maxVal:i,step:s,sliderMin:m,sliderMax:p,isActive:w,onThumbActivated:V,onThumbValueChanged:h,tooltipProps:S,thumbProps:k,disabled:o}=r,g=t.useRef(null),P=t.useCallback((b,E)=>{if(!(o||b.altKey)){switch(b.key){case"ArrowLeft":case"ArrowDown":h(e,Math.max(n-s,l),E);break;case"ArrowRight":case"ArrowUp":h(e,Math.min(n+s,i),E);break;case"Home":h(e,l,E);break;case"End":h(e,i,E);break;default:return}b.preventDefault()}},[o,h,e,n,s,l,i]),R=t.useCallback(()=>{o||V(e)},[o,e,V]),T=t.useMemo(()=>n<m?m:n>p?p:n,[p,m,n]),C=t.useMemo(()=>p===m?0:100*(T-m)/(p-m),[T,p,m]),{style:L,className:$,...A}=k||{};return t.createElement(ce,{placement:"top",autoUpdateOptions:{animationFrame:!0},ariaStrategy:"none",...S},t.createElement(y,{...A,ref:me(g,k==null?void 0:k.ref),style:{...L,"--iui-slider-thumb-position":`${C}%`},className:x("iui-slider-thumb",{"iui-active":w},$),role:"slider",tabIndex:o?void 0:0,"aria-valuemin":l,"aria-valuenow":n,"aria-valuemax":i,"aria-disabled":o,onPointerDown:R,onKeyDown:b=>P(b,!1),onKeyUp:b=>P(b,!0)}))};let Q=(r,n,e,l)=>{if(l==="horizontal")return(O(n,r.left,r.right)-r.left)/r.width;let i=O(e,r.top,r.bottom);return(r.bottom-i)/r.height},he=(r,n)=>{if(r.length===1)return 0;let e=r.map(i=>Math.abs(i-n)),l=Math.min(...e);return e.indexOf(l)},U=(r,n)=>r!=="auto"?r:n.length%2?"even-segments":"odd-segments",W=(r,n,e)=>Math.round((r-e)/n)*n+e,Ve=(r,n,e)=>Number.isInteger(n)?r.toFixed(0):r.toFixed(e),Ee=(r,n)=>{var l;let e=r.ownerDocument;if(!r.contains(e.activeElement)||Number((l=e.activeElement)==null?void 0:l.getAttribute("data-index"))!==n){let i=r.querySelector(`[data-index="${n}"]`);i&&i.focus()}};const we=t.forwardRef((r,n)=>{var q,G;let{min:e=0,max:l=100,values:i,step:s=1,tooltipProps:m,disabled:p=!1,tickLabels:w,minLabel:V,maxLabel:h,trackDisplayMode:S="auto",thumbMode:k="inhibit-crossing",onChange:o,onUpdate:g,thumbProps:P,className:R,trackContainerProps:T,minProps:C,maxProps:L,trackProps:$,tickProps:A,ticksProps:b,orientation:E="horizontal",...Z}=r,[c,F]=t.useState(i);t.useEffect(()=>{F(i)},[i]);let[z,_]=t.useState(()=>V??e.toString());t.useEffect(()=>{_(V??e.toString())},[V,e]);let[X,ee]=t.useState(()=>h??l.toString());t.useEffect(()=>{ee(h??l.toString())},[h,l]);let[te,le]=t.useState(()=>U(S,c));t.useEffect(()=>{le(U(S,c))},[S,c]);let v=t.useRef(null),Y=t.useMemo(()=>{let a=s.toString(),u=a.indexOf(".");return a.length-(u+1)},[s]),B=t.useCallback(a=>{if(k==="inhibit-crossing"){let u=a===0?e:c[a-1]+s,f=a<c.length-1?c[a+1]-s:l;return[u,f]}return[e,l]},[l,e,s,k,c]),[M,j]=t.useState(void 0),I=t.useCallback((a,u)=>{if(v.current&&M!==void 0){let f=Q(v.current.getBoundingClientRect(),a.clientX,a.clientY,E),d=e+(l-e)*f;d=W(d,s,e);let[N,K]=B(M);if(d=O(d,N,K),d!==c[M]){let D=[...c];D[M]=d,F(D),u==="onChange"?o==null||o(D):g==null||g(D)}else u==="onChange"&&(o==null||o(c))}},[M,e,l,s,B,c,g,o,E]),ae=t.useCallback(a=>{M!==void 0&&(a.preventDefault(),a.stopPropagation(),I(a,"onUpdate"))},[M,I]),re=t.useCallback((a,u,f)=>{if(!(c[a]===u&&!f))if(f)o==null||o(c);else{let d=[...c];d[a]=u,g==null||g(d),F(d)}},[c,g,o]),ne=t.useCallback(a=>{j(a)},[]),ie=t.useCallback(a=>{M!==void 0&&(I(a,"onChange"),j(void 0),a.preventDefault(),a.stopPropagation())},[M,I]),se=t.useCallback(a=>{if(v.current){let u=Q(v.current.getBoundingClientRect(),a.clientX,a.clientY,E),f=e+(l-e)*u;f=W(f,s,e);let d=he(c,f),[N,K]=B(d);if(f=O(f,N,K),f===c[d])return;let D=[...c];D[d]=f,F(D),o==null||o(D),g==null||g(D),Ee(v.current,d),a.preventDefault(),a.stopPropagation()}},[e,l,s,c,B,o,g,E]);H("pointermove",ae,(q=v.current)==null?void 0:q.ownerDocument),H("pointerup",ie,(G=v.current)==null?void 0:G.ownerDocument);let ue=t.useMemo(()=>w?Array.isArray(w)?t.createElement(y,{as:"div",...b,className:x("iui-slider-ticks",b==null?void 0:b.className)},w.map((a,u)=>t.createElement(y,{as:"span",...A,key:u,className:x("iui-slider-tick",A==null?void 0:A.className)},a))):w:null,[w,A,b]),oe=t.useCallback((a,u)=>{let f=m?m(a,u,s):{};return{...f,content:f.content?f.content:Ve(u,s,Y)}},[Y,s,m]);return t.createElement(y,{ref:n,className:x("iui-slider-container",R),"data-iui-orientation":E,"data-iui-disabled":p?"true":void 0,...Z},z&&t.createElement(y,{as:"span",...C,className:x("iui-slider-min",C==null?void 0:C.className)},z),t.createElement(fe,{delay:de},t.createElement(y,{ref:v,...T,className:x("iui-slider",{"iui-grabbing":M!==void 0},T==null?void 0:T.className),onPointerDown:se},c.map((a,u)=>{let[f,d]=B(u),N=P==null?void 0:P(u);return t.createElement(be,{key:(N==null?void 0:N.id)??u,index:u,disabled:p,isActive:M===u,onThumbActivated:ne,onThumbValueChanged:re,minVal:f,maxVal:d,value:a,tooltipProps:oe(u,a),thumbProps:N,step:s,sliderMin:e,sliderMax:l})}),t.createElement(pe,{trackDisplayMode:te,sliderMin:e,sliderMax:l,values:c,orientation:E,...$}))),ue,X&&t.createElement(y,{as:"span",...L,className:x("iui-slider-max",L==null?void 0:L.className)},X))});export{we as S};
