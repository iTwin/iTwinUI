import{r as e,a as qe,B as ne,c as le,u as A,f as ke,o as U,m as xe,F as Pe,e as ve,K as We,n as Be,y as He,E as je,z as Ke,b as Y}from"./index-C1_65VfN.js";import{L as Re}from"./Label-DJjJZdRY.js";import{I as Fe}from"./Input-9ZeSmd8H.js";import{T as Ge}from"./Textarea-4sJ_Wsmx.js";import{I as Le}from"./Icon-qKkSLPXI.js";import{I as ce}from"./InputWithDecorations-CG10igir.js";import{M as Ue}from"./MenuExtraContent-BxhyKoCJ.js";import{a as Ye,I as fe,b as Je,A as Qe,S as ae}from"./Select-BsnIhOZD.js";import{T as Xe}from"./Text-AZBWDLo6.js";import{S as Ze}from"./SvgCaretDownSmall-CXUMVR4a.js";import{u as _e}from"./useContainerWidth-CsN4iJsb.js";import{L as et}from"./List-Cmkc0yYp.js";import{u as tt}from"./useVirtualScroll-Cx2t4FBS.js";import{L as re}from"./ListItem-BK9emdd9.js";import{S as rt}from"./SvgCheckmark-B-1-snS4.js";const me=e.forwardRef((n,o)=>{let{children:f,startIcon:i,status:t,className:s,iconProps:l,contentProps:u,...r}=n,m=i??(t&&qe[t]()),x=i!==null&&!!m;return e.createElement(ne,{className:le("iui-status-message",s),"data-iui-status":t,ref:o,...r},x?e.createElement(Le,{"aria-hidden":!0,...l},m):null,e.createElement(ne,u,f))}),nt=e.forwardRef((n,o)=>{let{label:f,disabled:i,required:t,status:s,message:l,icon:u,isLabelInline:r,children:m,className:x,style:R,statusMessage:b,inputId:y,labelId:E,...c}=n;return e.createElement(ne,{className:le("iui-input-grid",x),"data-iui-status":s,"data-iui-label-placement":r?"inline":void 0,style:R,ref:o,...c},f&&e.createElement(Re,{as:y&&n.as!=="label"?"label":"div",required:t,disabled:i,htmlFor:y,id:E},f),m,b||l&&e.createElement(me,{startIcon:u,status:s},l))}),pe=e.createContext(void 0),J=e.createContext(void 0),at=e.forwardRef((n,o)=>{let{className:f,children:i,disabled:t,isOpen:s,...l}=n;return e.createElement(Le,{as:"span",ref:o,className:le("iui-end-icon",{"iui-disabled":t,"iui-open":s},f),...l},i??e.createElement(Ze,{"aria-hidden":!0}))}),lt=e.forwardRef((n,o)=>{let{selectedItems:f=[],...i}=n;return e.createElement(Ye,{ref:o,tags:f,...i})}),it=e.forwardRef((n,o)=>{let{selectTags:f,size:i,style:t,...s}=n,{isOpen:l,id:u,focusedIndex:r,setFocusedIndex:m,enableVirtualization:x,multiple:R,onClickHandler:b,popover:y,show:E,hide:c}=A(J),{inputRef:ie,menuRef:w,optionsExtraInfo:C}=A(pe),be=ke(ie,y.refs.setReference,o),k=U(r??-1),Ie=V=>{var d,h;return((h=(d=w.current)==null?void 0:d.querySelector(`[data-iui-index="${V}"]`))==null?void 0:h.id)??""},Q=e.useCallback(V=>{var h,Z,z,_,$,L,P,W,T,N;let d=Object.keys(C).length??0;if(!V.altKey)switch(V.key){case"ArrowDown":{if(V.preventDefault(),!l)return E();if(d===0)return;if(k.current===-1){let S=(h=w.current)==null?void 0:h.querySelector("[data-iui-index]");return m(Number((S==null?void 0:S.getAttribute("data-iui-index"))??0))}if(x&&!((z=(Z=w.current)==null?void 0:Z.querySelector(`[data-iui-index="${k.current}"]`))!=null&&z.nextElementSibling))return;let M=k.current;do{let S=(_=w.current)==null?void 0:_.querySelector(`[data-iui-index="${M}"]`),v=(S==null?void 0:S.nextElementSibling)??(($=w.current)==null?void 0:$.querySelector("[data-iui-index]"));if(M=Number(v==null?void 0:v.getAttribute("data-iui-index")),v)return m(M)}while(M!==k.current);break}case"ArrowUp":{if(V.preventDefault(),!l)return E();if(d===0||x&&!((P=(L=w.current)==null?void 0:L.querySelector(`[data-iui-index="${k.current}"]`))!=null&&P.previousElementSibling))return;if(k.current===-1)return m(((W=Object.values(C))==null?void 0:W[d-1].__originalIndex)??-1);let M=k.current;do{let S=(T=w.current)==null?void 0:T.querySelector(`[data-iui-index="${M}"]`),v=(S==null?void 0:S.previousElementSibling)??((N=w.current)==null?void 0:N.querySelector("[data-iui-index]:last-of-type"));if(M=Number(v==null?void 0:v.getAttribute("data-iui-index")),v)return m(M)}while(M!==k.current);break}case"Enter":V.preventDefault(),l?k.current>-1&&(b==null||b(k.current)):E();break;case"Escape":V.preventDefault(),c();break;case"Tab":c();break}},[m,x,k,l,w,b,C,E,c]),X=e.useRef(!1),F=e.useCallback(()=>{X.current=l},[l]),O=e.useCallback(()=>{X.current?c():E(),X.current=!1},[c,E]),[j,q]=_e();return e.createElement(e.Fragment,null,e.createElement(Fe,{ref:be,"aria-expanded":l,"aria-activedescendant":l&&r!=null&&r>-1?Ie(r):void 0,role:"combobox","aria-controls":l?`${u}-list`:void 0,"aria-autocomplete":"list",spellCheck:!1,autoCapitalize:"none",autoCorrect:"off",style:{...R&&{paddingInlineStart:q+18},...t},size:i,...y.getReferenceProps({...s,onPointerDown:xe(n.onPointerDown,F),onClick:xe(n.onClick,O),onKeyDown:xe(n.onKeyDown,Q)})}),R&&f?e.createElement(lt,{ref:j,selectedItems:f}):null)}),st=e.forwardRef((n,o)=>{let{className:f,status:i,message:t,children:s,...l}=n,{id:u}=A(J);return e.createElement(nt,{className:f,status:i,statusMessage:typeof t=="string"?e.createElement(me,{status:i},t):e.isValidElement(t)&&e.cloneElement(t,{status:i}),ref:o,...l,id:u},e.createElement(fe,null,s))});let ot=n=>{let{children:o,...f}=n,{filteredOptions:i,getMenuItem:t,focusedIndex:s}=A(J),{menuRef:l}=A(pe),u=e.useMemo(()=>{let b=0;for(let y=0;y<Math.min(5,i.length);y++)i[y].sublabel&&b++;return b>=Math.min(3,i.length)},[i]),r=e.useMemo(()=>{var y;let b=(y=l.current)==null?void 0:y.querySelector(`[data-iui-index="${s}"]`);return b?Number(b.getAttribute("data-iui-filtered-index")??s):s},[s,l]),{virtualizer:m,css:x}=tt({count:i.length||1,getScrollElement:()=>l.current,estimateSize:()=>u?48:36,gap:-1});ve(()=>{m.scrollToIndex(r)},[m,r]);let R=e.useCallback(b=>{let y=i.length>0?t(i[b.index],b.index):o;return e.cloneElement(y,{key:b.key,ref:m.measureElement,"data-iui-virtualizer":"item",style:{width:"100%",transform:`translateY(${b.start}px)`}})},[i,t,o,m.measureElement]);return e.createElement("div",{style:{display:"contents"}},e.createElement(We,{css:x},e.createElement(ne,{as:"div","data-iui-virtualizer":"root",...f,style:{minBlockSize:m.getTotalSize(),...n.style}},e.createElement("slot",null))),e.createElement(e.Fragment,null,m.getVirtualItems().map(b=>R(b))))};const ut=e.forwardRef((n,o)=>{let{className:f,children:i,style:t,portal:s=!0,...l}=n,{id:u,enableVirtualization:r,popover:m}=A(J),{menuRef:x}=A(pe),R=ke(m.refs.setFloating,o,x);return m.open&&e.createElement(Pe,{portal:s},e.createElement(et,{as:"div",className:le("iui-menu",f),id:`${u}-list`,role:"listbox",ref:R,...m.getFloatingProps({style:r?{maxInlineSize:0,...t}:t,...l})},r?e.createElement(ot,null,i):i))}),dt=e.memo(e.forwardRef((n,o)=>{let{children:f,isSelected:i,disabled:t,value:s,onClick:l,sublabel:u,size:r=u?"large":"default",startIcon:m,endIcon:x,role:R="option",index:b,...y}=n,{focusedIndex:E,enableVirtualization:c}=A(J),w=ke(o,C=>{!c&&E===b&&(C==null||C.scrollIntoView({block:"nearest"}))});return e.createElement(re,{as:"div",actionable:!0,size:r,active:i,disabled:t,focused:E===b,ref:w,onClick:()=>l==null?void 0:l(),role:R,tabIndex:R==="presentation"?void 0:-1,"aria-selected":i,"aria-disabled":t,"data-iui-index":b,...y},m&&e.createElement(re.Icon,{as:"span","aria-hidden":!0},m),e.createElement(re.Content,null,f,u&&e.createElement(re.Description,null,u)),x||i&&e.createElement(re.Icon,{as:"span","aria-hidden":!0},x??e.createElement(rt,null)))}));let D=(n,o)=>o&&(Array.isArray(n)||n==null),ct=(n,o)=>!o,Se=(n,o)=>n.id??`${o}-option-${n.label.replace(/\s/g,"-")}`;const we=e.forwardRef((n,o)=>{var Ve;let f=Be(),i=e.useCallback((a,p)=>a.filter(I=>I.label.toLowerCase().includes(p.toLowerCase())),[]),{options:t,value:s,onChange:l,filterFunction:u=i,inputProps:r,endIconProps:m,dropdownMenuProps:{middleware:x,...R}={},emptyStateMessage:b="No options found",itemRenderer:y,enableVirtualization:E=!1,multiple:c=!1,onShow:ie,onHide:w,id:C=r!=null&&r.id?`iui-${r.id}-cb`:f,defaultValue:be,clearFilterOnOptionToggle:k=!0,...Ie}=n,Q=e.useRef(null),X=e.useRef(null),F=U(l),O=U(t),j=U(u),q=e.useMemo(()=>{let a={};return t.forEach((p,I)=>{a[Se(p,C)]={__originalIndex:I}}),a},[C,t]),V=e.useCallback(a=>{if(a!==void 0){if(!D(a,c))return t.findIndex(p=>p.value===a);{let p=[];return a==null||a.forEach(I=>{let g=t.findIndex(B=>B.value===I);g>-1&&p.push(g)}),p}}},[c,t]),[d,h]=He(V(be)??(c?[]:-1),V(s)),Z=e.useRef(s);ve(()=>{s!==Z.current&&(Z.current=s,s===void 0&&(D(d,c)?h([]):h(-1)))},[c,d,h,s]);let[z,_]=e.useState(!1),[$,L]=e.useState(-1),P=U(ie),W=U(w),T=e.useCallback(()=>{var a;_(!0),(a=P.current)==null||a.call(P)},[P]),N=e.useCallback(()=>{var a;_(!1),(a=W.current)==null||a.call(W)},[W]);ve(()=>{var a,p;z?((a=Q.current)==null||a.focus(),D(d,c)||L(d??-1)):(L(-1),D(d,c)?v(""):v(d>=0?((p=O.current[d])==null?void 0:p.label)??"":""),ge(!1))},[z,c,O,d]);let M=e.useRef(t);e.useEffect(()=>{t!==M.current&&(M.current=t,a());function a(){var p;D(d,c)?L(-1):L(d),!D(d,c)&&!z&&v(d>=0?(p=t[d])==null?void 0:p.label:"")}},[t,z,c,d]);let[S,v]=e.useState(((Ve=r==null?void 0:r.value)==null?void 0:Ve.toString())??""),[he,ge]=e.useState(!1),se=e.useMemo(()=>{var a;return he?(a=j.current)==null?void 0:a.call(j,t,S):t},[j,S,t,he]),[Ne,De]=e.useState(""),Te=e.useCallback(a=>{var I;let{value:p}=a.currentTarget;v(p),T(),ge(!0),$!=-1&&L(-1),(I=r==null?void 0:r.onChange)==null||I.call(r,a)},[$,r,T]),ee=e.useCallback(a=>D(d,c)?d.includes(a):d===a,[c,d]),Me=e.useCallback((a,p)=>{if(D(d,c))return p==="added"?[...d,a]:d==null?void 0:d.filter(I=>I!==a)},[d,c]),ye=e.useCallback((a,p,I)=>{var g,B,G,H;ct(F.current,c)?(B=F.current)==null||B.call(F,(g=O.current[a])==null?void 0:g.value):p&&I&&((H=F.current)==null||H.call(F,I==null?void 0:I.map(Ce=>{var oe;return(oe=O.current[Ce])==null?void 0:oe.value}),{value:(G=O.current[a])==null?void 0:G.value,type:p}))},[c,F,O]),K=e.useCallback(a=>{var p,I;if((p=Q.current)==null||p.focus({preventScroll:!0}),!((I=O.current[a])!=null&&I.disabled))if(c){let g=ee(a)?"removed":"added",B=Me(a,g);if(B==null)return;h(B),ye(a,g,B),De(B.map(G=>{var H;return(H=O.current[G])==null?void 0:H.label}).filter(Boolean).join(", ")),k&&(v(""),ge(!1))}else h(a),N(),ye(a)},[O,c,ee,Me,h,ye,k,N]),Ee=e.useCallback((a,p)=>{let I=Se(a,C),{__originalIndex:g}=q[I],{icon:B,startIcon:G,label:H,...Ce}=a,oe=G??B,ue=y?y(a,{isFocused:$===g,isSelected:ee(g),index:g,id:I}):null;return ue?e.cloneElement(ue,{onClick:te=>{var ze,$e;K(g),($e=(ze=ue.props).onClick)==null||$e.call(ze,te)},focused:$===g,"data-iui-index":g,"data-iui-filtered-index":p,ref:je(ue.props.ref,te=>{!E&&$===g&&(te==null||te.scrollIntoView({block:"nearest"}))})}):e.createElement(dt,{key:I,id:I,startIcon:oe,...Ce,isSelected:ee(g),onClick:()=>{K(g)},index:g,"data-iui-filtered-index":p},H)},[E,$,C,ee,y,K,q]),Ae=e.useMemo(()=>e.createElement(e.Fragment,null,e.isValidElement(b)?b:e.createElement(Ue,null,e.createElement(Xe,{isMuted:!0},b))),[b]),Oe=Ke({visible:z,onVisibleChange:a=>a?T():N(),matchWidth:!0,middleware:{size:{maxHeight:"var(--iui-menu-max-height)"},...x},closeOnOutsideClick:!0,interactions:{click:!1,focus:!0}});return e.createElement(pe.Provider,{value:e.useMemo(()=>({inputRef:Q,menuRef:X,optionsExtraInfo:q}),[q])},e.createElement(J.Provider,{value:e.useMemo(()=>({id:C,isOpen:z,focusedIndex:$,setFocusedIndex:L,onClickHandler:K,enableVirtualization:E,filteredOptions:se,getMenuItem:Ee,multiple:c,popover:Oe,show:T,hide:N}),[E,se,$,Ee,K,N,C,z,c,Oe,T])},e.createElement(st,{ref:o,disabled:r==null?void 0:r.disabled,...Ie},e.createElement(it,{value:S,disabled:r==null?void 0:r.disabled,...r,onChange:Te,"aria-describedby":[c?`${C}-selected-live`:void 0,r==null?void 0:r["aria-describedby"]].filter(Boolean).join(" "),selectTags:D(d,c)?d==null?void 0:d.map(a=>{let p=t[a],I=Se(p,C),{__originalIndex:g}=q[I];return e.createElement(Je,{key:p.label,label:p.label,onRemove:()=>{K(g),N()}})}).filter(Boolean):void 0}),e.createElement(at,{...m,disabled:r==null?void 0:r.disabled,isOpen:z}),c?e.createElement(Qe,{text:Ne,id:`${C}-selected-live`}):null),e.createElement(ut,{as:"div",...R},se.length>0&&!E?se.map(Ee):Ae)))}),Vt=e.forwardRef((n,o)=>{let{children:f,className:i,labelPlacement:t,...s}=n,l=ft(f);return e.createElement(ne,{className:le("iui-input-grid",i),"data-iui-label-placement":t,ref:o,...s},l)});let ft=n=>{let{labelId:o,inputId:f,messageId:i}=mt(n);return e.useMemo(()=>e.Children.map(n,t=>e.isValidElement(t)?t.type===Re||t.type==="label"?Y(t,s=>({...s.props,htmlFor:s.props.htmlFor||f,id:s.props.id||o})):t.type===me?Y(t,s=>({...s.props,id:s.props.id||i})):de(t)||t.type===ce||t.type===fe?pt(t,{labelId:o,inputId:f,messageId:i}):t:t),[n,f,o,i])},mt=n=>{let o=Be(),f,i,t,s=!1,l=!1,u=r=>{var m;if(e.isValidElement(r)){if(r.type===we)return((m=r.props.inputProps)==null?void 0:m.id)||`${o}--input`;if(r.type!==ae)return r.props.id||`${o}--input`}};return e.Children.forEach(n,r=>{e.isValidElement(r)&&((r.type===Re||r.type==="label")&&(s=!0,f||(f=r.props.id||`${o}--label`)),r.type===me&&(t||(t=r.props.id||`${o}--message`)),r.type===ce||r.type===fe?e.Children.forEach(r.props.children,m=>{de(m)&&(i||(i=u(m)))}):de(r)&&(i||(i=u(r))),r.type===ae&&(l=!0))}),{labelId:l?f:void 0,inputId:s&&!l?i:void 0,messageId:t}},pt=(n,{labelId:o,inputId:f,messageId:i})=>{let t=(l={})=>{let u=[l["aria-describedby"],i].filter(Boolean).join(" ");return{...l,...n.type!==ae&&{id:l.id||f},"aria-describedby":(u==null?void 0:u.trim())||void 0}},s=l=>l.type===we?Y(l,u=>({inputProps:t(u.props.inputProps)})):l.type===ae?Y(l,u=>({triggerProps:{"aria-labelledby":o,...t(u.props.triggerProps)}})):Y(l,u=>t(u.props));return n.type===ce||n.type===fe?Y(n,l=>({children:e.Children.map(l.props.children,u=>e.isValidElement(u)&&de(u)?s(u):u)})):s(n)},de=n=>e.isValidElement(n)&&(n.type==="input"||n.type==="textarea"||n.type==="select"||n.type===Fe||n.type===Ge||n.type===ce.Input||n.type===ae||n.type===we);export{we as C,Vt as I,me as S};
