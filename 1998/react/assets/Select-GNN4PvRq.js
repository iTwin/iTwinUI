import{p as se,r as e,h as L,V as re,B as E,c as R,b as ue,d as B,m as q,n as ce,o as ie,P as oe}from"./index-CpsCEBgu.js";import{M as me,a as de}from"./MenuItem-vz0YIEyn.js";import{I as fe}from"./Icon-BX8YTp8_.js";import{u as be}from"./Popover-CzrcTwmd.js";import{S as Ee}from"./SvgCheckmark-CShB6WY0.js";import{S as ge}from"./SvgCaretDownSmall-By1VWgWZ.js";const $=se.div("iui-input-with-icon");$.displayName="InputWithIcon";const he=({text:t=""})=>{const[l,a]=e.useState(t);return e.useEffect(()=>{var r;a(t);const s=(r=L())==null?void 0:r.setTimeout(()=>a(""),5e3);return()=>{var o;return void((o=L())==null?void 0:o.clearTimeout(s))}},[t]),e.createElement(re,{as:"div","aria-live":"polite","aria-atomic":"true"},l)},A=e.forwardRef((t,l)=>{const{className:a,label:s,...r}=t;return e.createElement(E,{as:"span",className:R("iui-select-tag",a),ref:l,...r},e.createElement(E,{as:"span",className:"iui-select-tag-label"},s))}),Se=e.forwardRef((t,l)=>{const{tags:a,className:s,...r}=t,[o,f]=ue(a),m=B(l,o);return e.createElement(E,{className:R("iui-select-tag-container",s),ref:m,...r},e.createElement(e.Fragment,null,f<a.length?a.slice(0,f-1):a,f<a.length&&e.createElement(A,{label:`+${a.length-f+1} item(s)`})))}),Me=e.forwardRef((t,l)=>{const{native:a,...s}=t,r=a?ve:ye;return e.createElement(r,{...s,ref:l})}),ve=e.forwardRef((t,l)=>{const{triggerProps:a,options:s,disabled:r,placeholder:o,defaultValue:f=o!==void 0?"":void 0,value:m,onChange:p,size:w,status:k,styleType:T,required:O,...d}=t;return e.createElement($,{...d,ref:l},e.createElement(j,{as:"select",size:w,status:k,styleType:T,disabled:r,defaultValue:m===void 0?f:void 0,value:m===null?"":m,required:O,...a,onKeyDown:q(a==null?void 0:a.onKeyDown,u=>{var V,c;u.key==="Enter"&&((c=(V=u.currentTarget).showPicker)==null||c.call(V))}),onChange:q(a==null?void 0:a.onChange,u=>{p==null||p(u.currentTarget.value,u)})},T!=="borderless"&&o!==void 0?e.createElement("option",{value:"",disabled:!0},o):null,s.map(u=>e.createElement("option",{key:u.value,...u},u.label))),e.createElement(U,{disabled:r}))}),ye=e.forwardRef((t,l)=>{const a=ce(),{options:s,value:r,onChange:o,placeholder:f,disabled:m=!1,size:p,itemRenderer:w,selectedItemRenderer:k,menuClassName:T,menuStyle:O,multiple:d=!1,triggerProps:u,status:V,popoverProps:c,styleType:G,...J}=t,[F,I]=e.useState(!1),[Q,X]=e.useState(""),[Y,D]=e.useState(),i=r!==void 0?r:Y,b=ie(o),W=e.useRef(null),Z=e.useCallback(()=>{var n;m||(I(!0),(n=c==null?void 0:c.onVisibleChange)==null||n.call(c,!0))},[m,c]),x=e.useCallback(()=>{var n,y;I(!1),(n=W.current)==null||n.focus({preventScroll:!0}),(y=c==null?void 0:c.onVisibleChange)==null||y.call(c,!1)},[c]),_=e.useMemo(()=>s.map((n,y)=>{const h=M(i,d)?(i==null?void 0:i.includes(n.value))??!1:i===n.value,H=w?w(n,{close:()=>I(!1),isSelected:h}):e.createElement(me,null,n.label),{label:ee,icon:te,startIcon:ae,...ne}=n,le=ae??te;return e.cloneElement(H,{key:`${ee}-${y}`,isSelected:h,startIcon:le,endIcon:h?e.createElement(Ee,{"aria-hidden":!0}):null,onClick:()=>{var N,K;if(!n.disabled&&(Ne(b.current,d)?(D(n.value),(N=b.current)==null||N.call(b,n.value),x()):(D(S=>h?S==null?void 0:S.filter(z=>n.value!==z):[...S??[],n.value]),(K=b.current)==null||K.call(b,n.value,h?"removed":"added")),M(i,d))){const S=i||[],z=h?S.filter(C=>n.value!==C):[...S,n.value];X(s.filter(C=>z.includes(C.value)).map(C=>C.label).filter(Boolean).join(", "))}},ref:N=>{h&&!d&&(N==null||N.scrollIntoView({block:"nearest"}))},role:"option",...ne,...H.props})}),[x,w,d,b,s,i]),g=e.useMemo(()=>{if(i!=null)return M(i,d)?s.filter(n=>i.some(y=>y===n.value)):s.find(n=>n.value===i)},[d,s,i]),P=e.useCallback(n=>e.createElement(A,{key:n.label,label:n.label}),[]),v=be({visible:F,matchWidth:!0,closeOnOutsideClick:!0,...c,onVisibleChange:n=>n?Z():x()});return e.createElement(e.Fragment,null,e.createElement($,{...J,ref:B(v.refs.setPositionReference,l)},e.createElement(j,{...v.getReferenceProps(),tabIndex:0,role:"combobox",size:p,status:V,"aria-disabled":m?"true":void 0,"aria-autocomplete":"none","aria-expanded":F,"aria-haspopup":"listbox","aria-controls":`${a}-menu`,styleType:G,...u,ref:B(W,u==null?void 0:u.ref,v.refs.setReference),className:R({"iui-placeholder":(!g||g.length===0)&&!!f,"iui-disabled":m},u==null?void 0:u.className)},(!g||g.length===0)&&e.createElement(E,{as:"span",className:"iui-content"},f),M(g,d)?e.createElement(we,{selectedItems:g,selectedItemsRenderer:k,tagRenderer:P}):e.createElement(pe,{selectedItem:g,selectedItemRenderer:k})),e.createElement(U,{disabled:m,isOpen:F}),d?e.createElement(he,{text:Q}):null),v.open&&e.createElement(oe,null,e.createElement(de,{role:"listbox",className:T,id:`${a}-menu`,key:`${a}-menu`,...v.getFloatingProps({style:O,onKeyDown:({key:n})=>{n==="Tab"&&x()}}),ref:v.refs.setFloating},_)))}),M=(t,l)=>l,Ne=(t,l)=>!l,j=e.forwardRef((t,l)=>{const{size:a,status:s,styleType:r="default",...o}=t;return e.createElement(E,{"data-iui-size":a,"data-iui-status":s,"data-iui-variant":r!=="default"?r:void 0,...o,ref:l,className:R("iui-select-button",t.className)})}),U=e.forwardRef((t,l)=>{const{disabled:a,isOpen:s,...r}=t;return e.createElement(fe,{"aria-hidden":!0,...r,ref:l,className:R("iui-end-icon",{"iui-disabled":a,"iui-open":s},t.className)},e.createElement(ge,null))}),pe=({selectedItem:t,selectedItemRenderer:l})=>{const a=(t==null?void 0:t.startIcon)??(t==null?void 0:t.icon);return e.createElement(e.Fragment,null,t&&l&&l(t),t&&!l&&e.createElement(e.Fragment,null,a&&e.createElement(E,{as:"span",className:"iui-icon","aria-hidden":!0},a),e.createElement(E,{as:"span",className:"iui-content"},t.label)))},we=({selectedItems:t,selectedItemsRenderer:l,tagRenderer:a})=>{const s=e.useMemo(()=>t?t.map(r=>a(r)):[],[t,a]);return e.createElement(e.Fragment,null,t&&l&&l(t),t&&!l&&e.createElement(E,{as:"span",className:"iui-content"},e.createElement(Se,{tags:s})))};export{he as A,$ as I,Me as S,Se as a,A as b};
