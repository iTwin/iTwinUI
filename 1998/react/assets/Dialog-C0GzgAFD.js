import{r as e,_ as X,l as V,x as _,q as G,B as Y,c as F,p as H,m as J,I as Q,d as W,k as ee,h as L,g as te,Z as re,$ as q,P as ne}from"./index-CpsCEBgu.js";import{u as se}from"./useEventListener-2pjsLJSK.js";import{a as oe}from"./focusable-DQv_vybo.js";const ie=n=>e.createElement("div",{style:{position:"absolute",inset:-6,display:"grid",pointerEvents:"none"}},e.createElement(le,null),e.createElement(ae,{...n})),ae=n=>{const{elementRef:t,containerRef:r,onResizeStart:d,onResizeEnd:f}=n,m=e.useRef(!1),o=i=>{if(!t.current||i.button!==0)return;const a=i.clientX,z=i.clientY,[b,E]=X(t.current),{width:h,height:g}=t.current.getBoundingClientRect();let p=`${h}px`,x=`${g}px`,l=b,u=E,w=parseFloat(getComputedStyle(t.current).minWidth);Number.isNaN(w)&&(w=380);const v=parseFloat(getComputedStyle(t.current).minHeight),k=i.currentTarget.dataset.iuiResizer,c=t.current.ownerDocument||document,P=c.body.style.userSelect;c.body.style.userSelect="none";const T=S=>{var B;if(!t.current)return;m.current||(m.current=!0,d==null||d());const D=(B=r==null?void 0:r.current)==null?void 0:B.getBoundingClientRect(),O=V(S.clientX,(D==null?void 0:D.left)??0,(D==null?void 0:D.right)??c.documentElement.clientWidth??0),N=V(S.clientY,(D==null?void 0:D.top)??0,(D==null?void 0:D.bottom)??c.documentElement.clientHeight??0),C=a-O,$=z-N;switch(k){case"top-left":{const s=g+$;s>=v&&(x=t.current.style.height=`${s}px`,u=E-$);const y=h+C;y>=w&&(p=t.current.style.width=`${y}px`,l=b-C),t.current.style.transform=`translate(${l}px, ${u}px)`;break}case"top":{const s=g+$;if(s<v)break;x=t.current.style.height=`${s}px`,u=E-$,t.current.style.transform=`translate(${l}px, ${u}px)`;break}case"top-right":{const s=g+$;s>=v&&(x=t.current.style.height=`${s}px`,u=E-$),p=t.current.style.width=`${h-C}px`,t.current.style.transform=`translate(${l}px, ${u}px)`;break}case"right":{p=t.current.style.width=`${h-C}px`,x=t.current.style.height=`${g}px`,t.current.style.transform=`translate(${l}px, ${u}px)`;break}case"bottom-right":{p=t.current.style.width=`${h-C}px`,x=t.current.style.height=`${g-$}px`,t.current.style.transform=`translate(${l}px, ${u}px)`;break}case"bottom":{x=t.current.style.height=`${g-$}px`,t.current.style.transform=`translate(${l}px, ${u}px)`;break}case"bottom-left":{const s=h+C;s>=w&&(p=t.current.style.width=`${s}px`,l=b-C),x=t.current.style.height=`${g-$}px`,t.current.style.transform=`translate(${l}px, ${u}px)`;break}case"left":{const s=h+C;if(s<w)break;p=t.current.style.width=`${s}px`,x=t.current.style.height=`${g}px`,l=b-C,t.current.style.transform=`translate(${l}px, ${u}px)`;break}}};c.addEventListener("pointermove",T),c.addEventListener("pointerup",()=>{c.removeEventListener("pointermove",T),t.current&&(c.body.style.userSelect=P,m.current=!1,f==null||f({width:p,height:x,transform:`translate(${l}px, ${u}px)`}))},{once:!0})};return e.createElement(e.Fragment,null,e.createElement("div",{"data-iui-resizer":"top-left",onPointerDown:o,style:{cursor:"nw-resize"}}),e.createElement("div",{"data-iui-resizer":"top",onPointerDown:o,style:{cursor:"n-resize"}}),e.createElement("div",{"data-iui-resizer":"top-right",onPointerDown:o,style:{cursor:"ne-resize"}}),e.createElement("div",{"data-iui-resizer":"right",onPointerDown:o,style:{cursor:"e-resize"}}),e.createElement("div",{"data-iui-resizer":"bottom-right",onPointerDown:o,style:{cursor:"se-resize"}}),e.createElement("div",{"data-iui-resizer":"bottom",onPointerDown:o,style:{cursor:"s-resize"}}),e.createElement("div",{"data-iui-resizer":"bottom-left",onPointerDown:o,style:{cursor:"sw-resize"}}),e.createElement("div",{"data-iui-resizer":"left",onPointerDown:o,style:{cursor:"w-resize"}}))},le=e.memo(()=>e.createElement("style",null,ce)),ce=`
[data-iui-resizer] {
  pointer-events: auto;
  grid-area: 1 / 1 / -1 / -1;
  width: 12px;
  height: 12px;
  z-index: 1;
}
[data-iui-resizer='top'],
[data-iui-resizer='bottom'] {
  height: 8px;
  width: auto;
  z-index: 0;
}
[data-iui-resizer='left'],
[data-iui-resizer='right'] {
  height: auto;
  width: 8px;
  z-index: 0;
}
[data-iui-resizer^='top'] {
  align-self: start;
}
[data-iui-resizer^='bottom'] {
  align-self: end;
}
[data-iui-resizer$='left'] {
  justify-self: start;
}
[data-iui-resizer$='right'] {
  justify-self: end;
}`,ue=n=>{const{children:t}=n,r=e.useRef(),d=()=>{const o=oe(r.current),i=o[0],a=o[(o.length||1)-1];return[i,a]},f=o=>{const[i,a]=d();o.relatedTarget===i?a==null||a.focus():i==null||i.focus()},m=o=>{const[i,a]=d();o.relatedTarget===a?i==null||i.focus():a==null||a.focus()};return e.createElement(e.Fragment,null,e.createElement("div",{tabIndex:0,onFocus:f,"aria-hidden":!0}),e.cloneElement(t,{ref:_(t.ref,r)}),e.createElement("div",{tabIndex:0,onFocus:m,"aria-hidden":!0}))},de=n=>e.createElement(G,{...n},e.createElement("path",{d:"m14 0-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6 6-6"})),fe=e.forwardRef((n,t)=>{const{isVisible:r=!0,className:d,...f}=n;return e.createElement(Y,{className:F("iui-backdrop",{"iui-backdrop-visible":r},d),ref:t,...f})}),A=e.createContext(void 0),I=()=>e.useContext(A)||{},K=H.div("iui-dialog-title"),Z=e.createContext(void 0),me=()=>({...e.useContext(Z)}),pe=Object.assign(e.forwardRef((n,t)=>{const r=I(),{children:d,titleText:f,isDismissible:m=r.isDismissible,onClose:o=r.onClose,isDraggable:i=r.isDraggable,className:a,onPointerDown:z,...b}=n,{onPointerDown:E}=me();return e.createElement(Y,{className:F("iui-dialog-title-bar",a,{"iui-dialog-title-bar-filled":i}),ref:t,onPointerDown:J(z,E),...b},d||e.createElement(e.Fragment,null,e.createElement(K,null,f),m&&e.createElement(Q,{size:"small",styleType:"borderless",onClick:o,"aria-label":"Close","data-iui-shift":"right"},e.createElement(de,null))))}),{Title:K}),ge=H.div("iui-dialog-content"),he=e.forwardRef((n,t)=>{const r=I(),{isVisible:d=r.isOpen,isDismissible:f=r.isDismissible,onClose:m=r.onClose,closeOnExternalClick:o=r.closeOnExternalClick,relativeTo:i=r.relativeTo,onMouseDown:a,className:z,style:b,...E}=n,h=e.useRef(null),g=W(h,t),p=x=>{x.persist(),x.target===h.current&&(f&&o&&m&&m(x),a==null||a(x))};return e.createElement(fe,{isVisible:d,className:F({"iui-backdrop-fixed":i==="viewport"},z),ref:g,onMouseDown:p,style:{pointerEvents:"auto",...b},...E})}),xe=H.div("iui-dialog-button-bar"),U=n=>{var r,d,f;const t=(r=n==null?void 0:n.current)==null?void 0:r.getBoundingClientRect();return{top:(t==null?void 0:t.top)??0,right:(t==null?void 0:t.right)??((d=L())==null?void 0:d.innerWidth)??0,bottom:(t==null?void 0:t.bottom)??((f=L())==null?void 0:f.innerHeight)??0,left:(t==null?void 0:t.left)??0}},be=(n,t,r=!0)=>{const d=e.useRef(0),f=e.useRef(0),m=e.useRef(),o=e.useRef(),i=e.useRef(U(t)),a=e.useCallback(()=>{var P;if(!n.current||!r)return;const{top:l,right:u,bottom:w,left:v}=(P=n.current)==null?void 0:P.getBoundingClientRect();let[k,c]=X(n.current);i.current=U(t),w>i.current.bottom&&(c-=w-i.current.bottom),l<i.current.top&&(c+=i.current.top-l),u>i.current.right&&(k-=u-i.current.right),v<i.current.left&&(k+=i.current.left-v),m.current=k,o.current=c,n.current.style.transform=`translate(${k}px, ${c}px)`},[t,n,r]),[z,b]=ee(a);z(t==null?void 0:t.current),e.useEffect(()=>()=>{b==null||b.disconnect()},[b]),se("resize",()=>{a(),m.current!=null&&o.current!=null&&h(`translate(${m.current}px, ${o.current}px)`)},L());const[E,h]=e.useState(""),g=e.useRef(l=>{if(!n.current)return;const u=l.clientX-d.current,w=l.clientY-f.current;n.current.style.transform=`translate(${u}px, ${w}px)`,a()}),p=e.useRef("");return{onPointerDown:e.useCallback(l=>{if(!n.current||l.button!==0||!r)return;const[u,w]=X(n.current);d.current=l.clientX-u,f.current=l.clientY-w,p.current=n.current.style.userSelect,n.current.style.userSelect="none";const v=n.current.ownerDocument||document;v.addEventListener("pointermove",g.current),v.addEventListener("pointerup",()=>{h(`translate(${m.current}px, ${o.current}px)`),v.removeEventListener("pointermove",g.current),n.current&&(n.current.style.userSelect=p.current)},{once:!0})},[n,r]),transform:E}},ye=e.forwardRef((n,t)=>{const r=I(),{className:d,children:f,styleType:m="default",isOpen:o=r.isOpen,isDismissible:i=r.isDismissible,onClose:a=r.onClose,closeOnEsc:z=r.closeOnEsc,trapFocus:b=r.trapFocus,setFocus:E=r.setFocus,preventDocumentScroll:h=r.preventDocumentScroll,onKeyDown:g,isDraggable:p=r.isDraggable,isResizable:x=r.isResizable,style:l,placement:u=r.placement,...w}=n,[v,k]=e.useState(),c=e.useRef(null),P=e.useRef(!1),T=e.useRef(),S=e.useRef("");e.useEffect(()=>{o&&(S.current=document.body.style.overflow)},[o]),e.useEffect(()=>{var y;const s=(y=c.current)==null?void 0:y.ownerDocument;if(!(!s||!h||S.current==="hidden"))return o?s.body.style.overflow="hidden":s.body.style.overflow=S.current,()=>{s.body.style.overflow=S.current}},[o,h]);const D=s=>{s.altKey||(s.persist(),i&&z&&s.key==="Escape"&&a&&a(s),g==null||g(s))},{onPointerDown:O,transform:N}=be(c,r.dialogRootRef,p),C=e.useCallback(s=>{p&&O(s)},[p,O]);te(()=>{if(!p||!o)return;const[s,y]=X(c.current);k(R=>{var M,j;return{...R,insetInlineStart:(M=c.current)==null?void 0:M.offsetLeft,insetBlockStart:(j=c.current)==null?void 0:j.offsetTop,transform:`translate(${s}px,${y}px)`}})},[p,o]);const $=e.useCallback(s=>{k(y=>({...y,...s}))},[]),B=e.createElement(Y,{className:F("iui-dialog",{"iui-dialog-default":m==="default","iui-dialog-full-page":m==="fullPage","iui-dialog-visible":o,"iui-dialog-draggable":p},d),role:"dialog",ref:W(c,t),onKeyDown:D,tabIndex:-1,"data-iui-placement":u,style:{transform:N,...v,...l},...w},e.createElement(re,null,e.createElement("slot",null),x&&e.createElement(ie,{elementRef:c,containerRef:r.dialogRootRef,onResizeStart:()=>{P.current||(P.current=!0,$({maxInlineSize:"100%"}))},onResizeEnd:$})),f);return e.createElement(q,{in:o,appear:!0,timeout:{exit:600},onEntered:()=>{var s,y;T.current=(s=c.current)==null?void 0:s.ownerDocument.activeElement,E&&((y=c.current)==null||y.focus({preventScroll:!0}))},onExit:()=>{var s,y,R;(y=c.current)!=null&&y.contains((s=c.current)==null?void 0:s.ownerDocument.activeElement)&&((R=T.current)==null||R.focus())},unmountOnExit:!0,nodeRef:c},e.createElement(Z.Provider,{value:{onPointerDown:C}},b&&e.createElement(ue,null,B),!b&&B))}),Ee=e.forwardRef((n,t)=>{const{trapFocus:r=!1,setFocus:d=!0,preventDocumentScroll:f=!1,isOpen:m=!1,isDismissible:o=!0,closeOnEsc:i=!0,closeOnExternalClick:a=!1,onClose:z,isDraggable:b=!1,isResizable:E=!1,relativeTo:h="viewport",placement:g,className:p,portal:x=!1,...l}=n,u=e.useRef(null);return e.createElement(q,{in:m,timeout:{exit:600},mountOnEnter:!0,unmountOnExit:!0},e.createElement(A.Provider,{value:{isOpen:m,onClose:z,closeOnEsc:i,closeOnExternalClick:a,isDismissible:o,preventDocumentScroll:f,trapFocus:r,setFocus:d,isDraggable:b,isResizable:E,relativeTo:h,dialogRootRef:u,placement:g}},e.createElement(ne,{portal:x},e.createElement(Y,{className:F("iui-dialog-wrapper",p),"data-iui-relative":h==="container",ref:W(t,u),...l}))))}),$e=Object.assign(Ee,{Backdrop:he,Main:ye,TitleBar:pe,Content:ge,ButtonBar:xe});export{$e as D,ge as a,xe as b};
